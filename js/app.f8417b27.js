(function(){var e={442:function(e,t,a){"use strict";e.exports=a.p+"img/sheep-intro.c74f4e2b.png"},1643:function(e,t,a){"use strict";e.exports=a.p+"img/wheat-base.342d26f0.svg"},2150:function(e,t,a){"use strict";e.exports=a.p+"img/gray-cow.0cb4e967.png"},3617:function(e,t,a){"use strict";e.exports=a.p+"img/brown-speckle-cow.388dfae6.png"},4053:function(e,t,a){var r={"./black-speckle-cow.png":8052,"./brown-cow.png":9139,"./brown-ram.png":6082,"./brown-sheep.png":4967,"./brown-speckle-cow.png":3617,"./gray-cow.png":2150,"./white-ram-2.png":4084,"./white-sheep-2.png":7045};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=4053},4084:function(e,t,a){"use strict";e.exports=a.p+"img/white-ram-2.e8f59ca2.png"},4887:function(e,t,a){"use strict";var r=a(5130),n=a(6768),s=a(4232);const o={id:"scrollyteller"},l={class:"left-tab-container"},i=["onClick"],c={class:"right-tab-container"},u={key:0,class:"methodology-panel"};function d(e,t,a,r,d,h){const p=(0,n.gN)("intersect");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",l,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(h.visibleTitles,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:(0,s.C4)(["tab",{active:t+1===d.activeStep}]),style:(0,s.Tr)(t+1===d.activeStep?{color:h.getTabColor(t),borderLeftColor:h.getTabColor(t)}:{}),onClick:e=>h.goToStep(t+1)},(0,s.v_)(e),15,i)))),128))]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.steps,((e,t)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:t,class:"charts-wrapper"},[((0,n.uX)(),(0,n.Wv)((0,n.$y)(e)))])),[[p,()=>h.setActiveStep(t)]]))),128)),(0,n.Lk)("div",c,[(0,n.Lk)("div",{class:(0,s.C4)(["tab",{active:d.showMethodology}]),onClick:t[0]||(t[0]=e=>d.showMethodology=!d.showMethodology)}," Methodology ",2),t[1]||(t[1]=(0,n.Lk)("a",{class:"tab",href:"https://lsq.design",target:"_blank",rel:"noopener"},"lsq.design",-1))]),d.showMethodology?((0,n.uX)(),(0,n.CE)("div",u,t[2]||(t[2]=[(0,n.Fv)("<h5>Methodology</h5><h6>Zooming Into Risk</h6><p>This section describes the methodology behind the visualizations...</p><h6>Raincheck Forever</h6><p>You can include multiple <code>&lt;h&gt;</code> and <code>&lt;p&gt;</code> tags here.</p><h6>Future Heat</h6><p>This section describes the methodology behind the visualizations...</p><h6>Pasture Panic</h6><p>You can include multiple <code>&lt;h&gt;</code> and <code>&lt;p&gt;</code> tags here.</p><h6>Wheat Drop</h6><p>This section describes the methodology behind the visualizations...</p><h6>Climate Survival Kit</h6><p>You can include multiple <code>&lt;h&gt;</code> and <code>&lt;p&gt;</code> tags here.</p><h6>Disaster Time Machine</h6><p>You can include multiple <code>&lt;h&gt;</code> and <code>&lt;p&gt;</code> tags here.</p>",15)]))):(0,n.Q3)("",!0)])}a(8111),a(116),a(4603),a(7566),a(8721);var h=a(144),p=a(8882),v=a(1614);const f={class:"hello-morocco"},g={class:"hello"},m={class:"floods-fires-line"},y={id:"droughts-clip"},b=["y","font-size"],k=["href"],w={class:"png-animation-container"},L=["src"],x=["src"],C={id:"text-clip"},E={class:"morocco-location"};var F={__name:"HelloMorocco",setup(e){const t=(0,h.KR)(null),r=(0,h.KR)(null),o=(0,h.KR)(null),l=(0,h.KR)(null),i=(0,h.KR)(null),c=(0,h.KR)(null),u=(0,h.KR)(null),d=(0,h.KR)(null),F=(0,h.KR)(null),M=(0,h.KR)(null),S=(0,h.KR)(""),T=(0,h.KR)(null);let _=null,I=null,R=null,A=null,W=176;const O=(0,h.KR)(3),D=(0,h.KR)(null),z=(0,h.KR)(null),$=(0,h.KR)(null),B=(0,h.KR)([20,-5]),K=()=>{const e=$.value?.geojson.features.find((e=>"Morocco"===e.properties.ADMIN));if(!e)return void console.warn("Morocco not found in GeoJSON.");const t=$.value?.leafletObject.getLayers().find((e=>"Morocco"===e.feature?.properties.ADMIN));if(t){t.setStyle({fillColor:"#d4bb9749",color:"#e2d3b4",weight:2,fillOpacity:.9});const e=t.getBounds(),a=[700,0];z.value?.leafletObject.fitBounds(e,{maxZoom:7,paddingTopLeft:a}),B.value=e.getCenter(),O.value=z.value?.leafletObject.getZoom()}};(0,n.sV)((()=>{P(),setTimeout((()=>{K()}),35e3)}));const P=async()=>{try{const e=await fetch("./data/country-boundaries.geojson"),t=await e.json();D.value=t,console.log("GeoJSON Data:",D.value)}catch(e){console.error("Error loading data:",e)}},X=()=>({fillColor:"#f5f0e168",color:"#e2d3b4",weight:1,fillOpacity:.7});function N(){return new URL(a(9230),a.b).href}function V(){return new URL(a(442),a.b).href}const j=(0,h.KR)(!1);(0,n.sV)((()=>{setTimeout((()=>{j.value=!0}),2e3)}));const H=(0,n.EW)((()=>Array.from({length:10},((e,t)=>{const a=t+1;return j.value?{animation:"wiltDown 3s ease-out forwards",animationDelay:3*(10-a)+"s"}:{}})))),G=(0,n.EW)((()=>j.value?{animation:"slideInSheep 1s ease-out 1s forwards"}:{}));function Y(){const e=F.value,t=T.value.getBoundingClientRect();e.style.position="absolute",e.style.left=t.left-359+"px",e.style.top=t.top-142+"px",e.style.width=`${t.width}px`,e.style.height=`${W}px`,l.value.setAttribute("x",0),l.value.setAttribute("y",W),l.value.setAttribute("font-size",W)}function U(){const e=t.value,{x:a,y:n}=(p.Ltv(r.value),o.value.getBoundingClientRect());e.setAttribute("width",550),e.setAttribute("height",170),e.style.position="absolute",e.style.left=a-360+"px",e.style.top=n-185+"px",l.value.setAttribute("x",0),l.value.setAttribute("y",127.5),l.value.setAttribute("font-size",170)}function q(){const e=i.value,t=c.value.getBoundingClientRect();e.setAttribute("width",t.width),e.setAttribute("height",t.height),e.style.position="absolute",e.style.left=`-${t.left}px/2`,e.style.top=t.top-310+"px",d.value.setAttribute("width",t.width),d.value.setAttribute("height",t.height)}function Q(){const e=M.value,t=e.getContext("2d"),a=1000.74,r=W;e.width=a,e.height=r,t.fillStyle="transparent",t.fillRect(0,0,a,r);const n=2500;for(let s=0;s<n;s++){const e=Math.random()*a,n=Math.random()*r,s=8+12*Math.random(),o=-Math.PI/2+.6*(Math.random()-.5),l=e+s*Math.cos(o),i=n+s*Math.sin(o);t.beginPath(),t.moveTo(e,n),t.lineTo(l,i),t.strokeStyle=`rgba(139, 69, 19, ${.04+.3*Math.random()})`,t.lineWidth=1,t.stroke()}S.value=e.toDataURL()}function J(){const e=new IntersectionObserver((([e])=>{F.value&&T.value&&(F.value.style.display=e.isIntersecting?"block":"none")}),{threshold:.1});T.value instanceof Element&&e.observe(T.value),I=new IntersectionObserver((([e])=>{e.isIntersecting&&!_?(_=Z(p.Ltv(r.value),t.value),t.value.style.display="block"):!e.isIntersecting&&_&&(_.stop(),_=null,t.value.style.display="none")}),{threshold:.1}),o.value instanceof Element&&I.observe(o.value);let a=!1;R=new IntersectionObserver((([e])=>{e.isIntersecting&&!a?(a=!0,i.value.style.display="block",ee(i.value)):!e.isIntersecting&&a&&(a=!1,p.Ltv(u.value).selectAll("*").interrupt().remove(),i.value.style.display="none")}),{threshold:.1}),c.value instanceof Element&&R.observe(c.value)}function Z(e,t){const{width:a,height:r}=t.getBoundingClientRect();function n(){const t=Math.random()*a,n=Math.random()*r,s=t+15*(Math.random()-.5),o=n+15*(Math.random()-.5),l=e.append("path").attr("d",`M${t},${n} L${s},${o}`).attr("stroke",Math.random()<.5?"#FFFF99":"#FFFFFF").attr("stroke-width",1+5*Math.random()).attr("stroke-dasharray","5 5").attr("stroke-dashoffset",5).attr("opacity",1);l.transition().duration(200).attr("stroke-dashoffset",0).attr("opacity",0).remove()}return p.O1W((()=>{for(let e=0;e<20;e++)Math.random()<.7&&n()}))}function ee(e,t=100){if(!e)return;const a=699.953,r=W,n=p.Ltv(e);n.attr("width",a).attr("height",r).attr("viewBox",`0 0 ${a} ${r}`);const s=p.Ltv(e.querySelector("g"));s.selectAll("*").remove();const o=6,l=10;for(let i=0;i<t;i++){const e=Math.random()*a,t=100*-Math.random(),n=r+l,i=2e3*Math.random(),c=2e3+2e3*Math.random(),u=p.AeT();u.moveTo(0,l/2),u.bezierCurveTo(o/2,l/2,o/2,-l/4,0,-l/2),u.bezierCurveTo(-o/2,-l/4,-o/2,l/2,0,l/2),s.append("path").attr("d",u.toString()).attr("fill","#40E0D0").attr("transform",`translate(${e}, ${t})`).transition().delay(i).duration(c).ease(p.yfw).attr("transform",`translate(${e}, ${n})`).on("end",(function e(){const t=Math.random()*a;p.Ltv(this).attr("transform",`translate(${t}, ${-l})`).transition().delay(2e3*Math.random()).duration(2e3+2e3*Math.random()).ease(p.yfw).attr("transform",`translate(${t}, ${n})`).on("end",e)}))}}return(0,n.sV)((async()=>{await(0,n.dY)(),A&&A.stop();const e=p.m4Y().domain([0,.25,.5,.75,1]).range(["#DEB887","#d4bb97","#e2d3b4","#d4bb97","#DEB887"]);A=p.O1W((t=>{const a=(Math.sin(t/3e3)+1)/2,r=e(a);T.value&&(T.value.style.color=r)})),Q(),Y(),U(),q(),await(0,n.dY)(),J()})),(0,n.hi)((()=>{_&&_.stop(),I&&I.disconnect(),R&&R.disconnect(),A&&A.stop(),F.value&&F.value.remove()})),(e,a)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",f,[(0,n.Lk)("div",g,[(0,n.Lk)("h1",{class:"droughts",ref_key:"droughtsText",ref:T},"Droughts",512),(0,n.Lk)("div",m,[(0,n.Lk)("h1",{class:"floods",ref_key:"floodsText",ref:c},"Floods",512),a[1]||(a[1]=(0,n.Lk)("h4",{class:"rotated"},"and",-1)),(0,n.Lk)("div",{class:"fires-placeholder",ref_key:"firesText",ref:o},null,512)]),a[3]||(a[3]=(0,n.Lk)("h4",{class:"subtitle"},"A Case Study of Morocco and Climate Change",-1)),a[4]||(a[4]=(0,n.Lk)("h5",{class:"byline"},"Lisa Sakai Quinley",-1)),(0,n.Lk)("canvas",{ref_key:"noiseCanvas",ref:M,style:{display:"none"}},null,512),((0,n.uX)(),(0,n.CE)("svg",{ref_key:"droughtsSvg",ref:F,class:"droughts-svg"},[(0,n.Lk)("defs",null,[(0,n.Lk)("clipPath",y,[(0,n.Lk)("text",{x:"0",y:.75*(0,h.R1)(W),"font-size":(0,h.R1)(W),"font-family":"Parkinsans","font-weight":"800"}," DROUGHTS ",8,b)])]),(0,n.Lk)("image",{href:S.value,width:"1000.740",height:"176","clip-path":"url(#droughts-clip)"},null,8,k)],512)),(0,n.Lk)("div",w,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(H.value,((e,t)=>((0,n.uX)(),(0,n.CE)("img",{key:t,src:N(),class:"png-frame wheat",style:(0,s.Tr)(e),alt:"Wheat"},null,12,L)))),128)),(0,n.Lk)("img",{src:V(),class:"png-frame sheep",style:(0,s.Tr)(G.value),alt:"Sheep"},null,12,x)]),((0,n.uX)(),(0,n.CE)("svg",{ref_key:"floodsSvg",ref:i,class:"floods-svg"},[(0,n.Lk)("g",{ref_key:"raindropGroup",ref:u},[(0,n.Lk)("rect",{ref_key:"raindropRect",ref:d,width:"100%",height:"100%",fill:"#089c9d"},null,512)],512)],512)),((0,n.uX)(),(0,n.CE)("svg",{ref_key:"firesSvg",ref:t,class:"fires-svg"},[(0,n.Lk)("defs",null,[(0,n.Lk)("clipPath",C,[(0,n.Lk)("text",{ref_key:"clipText",ref:l,"font-family":"Parkinsans","font-weight":"800",id:"firesText",fill:"black"}," FIRES ",512)])]),(0,n.Lk)("g",{"clip-path":"url(#text-clip)",ref_key:"sparkGroup",ref:r},a[2]||(a[2]=[(0,n.Lk)("rect",{width:"100%",height:"100%",fill:"rgb(153, 0, 0)"},null,-1)]),512)],512))])]),(0,n.Lk)("div",E,[(0,n.bF)((0,h.R1)(v.Do),{ref_key:"map",ref:z,zoom:O.value,"onUpdate:zoom":a[0]||(a[0]=e=>O.value=e),center:B.value,"zoom-control":!1,class:"morocco-map"},{default:(0,n.k6)((()=>[D.value?((0,n.uX)(),(0,n.Wv)((0,h.R1)(v.q7),{key:0,ref_key:"geoJsonLayer",ref:$,geojson:D.value,"options-style":X},null,8,["geojson"])):(0,n.Q3)("",!0)])),_:1},8,["zoom","center"])])],64))}},M=a(1241);const S=(0,M.A)(F,[["__scopeId","data-v-394f8762"]]);var T=S;a(2489),a(7588),a(1701),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const _={class:"bar-chart-content"},I={class:"legend"};var R={__name:"RainfallPrecipitation",setup(e){const t=(0,h.KR)(null),a={},r={},s=(0,h.KR)([]),o=(0,h.KR)([]),l=(0,h.KR)([]),i=(0,n.EW)((()=>l.value.filter((e=>e.toLowerCase().includes("precipitation")&&e.includes("8.5")))));(0,n.sV)((()=>{t.value&&c.observe(t.value)}));const c=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(e.target.classList.add("in-view"),d()):e.target.classList.remove("in-view")}))}),{threshold:.5});function u(){const{innerWidth:e,innerHeight:t}=window;return t>e?5:10}function d(){const e=u();i.value.forEach((t=>{const r=s.value.map((e=>({year:+e.year,value:Math.round(parseFloat(e["Precipitation"])),source:"historical"}))).filter((e=>!isNaN(e.value))),n=o.value.filter((e=>2020!==+e.year)).map((e=>({year:+e.year,value:Math.round(parseFloat(e[t])),source:"projected"}))).filter((e=>!isNaN(e.value))),l=[...r,...n],i=m(l);g(i,a[t],t,e)}))}function v(e,t){const a=p.Ltv(t);a.selectAll("*").remove();const r=10,n=r,s=1.3*r,o={historical:"#089c9d",projected:"#40E0D0",regression:"url(#regressionGradient)"},l=p.AeT();l.moveTo(0,-s/2),l.bezierCurveTo(n/2,-s/2,n/2,s/4,0,s/2),l.bezierCurveTo(-n/2,s/4,-n/2,-s/2,0,-s/2);const i=["historical","projected","regression"];i.forEach(((t,r)=>{const n=20,s=20+25*r;"regression"===t?(a.append("line").attr("x1",n-5).attr("x2",n+15).attr("y1",s).attr("y2",s).attr("stroke","#5C4033").attr("stroke-width",2),a.append("text").attr("x",n+20).attr("y",s+5).attr("fill","#2c3e50").attr("font-size","1em").text("Downward Trend")):(a.append("path").attr("d",l.toString()).attr("transform",`translate(${n}, ${s}) scale(1, -1)`).attr("fill",o[t]),a.append("text").attr("x",n+15).attr("y",s+5).attr("fill","#2c3e50").attr("font-size","1em").text(`${"historical"===t?"Past":"Future"}: 1 raindrop = ${Math.round(e)} mm`))})),a.attr("width",250).attr("height",90)}function f(e,t){const a=p.i2o(e),r=p.i2o(t),n=p.czq(e.map(((e,n)=>(e-a)*(t[n]-r))))/p.czq(e.map((e=>(e-a)**2))),s=r-n*a;return{slope:n,intercept:s,predict:e=>s+n*e}}function g(e,t,a,n){if(!t||!e.length)return;const s=t.parentNode,o=s.getBoundingClientRect().width,l=s.getBoundingClientRect().height,c=p.Ltv(t).attr("width",o).attr("height",l).attr("viewBox",`0 0 ${o} ${l}`);c.selectAll("*").remove();const u={top:20,right:20,bottom:30,left:60},d=o-u.left-u.right,h=l-u.top-u.bottom,g=c.append("g").attr("transform",`translate(${u.left},${u.top})`),m=Array.from(new Set(e.map((e=>e.year)))).sort(((e,t)=>e-t)),y=p.WH().domain(m).range([0,d]).padding(.1),b=p.T9B(e,(e=>e.value)),k=p.m4Y().domain([0,b]).range([h,0]),w=p.UMr().domain(["historical","projected"]).range(["#089c9d","#40E0D0"]),L=f(e.map((e=>e.year)),e.map((e=>e.value))),x=p.n8j().x((e=>y(e.year)+y.bandwidth()/2)).y((e=>k(L.predict(e.year)))),C=[{year:p.jkA(e,(e=>e.year))},{year:p.T9B(e,(e=>e.year))}],E=c.append("defs"),F=E.append("linearGradient").attr("id","regressionGradient").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");F.append("stop").attr("offset","0%").attr("stop-color","#DEB887"),F.append("stop").attr("offset","100%").attr("stop-color","#5C4033");const M=g.append("path").datum(C).attr("fill","none").attr("stroke","url(#regressionGradient)").attr("stroke-width",2).attr("d",x),S=M.node().getTotalLength();M.attr("stroke-dasharray",`${S} ${S}`).attr("stroke-dashoffset",S).transition().duration(3e3).ease(p.TD8).attr("stroke-dashoffset",0),a===i.value[0]&&v(n,r[a]),e.forEach((e=>{const t=Math.floor(e.value/n),a=y(e.year)+y.bandwidth()/2,r=Math.min(y.bandwidth()/3,12);for(let s=0;s<t;s++){const t=n*(s+1),o=k(t),l=100*Math.random()+20,i=800*Math.random(),c=2.5*r,u=2*r,d=p.AeT();d.moveTo(0,-c/2),d.bezierCurveTo(u/2,-c/2,u/2,c/4,0,c/2),d.bezierCurveTo(-u/2,c/4,-u/2,-c/2,0,-c/2),g.append("path").attr("d",d.toString()).attr("transform",`translate(${a}, ${-l}) scale(1, -1)`).attr("fill",w(e.source)).transition().delay(i).duration(2e3).ease(p.JKS).attr("transform",`translate(${a}, ${o}) scale(1, -1)`)}}));const T=m.filter(((e,t,a)=>0===t||t===a.length-1||e%10===0));g.append("g").selectAll("text.x-axis").data(T).enter().append("text").attr("class","x-axis").attr("x",(e=>y(e)+y.bandwidth()/2)).attr("y",h+25).style("text-anchor","middle").text((e=>e)),g.append("g").selectAll("line.x-axis-tick").data(T).enter().append("line").attr("class","x-axis-tick").attr("x1",(e=>y(e)+y.bandwidth()/2)).attr("x2",(e=>y(e)+y.bandwidth()/2)).attr("y1",h).attr("y2",h+6).style("stroke","black").style("stroke-width",1),g.append("g").selectAll("text.y-axis").data(k.ticks(5).filter((e=>0!==e))).enter().append("text").attr("class","y-axis").attr("x",-40).attr("y",(e=>k(e)+5)).style("text-anchor","middle").text((e=>e.toFixed(0))),g.append("g").selectAll("line.y-axis-tick").data(k.ticks(5).filter((e=>0!==e))).enter().append("line").attr("class","y-axis-tick").attr("x1",-20).attr("x2",-10).attr("y1",(e=>k(e))).attr("y2",(e=>k(e))).style("stroke","black").style("stroke-width",1);const _=g.append("rect").attr("class","hover-bar").attr("width",y.bandwidth()).attr("fill-opacity",.7).style("display","none").attr("y",h).attr("height",0);g.selectAll(".hover-zone").data(e).enter().append("rect").attr("class","hover-zone").attr("x",(e=>y(e.year))).attr("y",0).attr("width",y.bandwidth()).attr("height",h).attr("fill","transparent").on("mouseover",(function(e,t){_.interrupt();const a=w(t.source);_.style("display","block").transition().duration(500).ease(p.TD8).attr("x",y(t.year)).attr("y",k(t.value)).attr("height",h-k(t.value)).attr("fill",a),g.selectAll(".bar-label").remove(),g.append("text").attr("class","bar-label").attr("x",y(t.year)+y.bandwidth()/2).attr("y",k(t.value)-10).attr("text-anchor","middle").attr("fill","#333").attr("opacity",0).text(`${Math.round(t.value)} mm`).transition().duration(500).attr("opacity",1)})).on("mouseout",(function(){_.interrupt(),_.transition().duration(500).ease(p.TD8).attr("y",h).attr("height",0).style("display","none"),g.selectAll(".bar-label").transition().duration(300).attr("opacity",0).remove()}))}function m(e){const t=p.i8y(e,(e=>p.czq(e,(e=>e.value))),(e=>e.year)).map((([t,a])=>({year:t,value:a,source:e.find((e=>e.year===t)).source})));return t}return(0,n.wB)([s,o],(async()=>{if(!s.value.length||!o.value.length)return;const e=u(),t="Precipitation";for(const r of i.value){const l=s.value.map((e=>({year:+e.year,value:Math.round(parseFloat(e[t])),source:"historical"}))).filter((e=>!isNaN(e.value))),i=o.value.filter((e=>2020!==+e.year)).map((e=>({year:+e.year,value:Math.round(parseFloat(e[r])),source:"projected"}))).filter((e=>!isNaN(e.value))),c=[...l,...i],u=m(c);await(0,n.dY)(),g(u,a[r],r,e)}})),(0,n.sV)((async()=>{try{const e=await p.fu7("./data/MeanMaxSurfaceAirTempuratureAndPrecipitation-1951-2020-Month.csv"),t=await p.fu7("./data/AverageMeanAndMaxSurfaceAirTemperatureAndPrecipitation-2020-2099-Month-FourScenarios.csv");s.value=e,o.value=t,l.value=Object.keys(t[0]||{})}catch(e){console.error("Error loading CSV data:",e)}})),(e,s)=>((0,n.uX)(),(0,n.CE)("div",{class:"precip-wrapper bar-chart",ref_key:"precipWrapperRef",ref:t},[s[0]||(s[0]=(0,n.Lk)("h3",null,[(0,n.eW)("Raincheck"),(0,n.Lk)("br"),(0,n.eW)("Forever")],-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"bar-chart-block"},[(0,n.Lk)("div",_,[(0,n.Lk)("div",I,[((0,n.uX)(),(0,n.CE)("svg",{ref_for:!0,ref:t=>r[e]=t,height:"40"},null,512))]),((0,n.uX)(),(0,n.CE)("svg",{ref_for:!0,ref:t=>a[e]=t},null,512))])])))),128))],512))}};const A=(0,M.A)(R,[["__scopeId","data-v-c8ccda7a"]]);var W=A;a(4114);const O={class:"title"},D={class:"top-bar"},z={class:"legend"},$={class:"legend-pairs"},B={class:"legend-color-pair"},K={class:"legend-label"},P={class:"control-container"},X={class:"left-controls"},N={class:"radio-buttons"},V={class:"overlay-toggle toggle-switch"},j={class:"switch"},H={class:"toggle-label"},G={class:"heatmap-container"},Y=["onMouseenter"],U={class:"heatmap-visual"},q=["data-last-heatmap"],Q={class:"cover-message"},J={class:"cover-headings"},Z={class:"cover-paragraph"},ee=["innerHTML"];var te={__name:"MeanTemperature",setup(e){const t={},a=(0,h.KR)(null),o=(0,h.KR)(null),l=(0,h.KR)(null),i=(0,h.KR)([]),c=(0,h.KR)([]),u=(0,h.KR)([]),d=(0,h.KR)("max"),v=(0,h.KR)(""),f=(0,h.KR)(!1),g=(0,h.KR)(!1),m=(0,h.KR)(!1),y=(0,h.KR)(!0),b=(0,n.EW)((()=>{const e=[15,20,25,30,35],t=e.map((e=>Math.round(9*e/5+32))),a=g.value?[...t.map((e=>`${e}°F`)),`${Math.round(104)}°F+`]:[...e.map((e=>`${e}°C`)),"40°C+"],r=["#40E0D0","#7FFF00","#FFFF00","#FF8000","#FF0000","#820747"];return r.map(((e,t)=>({color:e,label:a[t]})))})),k=(0,n.EW)((()=>{const e=["#D3D3D3","#A9A9A9","#808080","#505050","#303030","#101010"],t=b.value.map((e=>e.label));return e.map(((e,a)=>({color:e,label:t[a]})))})),w=(0,n.EW)((()=>u.value.filter((e=>"mean"===d.value?e.toLowerCase().includes("mean"):e.toLowerCase().includes("max"))).reverse())),L=e=>e.includes("SSP1-2.6")?{title:"Kindling Spark",subtitle:"Best-Case Scenario",soundBite:"The fire’s just a flicker — we nearly snuffed it out.",message:"Aiming high on sustainability, this scenario sees the world making strong progress on cutting emissions, hitting net-zero after 2050. The result? Global warming is likely kept below 2°C by 2100. It’s the climate-friendly path."}:e.includes("SSP2-4.5")?{title:"Smoldering Path",subtitle:"Business-as-Usual Scenario",soundBite:"The coals still burn — slow heat, rising risk.",message:"This is the “do a little, but not too much” path. Emissions stay close to current levels until around mid-century, then slowly decline. Net-zero isn't reached until after 2100. It's a compromise route, with moderate climate action and moderate consequences."}:e.includes("SSP3-7.0")?{title:"Rising Blaze",subtitle:"Worsening Scenario",soundBite:"The flames are spreading — no one’s tending the line.",message:"In this future, the world is fragmented, with regional tensions and little cooperation. Emissions keep rising, nearly doubling by 2100. Climate action takes a back seat, leading to increasing global risks and instability."}:e.includes("SSP5-8.5")?{title:"Inferno Run",subtitle:"Worst-Case Scenario",soundBite:"The firestorm roars — and we lit the match.",message:"Fueled by fossil energy and tech innovation, this path prioritizes economic growth over sustainability. Emissions soar, and radiative forcing reaches the highest levels — it’s the “worst-case” outlook. It's the high-speed lane to extreme climate change."}:{title:"Unknown Flame",subtitle:e,soundBite:"Unknown path — map not available.",message:"Scenario description unavailable."};function x(e,t,a){if(!t||!e.length)return;const r=t.parentNode,n=r.getBoundingClientRect().width,s=r.getBoundingClientRect().height,o=Array.from(new Set(e.map((e=>e.month)))).reverse(),l=Array.from(new Set(e.map((e=>e.year)))),i={top:0,right:90,bottom:30,left:50},c=s-i.top-i.bottom,u=n-i.left-i.right,d=p.Ltv(t).attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${n} ${s}`);d.selectAll("*").remove();const h=p.WH().domain(l).range([0,u]).padding(.05),v=p.WH().domain(o).range([c,0]).padding(.05),f=p.c3b().domain([15,20,25,30,35]).range(["#40E0D0","#7FFF00","#FFFF00","#FF8000","#FF0000","#820747"]),g=d.append("g").attr("transform",`translate(${i.left},${i.top})`),m=l.filter(((e,t)=>0===t||t===l.length-1||e%10===0));function y(e){const t=p.Qhc(e),a=.2126*t.r+.7152*t.g+.0722*t.b;return p.Qhc(a,a,a)}a&&g.append("g").selectAll("text.x-axis").data(m).enter().append("text").attr("class","x-axis").attr("x",(e=>h(e)+h.bandwidth()/2)).attr("y",c+25).style("text-anchor","middle").text((e=>e)),g.append("g").selectAll("line.x-axis-tick").data(m).enter().append("line").attr("x1",(e=>h(e)+h.bandwidth()/2)).attr("x2",(e=>h(e)+h.bandwidth()/2)).attr("y1",c).attr("y2",c+6).style("stroke","black"),g.append("g").selectAll("text.y-axis").data(o).enter().append("text").attr("class","y-axis").attr("x",-25).attr("y",(e=>v(e)+v.bandwidth()/1.25)).style("text-anchor","middle").text((e=>e)),g.selectAll(".heatmap-cell").data(e).enter().append("rect").attr("class","heatmap-cell").attr("x",(e=>h(e.year))).attr("y",(e=>v(e.month))).attr("width",h.bandwidth()).attr("height",v.bandwidth()).style("fill",(e=>{const t=f(e.value);return e.year<=2020?y(t):t})).style("opacity",0).transition().duration(500).style("opacity",1)}(0,n.wB)(d,(()=>{const e=w.value;v.value=e.length>0?e[0]:""})),(0,n.wB)([i,c,d],(async()=>{if(i.value.length&&c.value.length)for(const[e,a]of w.value.entries()){const r="mean"===d.value?"Mean Temp":"Max Temp",s=[...i.value.map((e=>({year:+e.year,month:e.month,value:parseFloat(e[r]),source:"historical"}))),...c.value.map((e=>({year:+e.year,month:e.month,value:parseFloat(e[a]),source:"projected"})))];await(0,n.dY)();const o=e===w.value.length-1;x(s,t[a],o)}}),{immediate:!0});let C=[];function E(){p.Ubm(".spark-overlay").each((function(){const e=p.Ltv(this),t=e.append("g").attr("class","spark-group"),a=M(t,e.node());C.push({svg:e,group:t,timer:a})}))}function F(){C.forEach((({group:e,timer:t})=>{t.stop(),e.remove()})),C=[]}function M(e,t){const{width:a,height:r}=t.getBoundingClientRect();function n(){const t=Math.random()*a,n=Math.random()*r,s=t+15*(Math.random()-.5),o=n+15*(Math.random()-.5),l=e.append("path").attr("d",`M${t},${n} L${s},${o}`).attr("stroke",Math.random()<.5?"#FFFF99":"#FFFFFF").attr("stroke-width",1+5*Math.random()).attr("stroke-dasharray","5 5").attr("stroke-dashoffset",5).attr("opacity",1);l.transition().duration(200).attr("stroke-dashoffset",0).attr("opacity",0).remove()}return p.O1W((()=>{for(let e=0;e<20;e++)Math.random()<.7&&n()}))}p.Ubm(".spark-overlay").each((function(){const e=p.Ltv(this),t=e.append("g").attr("class","spark-group");M(t,e.node())}));const S=(0,h.KR)([]);return(0,n.sV)((async()=>{try{const e=await p.fu7("./data/MeanMaxSurfaceAirTempuratureAndPrecipitation-1951-2020-Month.csv"),a=await p.fu7("./data/AverageMeanAndMaxSurfaceAirTemperatureAndPrecipitation-2020-2099-Month-FourScenarios.csv");i.value=e,c.value=a,u.value=Object.keys(a[0]||{});const r=d.value,s=u.value.filter((e=>"mean"===r?e.toLowerCase().includes("mean"):e.toLowerCase().includes("max")));v.value=s[0],S.value=Array(w.value.length).fill(!1);for(let n=0;n<w.value.length;n++){const e=w.value[n],a="mean"===d.value?"Mean Temp":"Max Temp",r=[...i.value.map((e=>({year:+e.year,month:e.month,value:parseFloat(e[a]),source:"historical"}))),...c.value.map((t=>({year:+t.year,month:t.month,value:parseFloat(t[e]),source:"projected"})))];x(r,t[e],e===w.value.at(-1))}l.value=new IntersectionObserver((e=>{const t=e[0];if(t.isIntersecting&&!f.value){f.value=!0,S.value=Array(w.value.length).fill(!1);for(let e=0;e<w.value.length;e++)setTimeout((()=>{S.value[e]=!0;const t=o.value,a=t.querySelectorAll(".cover-message");a[e]&&a[e].classList.add("sparked")}),250*e)}}),{threshold:.3});let h,m=setInterval((()=>{g.value=!g.value}),1e4);(0,n.xo)((()=>{clearInterval(m)}));const y=()=>{clearTimeout(h),h=setTimeout((()=>{for(const e of w.value){const a="mean"===d.value?"Mean Temp":"Max Temp",r=[...i.value.map((e=>({year:+e.year,month:e.month,value:parseFloat(e[a]),source:"historical"}))),...c.value.map((t=>({year:+t.year,month:t.month,value:parseFloat(t[e]),source:"projected"})))];x(r,t[e],e===w.value.at(-1))}}),1e3)};window.addEventListener("resize",y),(0,n.xo)((()=>{window.removeEventListener("resize",y)}))}catch(e){console.error("Error loading CSV data:",e)}o.value&&l.value&&l.value.observe(o.value),await(0,n.dY)(),setTimeout((()=>{p.Ubm(".spark-overlay").each((function(){const e=p.Ltv(this),t=e.append("g").attr("class","spark-group");M(t,e.node())}))}),100),l.value=new IntersectionObserver((([e])=>{m.value=e.isIntersecting}),{threshold:.1}),o.value&&l.value.observe(o.value)})),(0,n.wB)(y,(e=>{e?(0,n.dY)((()=>{const e=o.value,t=e.querySelectorAll(".cover-message");t.forEach((e=>{e.classList.add("sparked")})),E()})):F()})),(0,n.xo)((()=>{l.value&&o.value&&l.value.unobserve(o.value),window.removeEventListener("resize",x)})),(e,l)=>((0,n.uX)(),(0,n.CE)("div",{ref_key:"wrapperRef",ref:o,class:"temperature-wrapper unified-heatmap"},[(0,n.bo)((0,n.Lk)("div",O,l[4]||(l[4]=[(0,n.Lk)("h3",null,"Future Heat",-1)]),512),[[r.aG,m.value]]),(0,n.Lk)("div",D,[(0,n.Lk)("div",z,[(0,n.Lk)("div",$,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(b.value,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"legend-pair",key:t},[(0,n.Lk)("div",B,[(0,n.Lk)("div",{class:"legend-color",style:(0,s.Tr)({backgroundColor:e.color})},null,4),(0,n.Lk)("div",{class:"legend-color",style:(0,s.Tr)({backgroundColor:k.value[t]?.color||"#ccc"})},null,4)]),(0,n.Lk)("span",K,(0,s.v_)(e.label),1)])))),128))])]),(0,n.Lk)("div",P,[(0,n.Lk)("div",X,[(0,n.Lk)("div",N,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),value:"max"},null,512),[[r.XL,d.value]]),l[5]||(l[5]=(0,n.eW)(" Max "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),value:"mean"},null,512),[[r.XL,d.value]]),l[6]||(l[6]=(0,n.eW)(" Mean "))])]),(0,n.Lk)("div",V,[(0,n.Lk)("label",j,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=e=>y.value=e)},null,512),[[r.lH,y.value]]),l[7]||(l[7]=(0,n.Lk)("span",{class:"slider"},null,-1))]),(0,n.Lk)("span",H,(0,s.v_)(y.value?"Hide Covers":"Show Covers"),1)])])])]),(0,n.Lk)("div",G,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(w.value,((e,r)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:(0,s.C4)(["heatmap-block",{visible:S.value[r]}]),onMouseenter:t=>a.value=e,onMouseleave:l[3]||(l[3]=e=>a.value=null)},[(0,n.Lk)("div",U,[((0,n.uX)(),(0,n.CE)("svg",{ref_for:!0,ref:a=>t[e]=a,"data-last-heatmap":r===w.value.length-1},null,8,q)),(0,n.Lk)("div",{class:(0,s.C4)(["heatmap-cover",{hidden:a.value===e||!y.value}])},[l[8]||(l[8]=(0,n.Lk)("svg",{class:"spark-overlay"},null,-1)),(0,n.Lk)("div",Q,[(0,n.Lk)("div",J,[(0,n.Lk)("h4",null,(0,s.v_)(L(e).title),1),(0,n.Lk)("h5",null,(0,s.v_)(L(e).subtitle),1),(0,n.Lk)("h6",null,(0,s.v_)(L(e).soundBite),1)]),(0,n.Lk)("div",Z,[(0,n.Lk)("p",{innerHTML:L(e).message},null,8,ee)])])],2)])],42,Y)))),128))])],512))}};const ae=(0,M.A)(te,[["__scopeId","data-v-d7312068"]]);var re=ae;const ne={class:"sheep-cattle-herds",ref:"herdArea"},se={class:"background-canvas",ref:"noiseCanvas"},oe={class:"graphic-title",ref:"graphicTitle"},le={class:"herd-padding-wrapper"},ie={key:0,class:"title-row"},ce={key:1,class:"title-row"},ue={key:2},de={key:3},he={class:"herd-visual-area",ref:"herdVisual"},pe=["src"],ve={class:"countdown-container"},fe={class:"countdown-text"};function ge(e,t,r,o,l,i){return(0,n.uX)(),(0,n.CE)("div",ne,[(0,n.Lk)("canvas",se,null,512),(0,n.Lk)("div",oe,t[0]||(t[0]=[(0,n.Lk)("h3",null,"Pasture Panic",-1)]),512),(0,n.Lk)("div",le,[(0,n.Lk)("div",{class:(0,s.C4)(["herd-text",{visible:"initial"!==l.textStage}]),ref:"herdText"},["reducing"===l.textStage?((0,n.uX)(),(0,n.CE)("div",ie,t[1]||(t[1]=[(0,n.Lk)("h4",null,"2014",-1),(0,n.Lk)("h5",null,"The Grazeful Era",-1)]))):"complete"===l.textStage?((0,n.uX)(),(0,n.CE)("div",ce,t[2]||(t[2]=[(0,n.Lk)("h4",null,"2025",-1),(0,n.Lk)("h5",null,"Desperately Seeking Grass",-1)]))):(0,n.Q3)("",!0),"reducing"===l.textStage?((0,n.uX)(),(0,n.CE)("p",ue," Imagine a herd of sheep and cattle, grazing peacefully in the fields of Morocco. ")):"complete"===l.textStage?((0,n.uX)(),(0,n.CE)("div",de,t[3]||(t[3]=[(0,n.Lk)("p",null," According to official figures, Morocco's cattle and sheep herds have decreased by 38% in 2025 since the last census nine years ago, in 2014, due to consecutive droughts.",-1)]))):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",he,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.displayedHerd,(e=>((0,n.uX)(),(0,n.CE)("img",{key:e.id,src:a(4053)(`./${e.src}`),class:"herd-image",style:(0,s.Tr)(e.style)},null,12,pe)))),128))],512),(0,n.Lk)("div",{class:"background-overlay",style:(0,s.Tr)({backgroundColor:i.backgroundTransitionColor})},null,4),(0,n.Lk)("div",ve,[(0,n.Lk)("p",fe,(0,s.v_)(l.finalPercentage)+"%",1)])])],512)}a(3579);var me={data(){return{herd:[],displayedHerd:[],animalTypes:["black-speckle-cow.png","brown-cow.png","brown-ram.png","brown-sheep.png","brown-speckle-cow.png","gray-cow.png","white-ram-2.png","white-sheep-2.png"],observer:null,hasReduced:!1,textStage:"initial",finalPercentage:100}},mounted(){this.generateHerd(),this.setupIntersectionObserver(),this.$nextTick((()=>{this.drawBackgroundNoise()}))},watch:{textStage(){this.$nextTick((()=>{this.drawBackgroundNoise()}))}},beforeUnmount(){this.observer&&this.observer.disconnect()},computed:{backgroundTransitionColor(){const e=(100-this.finalPercentage)/38,t=Math.round(217+28*e),a=Math.round(240+0*e),r=Math.round(217+8*e);return`rgb(${t},${a},${r})`}},methods:{generateHerd(){let e=0;this.herd=[];const t=[13,13,13,13,12,12,12,12];this.animalTypes.forEach(((a,r)=>{for(let n=0;n<t[r];n++)this.herd.push({id:e++,src:a})})),this.$nextTick((()=>{setTimeout((()=>{this.placeAnimals()}),50)}))},placeAnimals(){const e=this.$refs.herdVisual,t=this.$refs.herdText,a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=this.$refs.graphicTitle,s=n.getBoundingClientRect(),o=a.width,l=a.height,i=100,c=5,u=i+c,d=r.left-a.left,h=r.top-a.top,p=s.left-a.left,v=s.top-a.top,f=[{left:d-10,top:h-10,right:d+r.width+10,bottom:h+r.height+10},{left:p-50,top:v-10,right:p+s.width+10,bottom:v+s.height+10}],g=Math.floor(o/u),m=Math.floor(l/u),y=[];for(let k=0;k<m;k++)for(let e=0;e<g;e++){const t=e*u+u/2,a=k*u+u/2,r=f.some((e=>t+i/2>e.left&&t-i/2<e.right&&a+i/2>e.top&&a-i/2<e.bottom));r||y.push({x:t,y:a})}for(let k=y.length-1;k>0;k--){const e=Math.floor(Math.random()*(k+1));[y[k],y[e]]=[y[e],y[k]]}const b=this.herd.map(((e,t)=>{const a=y[t];return{...e,style:{position:"absolute",left:a.x-i/4+"px",top:a.y-i/15+"px"}}}));this.displayedHerd=b},reduceHerd(){const e=Math.floor(.38*this.herd.length);let t=e;const a=setInterval((()=>{if(t<=0||this.displayedHerd.length<=0)return clearInterval(a),void(this.textStage="complete");this.displayedHerd.splice(Math.floor(Math.random()*this.displayedHerd.length),1),t--;const e=Math.round(this.displayedHerd.length/this.herd.length*100);this.finalPercentage=Math.max(e,62)}),250)},startCountdown(){const e=setInterval((()=>{this.finalPercentage>62?this.finalPercentage-=1:(this.finalPercentage=62,clearInterval(e))}),50)},drawBackgroundNoise(){const e=this.$refs.noiseCanvas,t=e.getContext("2d"),a=window.devicePixelRatio||1,r=this.$refs.herdArea.offsetWidth,n=this.$refs.herdArea.offsetHeight;e.width=r*a,e.height=n*a,e.style.width=`${r}px`,e.style.height=`${n}px`,t.scale(a,a);const s=this.textStage;console.log("Drawing background for stage:",s);const o="reducing"===s;e.style.backgroundColor=o?"#d9f0d9":"#f5f0e1";const l=1e4;for(let i=0;i<l;i++){const e=Math.random()*r,a=Math.random()*n,s=8+12*Math.random(),l=-Math.PI/2+.6*(Math.random()-.5),i=e+s*Math.cos(l),c=a+s*Math.sin(l);t.beginPath(),t.moveTo(e,a),t.lineTo(i,c),t.strokeStyle=o?`rgba(70, 120, 70, ${.02+.4*Math.random()})`:`rgba(139, 69, 19, ${.04+.3*Math.random()})`,t.lineWidth=1,t.stroke()}},resetAndAnimate(){this.hasReduced=!1,this.textStage="initial",this.finalPercentage=100,this.displayedHerd=[],this.generateHerd(),this.$nextTick((()=>{this.drawBackgroundNoise(),setTimeout((()=>{this.textStage="reducing",this.reduceHerd()}),1e3)}))},setupIntersectionObserver(){this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(this.resetAndAnimate(),this.hasReduced||(this.hasReduced=!0,this.textStage="reducing"))}))}),{threshold:.1}),this.observer.observe(this.$refs.herdArea)}}};const ye=(0,M.A)(me,[["render",ge],["__scopeId","data-v-15dc4615"]]);var be=ye;const ke={class:"phase-content"},we={class:"text-block row-block"},Le={class:"wheat-number"},xe={class:"wheat-field"},Ce={class:"wheat-grid wheat-grid-base"},Ee=["src"],Fe={class:"phase-content"},Me={class:"text-block row-block"},Se={class:"wheat-number"},Te={class:"land-number"},_e={class:"wheat-field"},Ie={class:"wheat-grid wheat-grid-69"},Re=["src"],Ae={class:"phase-content"},We={class:"text-block row-block"},Oe={class:"wheat-number"},De={class:"land-number"},ze={class:"wheat-field"},$e={class:"wheat-grid wheat-grid-41"},Be=["src"];function Ke(e,t,r,o,l,i){return(0,n.uX)(),(0,n.CE)("div",{ref:"container",class:"land-ploughed-wheat",style:(0,s.Tr)(l.backgroundStyle)},[(0,n.Lk)("div",{class:(0,s.C4)(["phase-pair phase-pair-base visible",{"fade-in":l.firstPhaseStarted}])},[(0,n.Lk)("div",ke,[t[3]||(t[3]=(0,n.Fv)('<div class="text-block column-block" data-v-0647c729><h4 class="base-title" data-v-0647c729>The Feast Before the Flame</h4><h5 class="subtitle subtitle-base" data-v-0647c729>Average wheat tonnage and hectares of land from 2014–2019</h5><h6 class="subtitle subtitle-base" data-v-0647c729>When rains were kind and wheat flowed freely.</h6><div class="phase-message phase-message-base" data-v-0647c729></div></div>',1)),(0,n.Lk)("div",we,[(0,n.Lk)("h4",Le,(0,s.v_)(l.shownWheatBase),1),t[0]||(t[0]=(0,n.Lk)("p",null,[(0,n.eW)("ten thousand "),(0,n.Lk)("br"),(0,n.eW)("tons of wheat")],-1)),t[1]||(t[1]=(0,n.Lk)("h4",{class:"land-number"},"299",-1)),t[2]||(t[2]=(0,n.Lk)("p",null,[(0,n.eW)("ten thousand "),(0,n.Lk)("br"),(0,n.eW)("hectares")],-1))])]),(0,n.Lk)("div",xe,[(0,n.Lk)("div",Ce,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.wheatBaseArray.slice(0,l.shownWheatBase),(e=>((0,n.uX)(),(0,n.CE)("img",{key:"base-"+e,src:a(1643),alt:"Wheat",style:(0,s.Tr)({width:l.imageSize+"px",height:"auto"})},null,12,Ee)))),128))]),t[4]||(t[4]=(0,n.Lk)("div",{class:"graphic-title"},[(0,n.Lk)("h3",null,"Wheat Drop")],-1))])],2),(0,n.Lk)("div",{class:(0,s.C4)(["phase-pair phase-pair-88",{"fade-in":l.firstPhaseStarted}])},[(0,n.Lk)("div",Fe,[t[7]||(t[7]=(0,n.Fv)('<div class="text-block column-block" data-v-0647c729><h4 class="title title-88" data-v-0647c729>Scorched Rhythm</h4><h5 class="subtitle subtitle-88" data-v-0647c729>2019 through 2024 average wheat tonnage and hectares of land</h5><h6 class="subtitle subtitle-88" data-v-0647c729>Drought tested our resolve, but the harvest held.</h6><div class="phase-message phase-message-88" data-v-0647c729></div></div>',1)),(0,n.Lk)("div",Me,[(0,n.Lk)("h4",Se,(0,s.v_)(l.shownWheat69),1),t[5]||(t[5]=(0,n.Lk)("p",null,[(0,n.eW)("ten thousand "),(0,n.Lk)("br"),(0,n.eW)("tons of wheat")],-1)),(0,n.Lk)("h4",Te,(0,s.v_)(l.landValue88),1),t[6]||(t[6]=(0,n.Lk)("p",null,[(0,n.eW)("ten thousand "),(0,n.Lk)("br"),(0,n.eW)("hectares")],-1))])]),(0,n.Lk)("div",_e,[(0,n.Lk)("div",Ie,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.wheat69Array.slice(0,l.shownWheat69),(e=>((0,n.uX)(),(0,n.CE)("img",{key:"69-"+e,src:a(6695),alt:"Wheat-69",style:(0,s.Tr)({width:l.imageSize+"px",height:"auto"})},null,12,Re)))),128))])]),t[8]||(t[8]=(0,n.Lk)("div",{class:"graphic-title"},[(0,n.Lk)("h3",null,"Wheat Drop")],-1))],2),(0,n.Lk)("div",{class:(0,s.C4)(["phase-pair phase-pair-74",{"fade-in":l.secondPhaseStarted}])},[(0,n.Lk)("div",Ae,[t[11]||(t[11]=(0,n.Fv)('<div class="text-block column-block" data-v-0647c729><h4 class="title title-74" data-v-0647c729>Echoes of a Vanished Spring</h4><h5 class="subtitle subtitle-74" data-v-0647c729>The wheat yield and land usage for 2025</h5><h6 class="subtitle subtitle-74" data-v-0647c729>A sudden drop — the fields rest, the future waits.</h6><div class="phase-message phase-message-74" data-v-0647c729></div></div>',1)),(0,n.Lk)("div",We,[(0,n.Lk)("h4",Oe,(0,s.v_)(l.shownWheat41),1),t[9]||(t[9]=(0,n.Lk)("p",null,[(0,n.eW)("ten thousand "),(0,n.Lk)("br"),(0,n.eW)("tons of wheat")],-1)),(0,n.Lk)("h4",De,(0,s.v_)(l.landValue74),1),t[10]||(t[10]=(0,n.Lk)("p",null,[(0,n.eW)("ten thousand "),(0,n.Lk)("br"),(0,n.eW)("hectares")],-1))])]),(0,n.Lk)("div",ze,[(0,n.Lk)("div",$e,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.wheat41Array.slice(0,l.shownWheat41),(e=>((0,n.uX)(),(0,n.CE)("img",{key:"41-"+e,src:a(5201),alt:"Wheat-41",style:(0,s.Tr)({width:l.imageSize+"px",height:"auto"})},null,12,Be)))),128))])]),t[12]||(t[12]=(0,n.Lk)("div",{class:"graphic-title graphic-title-41"},[(0,n.Lk)("h3",null,[(0,n.eW)("Wheat"),(0,n.Lk)("br"),(0,n.eW)("Drop")])],-1))],2)],4)}var Pe={data(){return{firstPhaseStarted:!1,secondPhaseStarted:!1,imageSize:70,wheatBaseCount:607,wheat69Count:420,wheat41Count:246,shownWheatBase:0,shownWheat69:0,shownWheat41:0,landValue88:299,landValue74:262,backgroundStyle:{backgroundColor:"#d9f0d9",transition:"background-color 1s ease"}}},computed:{wheatBaseArray(){return Array.from({length:this.wheatBaseCount},((e,t)=>t+1))},wheat69Array(){return Array.from({length:this.wheat69Count},((e,t)=>t+1))},wheat41Array(){return Array.from({length:this.wheat41Count},((e,t)=>t+1))}},beforeUnmount(){window.removeEventListener("resize",this.updateImageSize)},mounted(){this.updateImageSize(),window.addEventListener("resize",this.updateImageSize),this.logWheatCounts(),this.observeIntersection()},methods:{updateImageSize(){const e=window.innerWidth-200,t=window.innerHeight-200,a=this.wheatBaseCount,r=Math.ceil(Math.sqrt(a)),n=e/r,s=t/r;this.imageSize=Math.floor(Math.min(n,s,80))},observeIntersection(){const e=new IntersectionObserver((e=>{e[0].isIntersecting&&this.animateSections(),e[0].isIntersecting&&this.restartAnimations()}),{threshold:.5});e.observe(this.$refs.container)},animateSections(){setTimeout((()=>{this.backgroundStyle.backgroundColor="#f5f0e1",setTimeout((()=>{console.time("Wheat Base Growth"),this.incrementShownWheatBase((()=>{console.timeEnd("Wheat Base Growth"),setTimeout((()=>{this.firstPhaseStarted=!0,this.countDownLand88(),this.incrementShownWheat69((()=>{console.timeEnd("Wheat 69 Growth"),setTimeout((()=>{this.secondPhaseStarted=!0,this.countDownLand74(),this.incrementShownWheat41((()=>{console.timeEnd("Wheat 41 Growth")}))}),2e3)}))}),2e3)}))}),1e3)}),1e3)},restartAnimations(){this.shownWheatBase=0,this.shownWheat69=0,this.shownWheat41=0,this.firstPhaseStarted=!1,this.secondPhaseStarted=!1,this.backgroundStyle.backgroundColor="#d9f0d9",this.animateSections()},incrementShownWheatBase(e){const t=setInterval((()=>{this.shownWheatBase<this.wheatBaseCount?this.shownWheatBase++:(clearInterval(t),e&&e())}),5)},incrementShownWheat69(e){const t=setInterval((()=>{this.shownWheat69<this.wheat69Count?this.shownWheat69++:(clearInterval(t),e&&e())}),5)},incrementShownWheat41(e){const t=setInterval((()=>{this.shownWheat41<this.wheat41Count?this.shownWheat41++:(clearInterval(t),e&&e())}),5)},countDownLand88(){const e=262,t=setInterval((()=>{this.landValue88>e?this.landValue88--:clearInterval(t)}),20)},countDownLand74(){const e=220,t=setInterval((()=>{this.landValue74>e?this.landValue74--:clearInterval(t)}),20)},logWheatCounts(){console.log(`Base Wheat Count: ${this.wheatBaseCount} wheat-base.svg images in phase-pair-base`),console.log(`Wheat-69 Count: ${this.wheat69Count} wheat-69.svg images in phase-pair-88`),console.log(`Wheat-41 Count: ${this.wheat41Count} wheat-41.svg images in phase-pair-74`)}}};const Xe=(0,M.A)(Pe,[["render",Ke],["__scopeId","data-v-0647c729"]]);var Ne=Xe;const Ve={key:0,class:"main-title"},je={class:"content"},He={class:"map-container"},Ge={key:0,class:"filter-controls"},Ye={class:"radio-group"},Ue={class:"radio-group"},qe={class:"radio-group"},Qe={class:"radio-group"},Je={class:"legend-container"},Ze={class:"legend-colors"},et={key:1,class:"chart-container"},tt=40;var at={__name:"INFORMRiskIndex",setup(e){const t=(0,h.KR)(3),a=(0,h.KR)(null),o=(0,h.KR)([]),l=(0,h.KR)("alphabetical"),i=(0,h.KR)("inform_risk"),c=(0,h.KR)(window.innerWidth),u=(0,h.KR)([]),d=["#7FFF00","#FFFF00","#FF8000","#FF0000","#820747","#D3D3D3"];let f=[];const g={onEachFeature:(e,t)=>{t.on({click:a=>{m(a,e),t.bringToFront()}})}},m=(e,t)=>{const r=t.properties.SOVEREIGNT,n=u.value.findIndex((e=>e.properties.SOVEREIGNT===r));if(-1!==n)u.value.splice(n,1);else{if(u.value.length>=10)return void alert("You can only select up to 10 countries.");u.value.push(t)}a.value={...a.value},0===u.value.length?x(o.value):1===u.value.length?y(u.value.map((e=>e.properties))):F(u.value.map((e=>e.properties))),console.log("Selected countries:",u.value.map((e=>e.properties.SOVEREIGNT)))},y=e=>{p.Ltv("#INFORM-chart").selectAll("svg").remove(),e.forEach((e=>{C(e)}))},b=()=>{c.value=window.innerWidth,1===u.value.length?y(u.value.map((e=>e.properties))):u.value.length>1&&F(u.value.map((e=>e.properties)))},k=p.c3b().domain([0,2,4,6,8,10]).range(["white","#7FFF00","#FFFF00","#FF8000","#FF0000","#820747","#D3D3D3"]),w=e=>{const t=e.properties[i.value],a=u.value.some((t=>t.properties.SOVEREIGNT===e.properties.SOVEREIGNT));return{fillColor:null!==t&&void 0!==t?k(t):"#D3D3D3",weight:a?5:2,opacity:1,color:"#089c9d",fillOpacity:1}},L=async()=>{try{const e=await p.fu7("./data/INFORM_Risk_2025_v069_index.csv");f=e.map((e=>{let t={};for(const[a,r]of Object.entries(e)){const e=a.toLowerCase().replace(/\s+/g,"_").replace(/&/g,"and");t[e]=r}return t.inform_risk=+t.inform_risk,t.vulnerability=+t.vulnerability,t.hazard_and_exposure=+t.hazard_and_exposure,t.lack_of_coping_capacity=+t.lack_of_coping_capacity,t})),o.value=f;const t=await fetch("./data/country-boundaries.geojson"),r=await t.json();r.features.forEach((e=>{let t=f.find((t=>t.country===e.properties.SOVEREIGNT))||f.find((t=>t.iso3===e.properties.SOV_A3));t?(e.properties.inform_risk=t.inform_risk,e.properties.vulnerability=t.vulnerability,e.properties.hazard_and_exposure=t.hazard_and_exposure,e.properties.lack_of_coping_capacity=t.lack_of_coping_capacity):(e.properties.inform_risk=null,e.properties.vulnerability=null,e.properties.hazard_and_exposure=null,e.properties.lack_of_coping_capacity=null)})),a.value=r}catch(e){console.error("Error loading data:",e)}},x=e=>{p.Ltv("#INFORM-chart").select("svg").remove();const t={top:40,right:10,bottom:10,left:205},a=c.value/2*.8-t.left-t.right,r=tt,n=e.length*r+t.top+t.bottom;let s=[...e];"ascending"===l.value?s.sort(((e,t)=>e[i.value]-t[i.value])):"descending"===l.value?s.sort(((e,t)=>t[i.value]-e[i.value])):"alphabetical"===l.value&&s.sort(((e,t)=>e.country.localeCompare(t.country)));const o=p.Ltv("#INFORM-chart").append("svg").attr("width",a+t.left+t.right).attr("height",n).append("g").attr("transform",`translate(${t.left},${t.top})`),u=p.m4Y().domain([0,10]).nice().range([0,a]),d=p.WH().domain(s.map((e=>e.country))).range([0,n-t.top-t.bottom]).padding(.1),h=o.selectAll(".bar").data(s,(e=>e.country));h.enter().append("rect").attr("class","bar").attr("x",0).attr("y",(e=>d(e.country))).attr("height",d.bandwidth()).attr("fill",(e=>k(e[i.value]))).attr("width",0).transition().duration(1e3).ease(p.TD8).attr("width",(e=>u(e[i.value]))),h.enter().append("text").attr("class","bar-text").attr("x",(e=>u(e[i.value])+5)).attr("y",(e=>d(e.country)+d.bandwidth()/2)).attr("dy",".35em").text((e=>e[i.value].toFixed(1))).style("fill","#2c3e50"),h.transition().duration(1e3).ease(p.TD8).attr("y",(e=>d(e.country))).attr("width",(e=>u(e[i.value]))).attr("fill",(e=>k(e[i.value]))),h.select(".bar-text").transition().duration(1e3).ease(p.TD8).attr("x",(e=>u(e[i.value])+5)).text((e=>e[i.value].toFixed(2))),h.exit().transition().duration(500).attr("width",0).remove(),h.exit().select(".bar-text").transition().duration(500).attr("x",0).remove(),o.append("g").attr("class","x-axis").call(p.tlR(u)).selectAll("text").style("font-size","1rem").style("fill","#2c3e50"),o.append("g").attr("class","y-axis").call(p.V4s(d)).selectAll("text").style("font-size","1rem").style("fill","#2c3e50")},C=e=>{const t=p.Ltv("#INFORM-chart").append("div").attr("class","country-chart"),a={top:40,right:10,bottom:10,left:205},r=c.value/2*.8-a.left-a.right,n=tt,s=[{key:"inform_risk",label:"INFORM Risk"},{key:"vulnerability",label:"Vulnerability"},{key:"hazard_and_exposure",label:"Hazard & Exposure"},{key:"lack_of_coping_capacity",label:"Lack of\nCoping Capacity"}],o=s.map((t=>({label:t.label,value:+e[t.key],color:k(e[t.key])}))),l=o.length*n+a.top+a.bottom,i=p.m4Y().domain([0,10]).range([0,r]).nice(),u=p.WH().domain(o.map((e=>e.label))).range([0,l-a.top-a.bottom]).padding(.1),d=t.append("svg").attr("width",r+a.left+a.right).attr("height",l).append("g").attr("transform",`translate(${a.left},${a.top})`);d.selectAll(".bar").data(o).enter().append("rect").attr("class","bar").attr("y",(e=>u(e.label))).attr("x",0).attr("height",u.bandwidth()).attr("fill",(e=>e.color)).attr("width",0).transition().delay(500).duration(500).attr("width",(e=>i(e.value))),d.append("text").attr("x",(r+a.left+a.right)/2-a.left).attr("y",-10).attr("text-anchor","middle").text(e.SOVEREIGNT).attr("font-size","16px").attr("fill","#2c3e50").attr("font-weight","bold"),d.selectAll(".bar-text").data(o).enter().append("text").attr("class","bar-text").attr("x",(e=>i(e.value)+5)).attr("y",(e=>u(e.label)+u.bandwidth()/2)).attr("dy",".35em").text((e=>e.value.toFixed(1)));const h=p.tlR(i),v=d.append("g").attr("class","x-axis").call(h);v.selectAll("text").style("font-size","1rem").style("fill","#2c3e50"),v.selectAll(".tick").each((function(e){10!==e&&(p.Ltv(this).select("text").remove(),p.Ltv(this).select("line").remove())})),d.append("g").attr("class","y-axis").call(p.V4s(u)).selectAll(".tick text").each((function(){const e=p.Ltv(this),t=e.text();if(t.includes("\n")){const a=t.split("\n");e.text(null),a.forEach(((t,a)=>{e.append("tspan").text(t).attr("x",-10).attr("dy",0===a?"-0.25em":"1.1em")}))}})).style("font-size","1rem").style("fill","#2c3e50")},E=e=>e.replace(/\b(\w+)\s(?=of\b)/gi,"$1\n"),F=e=>{p.Ltv("#INFORM-chart").selectAll("svg").remove();const t=[{key:"inform_risk",label:"INFORM Risk"},{key:"vulnerability",label:"Vulnerability"},{key:"hazard_and_exposure",label:"Hazard & Exposure"},{key:"lack_of_coping_capacity",label:"Lack of Coping Capacity"}],a={top:40,right:10,bottom:10,left:205},r=c.value/2*.8-a.left-a.right,n=tt,s=e.length*n+a.top+a.bottom;t.forEach((({key:t,label:n})=>{const o=e.map((e=>({country:e.SOVEREIGNT,formattedCountry:E(e.SOVEREIGNT),value:+e[t],color:k(e[t])}))),l=p.m4Y().domain([0,10]).range([0,r]).nice(),i=p.WH().domain(o.map((e=>E(e.country)))).range([0,s-a.top-a.bottom]).padding(.1),c=p.Ltv("#INFORM-chart").append("svg").attr("width",r+a.left+a.right).attr("height",s).append("g").attr("transform",`translate(${a.left},${a.top})`);c.append("text").attr("x",(r+a.left+a.right)/2-a.left).attr("y",-10).attr("text-anchor","middle").text(n).attr("font-size","16px").attr("fill","#2c3e50").attr("font-weight","bold"),c.selectAll(".bar").data(o).enter().append("rect").attr("class","bar").attr("y",(e=>i(e.formattedCountry))).attr("height",i.bandwidth()).attr("x",0).attr("fill",(e=>e.color)).attr("width",0).transition().duration(800).attr("width",(e=>l(e.value))),c.selectAll(".bar-text").data(o).enter().append("text").attr("class","bar-text").attr("x",(e=>l(e.value)+5)).attr("y",(e=>i(e.formattedCountry)+i.bandwidth()/2)).attr("dy",".35em").text((e=>e.value.toFixed(1)));const u=p.tlR(l),d=c.append("g").attr("class","x-axis").call(u);d.selectAll("text").style("font-size","1rem").style("fill","#2c3e50"),d.selectAll(".tick").each((function(e){10!==e&&(p.Ltv(this).select("text").remove(),p.Ltv(this).select("line").remove())})),c.append("g").attr("class","y-axis").call(p.V4s(i)).selectAll(".tick text").each((function(){const e=p.Ltv(this),t=e.text();if(t.includes("\n")){const a=t.split("\n");e.text(null),a.forEach(((t,a)=>{e.append("tspan").text(t).attr("x",-10).attr("dy",0===a?"-0.25em":"1.1em")}))}})).style("font-size","1rem").style("fill","#2c3e50")}))};(0,n.wB)(i,(()=>{x(o.value),a.value&&(a.value.features.forEach((e=>{e.properties.fillColor=null!==e.properties[i.value]&&void 0!==e.properties[i.value]?k(e.properties[i.value]):"#D3D3D3"})),a.value={...a.value})})),(0,n.wB)(l,(()=>{x(o.value)})),(0,n.wB)(o,(e=>{e.length>0&&x(e)}));const M=(0,h.KR)(null),S=(0,h.KR)(!1);let T;(0,n.sV)((()=>{window.addEventListener("resize",b),T=new IntersectionObserver((([e])=>{S.value=e.isIntersecting,e.isIntersecting||(u.value=[],p.Ltv("#INFORM-chart").selectAll("*").remove())}),{root:null,threshold:.1},(e=>{e.forEach((e=>{e.isIntersecting||_()}))}),{threshold:0}),M.value&&T.observe(M.value),window.addEventListener("resize",b),L()})),(0,n.xo)((()=>{M.value&&T.unobserve(M.value),window.removeEventListener("resize",b)}));const _=()=>{u.value=[],a.value.features.forEach((e=>{e.properties.fillColor="#D3D3D3",e.properties.weight=1})),a.value={...a.value},o.value.length>0&&x(o.value)};return(e,o)=>((0,n.uX)(),(0,n.CE)("div",{class:"container",ref_key:"componentRoot",ref:M},[S.value?((0,n.uX)(),(0,n.CE)("h3",Ve,"Zooming Into Risk")):(0,n.Q3)("",!0),(0,n.Lk)("div",je,[(0,n.Lk)("div",He,[(0,n.bF)((0,h.R1)(v.Do),{ref:"map",zoom:t.value,"onUpdate:zoom":o[0]||(o[0]=e=>t.value=e),center:[20,0],"zoom-control":!1},{default:(0,n.k6)((()=>[(0,n.bF)((0,h.R1)(v.q7),{geojson:a.value,"options-style":w,options:g},{popup:(0,n.k6)((({feature:e})=>[(0,n.bF)((0,h.R1)(v.nA),null,{default:(0,n.k6)((()=>[(0,n.Lk)("strong",null,(0,s.v_)(e.properties.name),1),o[5]||(o[5]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" Risk Level: "+(0,s.v_)(e.properties[i.value.value]||"N/A"),1)])),_:2},1024)])),_:1},8,["geojson"])])),_:1},8,["zoom"])]),S.value?((0,n.uX)(),(0,n.CE)("div",Ge,[(0,n.Lk)("div",Ye,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),value:"inform_risk"},null,512),[[r.XL,i.value]]),o[6]||(o[6]=(0,n.eW)(" INFORM Risk Index "))]),o[7]||(o[7]=(0,n.Lk)("div",{class:"descriptor"},"A score that measures how likely a country is to face crises and how much help it might need, based on three factors: Hazards & Exposure, Vulnerability, and Lack of Coping Capacity.",-1))]),(0,n.Lk)("div",Ue,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),value:"hazard_and_exposure"},null,512),[[r.XL,i.value]]),o[8]||(o[8]=(0,n.eW)(" Hazard & Exposure "))]),o[9]||(o[9]=(0,n.Lk)("div",{class:"descriptor"},"How much danger a country faces from storms, floods, earthquakes, and other events. ",-1))]),(0,n.Lk)("div",qe,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[3]||(o[3]=e=>i.value=e),value:"vulnerability"},null,512),[[r.XL,i.value]]),o[10]||(o[10]=(0,n.eW)(" Vulnerability "))]),o[11]||(o[11]=(0,n.Lk)("div",{class:"descriptor"},"How badly people and places could be hurt when disasters happen.",-1))]),(0,n.Lk)("div",Qe,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[4]||(o[4]=e=>i.value=e),value:"lack_of_coping_capacity"},null,512),[[r.XL,i.value]]),o[12]||(o[12]=(0,n.eW)(" Lack of Coping Capacity "))]),o[13]||(o[13]=(0,n.Lk)("div",{class:"descriptor"},"How ready a country is to handle emergencies and help its people.",-1))])])):(0,n.Q3)("",!0),(0,n.Lk)("div",Je,[o[14]||(o[14]=(0,n.Lk)("div",{class:"legend-label"},"0",-1)),(0,n.Lk)("div",Ze,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.slice(0,5),((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"legend-color",style:(0,s.Tr)({backgroundColor:e})},null,4)))),128))]),o[15]||(o[15]=(0,n.Lk)("div",{class:"legend-label"},"10",-1)),(0,n.Lk)("div",{class:"legend-color no-data",style:(0,s.Tr)({backgroundColor:d[5]})},null,4),o[16]||(o[16]=(0,n.Lk)("div",{class:"legend-label"},"No Data",-1))]),S.value?(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",et,[(0,n.Lk)("button",{class:"reset-button",onClick:_},"X"),o[17]||(o[17]=(0,n.Lk)("div",{class:"column-info"},null,-1)),o[18]||(o[18]=(0,n.Lk)("div",{id:"INFORM-chart",class:"multi-chart-container"},null,-1))],512)),[[r.aG,u.value.length>0]]):(0,n.Q3)("",!0)])],512))}};const rt=(0,M.A)(at,[["__scopeId","data-v-341f4c17"]]);var nt=rt,st=a.p+"media/Coping-Mechanisms-Animation_Final.fa1f1ba1.mp4";const ot={class:"video-viewer"},lt={class:"video-caption"},it=.5,ct=1500;var ut={__name:"CopingMechanisms",setup(e){const t=(0,h.KR)(null),a=(0,h.KR)(null),r=(0,h.KR)(!1),o=(0,h.KR)(0);let l,i;const c={0:"Morocco is full of oases, mountains, and rivers, with skies that rain down to water the pastures and fields.",1:"Fields and pastures that are green and lush, with sheep and cattle grazing, and wheat growing.",2:"With a little digging, we can find water underground.",3:"Another well can be dug...",4:"...and even a dam can be built to store water.",5:"We can increase our crops and livestock.",6:"Our towns and cities can grow.",7:"This can affect our water table.",8:"Our oases can start to dry up, our skies get a little less rain, our mountains get a little less snow.",10:"We may add more wells...",11:"...and even more dams.",12:"This can affect our water table.",13:"Global warming can make our skies rain less, which means less snow in our mountains, less water in our rivers, our oases get smaller, and our land is affected too.",14:"This can affect the size of our livestock and the amount of crops we can grow.",15:"But our towns and cities can continue to grow.",16:"But we need more wells and to dig deeper.",17:"More dams and to build bigger ones.",18:"Which can lower our water table.",19:"Our oases can dry up, our skies rain less, our mountains get less snow, our pastures are drier.",20:"Our herds and fields are smaller.",21:"But our cities and towns can continue to grow.",22:"So we dig deeper wells.",23:"Our dams are bigger but reduced to a trickle.",24:"The water table is even lower.",25:"Herds and fields are even smaller, mountains are bare, rivers are drying, skies are dry.",26:"Water conservation is a must, in the cities and near the coast we can desalinate seawater.",27:"If we're not careful, our oases can dry up."},u=(0,n.EW)((()=>{const e=Object.keys(c).map(Number).sort(((e,t)=>t-e));for(const t of e)if(o.value>=t)return c[t];return""}));function d(){const e=t.value;e&&(clearTimeout(i),e.paused?e.play().then((()=>{e.playbackRate=it,r.value=!0})).catch((e=>{console.warn("Playback blocked:",e)})):(e.pause(),r.value=!1))}function p(){t.value&&(o.value=Math.floor(t.value.currentTime))}return(0,n.sV)((()=>{t.value&&t.value.addEventListener("timeupdate",p),l=new IntersectionObserver((([e])=>{const a=t.value;a&&(e.isIntersecting?i=setTimeout((()=>{a.play().then((()=>{a.playbackRate=it,r.value=!0})).catch((e=>{console.warn("Autoplay blocked on delay:",e)}))}),ct):(clearTimeout(i),a.pause(),r.value=!1))}),{threshold:.25}),a.value&&l.observe(a.value)})),(0,n.hi)((()=>{l&&a.value&&l.unobserve(a.value),t.value&&t.value.removeEventListener("timeupdate",p),clearTimeout(i)})),(e,o)=>((0,n.uX)(),(0,n.CE)("div",{class:"coping-container",ref_key:"containerRef",ref:a},[o[1]||(o[1]=(0,n.Lk)("h3",{class:"title"},"Climate Survival Kit",-1)),(0,n.Lk)("div",ot,[(0,n.Lk)("video",{ref_key:"copingVideo",ref:t,loop:"",muted:"",playsinline:"",class:"coping-video"},o[0]||(o[0]=[(0,n.Lk)("source",{src:st,type:"video/mp4"},null,-1),(0,n.eW)(" Your browser does not support the video tag. ")]),512),(0,n.Lk)("p",lt,(0,s.v_)(u.value),1),(0,n.Lk)("button",{class:"video-toggle",onClick:d},(0,s.v_)(r.value?"Pause":"Play"),1)])],512))}};const dt=(0,M.A)(ut,[["__scopeId","data-v-864d1292"]]);var ht=dt;const pt={class:"map-wrapper",ref:"mapWrapper"},vt={class:"map-container"},ft={key:0,class:"color-legend"},gt={key:1,class:"custom-slider"},mt={class:"slider-markers"},yt=["onClick"],bt={class:"label"},kt={key:2,class:"event-summary-types"},wt={class:"summary"},Lt={key:0};function xt(e,t,a,r,o,l){const i=(0,n.g2)("l-geo-json"),c=(0,n.g2)("l-map");return(0,n.uX)(),(0,n.CE)("div",pt,[(0,n.Lk)("div",vt,[t[1]||(t[1]=(0,n.Lk)("h3",{class:"title"},"Disaster Time Machine",-1)),(0,n.bF)(c,{ref:"map",zoom:o.zoom,"onUpdate:zoom":t[0]||(t[0]=e=>o.zoom=e),center:[20,0],"max-bounds":[[-60,-180],[85,180]]},{default:(0,n.k6)((()=>[o.geoJsonData?((0,n.uX)(),(0,n.Wv)(i,{geojson:o.geoJsonData,key:o.year,"options-style":l.getCountryStyle},null,8,["geojson","options-style"])):(0,n.Q3)("",!0)])),_:1},8,["zoom"])]),o.year?((0,n.uX)(),(0,n.CE)("div",ft,t[2]||(t[2]=[(0,n.Lk)("div",{class:"legend-label left"},"Few",-1),(0,n.Lk)("div",{class:"legend-gradient"},null,-1),(0,n.Lk)("div",{class:"legend-label right"},"Many",-1)]))):(0,n.Q3)("",!0),o.years.length&&o.isInView?((0,n.uX)(),(0,n.CE)("div",gt,[t[4]||(t[4]=(0,n.Lk)("div",{class:"slider-track"},null,-1)),(0,n.Lk)("div",mt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.years,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:(0,s.C4)(["slider-marker",{active:o.year===e}]),onClick:e=>{l.selectedIndex=a,l.stopYearLoop()}},[t[3]||(t[3]=(0,n.Lk)("div",{class:"circle"},null,-1)),(0,n.Lk)("div",bt,(0,s.v_)(e),1)],10,yt)))),128))])])):(0,n.Q3)("",!0),o.year?((0,n.uX)(),(0,n.CE)("div",kt,[(0,n.Lk)("div",wt,[(0,n.Lk)("h4",null,(0,s.v_)(o.year),1),(0,n.Lk)("h5",null,(0,s.v_)(l.totalEventsForSelectedYear)+" disasters",1)]),l.eventTypeBreakdownForSelectedYear.length?((0,n.uX)(),(0,n.CE)("div",Lt,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.eventTypeBreakdownForSelectedYear,(([e,t],a)=>((0,n.uX)(),(0,n.CE)("li",{key:a},[(0,n.eW)((0,s.v_)(e)+": ",1),(0,n.Lk)("strong",null,(0,s.v_)(t),1)])))),128))])])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)],512)}a(8237);var Ct={components:{LMap:v.Do,LGeoJson:v.q7},data(){return{looping:!0,yearLoopInterval:null,zoom:3,geoJsonData:null,disasterCounts:[],year:null,years:[],colorScale:()=>"transparent",isInView:!1}},computed:{selectedIndex:{get(){return this.years.indexOf(this.year)},set(e){this.year=this.years[e]}},totalEventsForSelectedYear(){const e=this.year;return this.disasterCounts.filter((t=>t.year===e)).reduce(((e,t)=>e+t.totalDisasters),0)},eventTypeBreakdownForSelectedYear(){const e=this.year,t={};return this.disasterCounts.filter((t=>t.year===e)).forEach((e=>{Object.entries(e).forEach((([e,a])=>{"year"!==e&&"country"!==e&&"iso"!==e&&"totalDisasters"!==e&&a>0&&(t[e]=(t[e]||0)+a)}))})),Object.entries(t).sort(((e,t)=>e[0].localeCompare(t[0])))}},watch:{year(e){const t=this.disasterCounts.filter((t=>t.year===e)).map((e=>e.totalDisasters)).filter((e=>e>0)),a=p.T9B(t)||1,r=p.ZrM("#E9D1D5","#821749"),n=p.m4Y().domain([1,a]).interpolate((()=>r));this.colorScale=e=>e&&0!==e?n(e):"transparent"}},methods:{getCountryStyle(e){const t=e.properties.SOVEREIGNT,a=this.disasterCounts.find((e=>e.year===this.year&&e.country===t)),r=a?a.totalDisasters:0;return{fillColor:this.colorScale(r),weight:2,opacity:1,color:"#089c9d",fillOpacity:1}},startYearLoop(){!this.yearLoopInterval&&this.years.length&&this.isInView&&(this.yearLoopInterval=setInterval((()=>{let e=(this.selectedIndex+1)%this.years.length;this.selectedIndex=e}),3e3))},stopYearLoop(){clearInterval(this.yearLoopInterval),this.yearLoopInterval=null},getTotalEventsByYear(){const e={};return this.disasterCounts.forEach((t=>{e[t.year]||(e[t.year]=0),e[t.year]+=t.totalDisasters})),e}},mounted(){fetch("./data/country-boundaries.geojson").then((e=>e.json())).then((e=>{const t={...e,features:e.features.filter((e=>"Antarctica"!==e.properties.SOVEREIGNT))};this.geoJsonData=t})).catch((e=>{console.error("Error loading GeoJSON file:",e)})),fetch("./data/EM-DAT-data-ALL.csv").then((e=>e.text())).then((e=>{const t=p.swJ(e),a=t.filter((e=>"Geophysical"!==e["Disaster Subgroup"]&&"Biological"!==e["Disaster Subgroup"])).map((e=>({year:e["DisNo."].substring(0,4),iso:e["ISO"],country:e["Country"],type:e["Disaster Type"]}))),r=p.zaV(a,(e=>{const t=p.zaV(e,(e=>e.length),(e=>e.type)),a=Array.from(t.values()).reduce(((e,t)=>e+t),0);return{iso:e[0].iso,totalDisasters:a,typeBreakdown:Object.fromEntries(t)}}),(e=>e.year),(e=>e.country)),n=[];r.forEach(((e,t)=>{e.forEach(((e,a)=>{n.push({year:t,country:a,iso:e.iso,totalDisasters:e.totalDisasters,...e.typeBreakdown})}))})),console.log("Flat Data:",n),this.disasterCounts=n;const s=Array.from(new Set(n.map((e=>e.year)))).sort();this.years=s,this.year=s[0];const o=this.getTotalEventsByYear();console.log("Total events by year:",o),this.startYearLoop()})).catch((e=>{console.error("Error loading CSV file:",e)}));const e=new IntersectionObserver((([e])=>{this.isInView=e.isIntersecting,this.isInView?this.startYearLoop():this.stopYearLoop()}),{threshold:.1});this.$refs.mapWrapper&&e.observe(this.$refs.mapWrapper)}};const Et=(0,M.A)(Ct,[["render",xt],["__scopeId","data-v-24cae49e"]]);var Ft=Et,Mt={name:"App",components:{HelloMorocco:T,RainfallPrecipitation:W,MeanTemperature:re,SheepCattleHerds:be,LandPloughedWheat:Ne,CopingMechanisms:ht,INFORMRiskIndex:nt,DoomedForever:Ft},computed:{visibleSteps(){return this.steps.slice(1)},visibleTitles(){return this.stepTitles.slice(1)}},data(){return{animationTriggered:!1,showMethodology:!1,steps:["HelloMorocco","INFORMRiskIndex","RainfallPrecipitation","MeanTemperature","SheepCattleHerds","LandPloughedWheat","CopingMechanisms","DoomedForever"],stepTitles:["Hello Morocco","Zooming Into Risk","Raincheck Forever","Future Heat","Pasture Panic","Wheat Drop","Climate Survival Kit","Disaster Time Machine"],activeStep:0}},mounted(){window.addEventListener("keydown",this.handleKeyPress),window.addEventListener("keydown",this.handleKeyPress)},beforeUnmount(){window.removeEventListener("keydown",this.handleKeyPress)},methods:{setActiveStep(e){e!==this.activeStep&&(this.activeStep=e)},getTabColor(e){const t=this.steps[e+1];switch(t){case"INFORMRiskIndex":return"#089d9d";case"RainfallPrecipitation":return"#40E0D0";case"MeanTemperature":return"#FF0000";case"SheepCattleHerds":return"#d4bb97";case"LandPloughedWheat":return"#B28F04";case"CopingMechanisms":return"#85B738";case"DoomedForever":return"#820747";default:return"#000"}},formatStepName(e){return e.replace(/([A-Z])/g," $1").trim()},handleKeyPress(e){"Space"===e.code&&e.preventDefault(),"ArrowDown"===e.code||"Space"===e.code?this.goToStep(this.activeStep+1):"ArrowUp"===e.code&&this.goToStep(this.activeStep-1)},goToStep(e){const t=document.querySelectorAll(".charts-wrapper");if(e<0||e>=t.length)return;const a=t[e];a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),this.activeStep=e)}},directives:{intersect:{mounted(e,t){const a=new IntersectionObserver((([e])=>{e.isIntersecting&&t.value()}),{rootMargin:"0px",threshold:.5});a.observe(e)}}}};const St=(0,M.A)(Mt,[["render",d]]);var Tt=St;(0,r.Ef)(Tt).mount("#app")},4967:function(e,t,a){"use strict";e.exports=a.p+"img/brown-sheep.0c6530ea.png"},5201:function(e,t,a){"use strict";e.exports=a.p+"img/wheat-41.9c78ff3c.svg"},6082:function(e,t,a){"use strict";e.exports=a.p+"img/brown-ram.04d83922.png"},6695:function(e,t,a){"use strict";e.exports=a.p+"img/wheat-69.ed3ebfdb.svg"},7045:function(e,t,a){"use strict";e.exports=a.p+"img/white-sheep-2.fa0394db.png"},8052:function(e,t,a){"use strict";e.exports=a.p+"img/black-speckle-cow.8ff3f588.png"},9139:function(e,t,a){"use strict";e.exports=a.p+"img/brown-cow.9ab74cdd.png"},9230:function(e,t,a){"use strict";e.exports=a.p+"img/wheat-title.10b7b0b8.svg"}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,s){if(!r){var o=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],s=e[u][2];for(var l=!0,i=0;i<r.length;i++)(!1&s||o>=s)&&Object.keys(a.O).every((function(e){return a.O[e](r[i])}))?r.splice(i--,1):(l=!1,s<o&&(o=s));if(l){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,n,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var s=Object.create(null);a.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){o[e]=function(){return r[e]}}));return o["default"]=function(){return r},a.d(s,o),s}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{24:"0ead91ae",71:"288da8dc",249:"2e656ac8",791:"72813729",886:"ad991733"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="lsq-thesis:";a.l=function(r,n,s,o){if(e[r])e[r].push(n);else{var l,i;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){l=d;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+s),l.src=r),e[r]=[n];var h=function(t,a){l.onerror=l.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/Thesis/"}(),function(){a.b=document.baseURI||self.location.href;var e={524:0};a.f.j=function(t,r){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise((function(a,r){n=e[t]=[a,r]}));r.push(n[2]=s);var o=a.p+a.u(t),l=new Error,i=function(r){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",l.name="ChunkLoadError",l.type=s,l.request=o,n[1](l)}};a.l(o,i,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,o=r[0],l=r[1],i=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(i)var u=i(a)}for(t&&t(r);c<o.length;c++)s=o[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},r=self["webpackChunklsq_thesis"]=self["webpackChunklsq_thesis"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(4887)}));r=a.O(r)})();
//# sourceMappingURL=app.f8417b27.js.map