(function(){var e={1643:function(e,t,a){"use strict";e.exports=a.p+"img/wheat-base.d3ce39ca.svg"},2150:function(e,t,a){"use strict";e.exports=a.p+"img/gray-cow.0cb4e967.png"},3617:function(e,t,a){"use strict";e.exports=a.p+"img/brown-speckle-cow.388dfae6.png"},4053:function(e,t,a){var r={"./black-speckle-cow.png":8052,"./brown-cow.png":9139,"./brown-ram.png":6082,"./brown-sheep.png":4967,"./brown-speckle-cow.png":3617,"./gray-cow.png":2150,"./white-ram-2.png":4084,"./white-sheep-2.png":7045};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=4053},4084:function(e,t,a){"use strict";e.exports=a.p+"img/white-ram-2.e8f59ca2.png"},4967:function(e,t,a){"use strict";e.exports=a.p+"img/brown-sheep.0c6530ea.png"},5201:function(e,t,a){"use strict";e.exports=a.p+"img/wheat-41.0f72563a.svg"},6065:function(e,t,a){"use strict";var r=a(5130),n=a(6768);const o={id:"scrollyteller"};function s(e,t,a,r,s,i){const l=(0,n.gN)("intersect");return(0,n.uX)(),(0,n.CE)("div",o,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.steps,((e,t)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:t,class:"charts-wrapper"},[((0,n.uX)(),(0,n.Wv)((0,n.$y)(e)))])),[[l,()=>i.setActiveStep(t)]]))),128)),t[0]||(t[0]=(0,n.Lk)("div",{class:"footer"},[(0,n.Lk)("p",null,[(0,n.eW)(" To check out other projects Lisa has created, visit "),(0,n.Lk)("a",{href:"https://lsq.design",target:"_blank",rel:"noopener"},"lsq.design"),(0,n.eW)(". ")])],-1))])}const i={class:"hello"};function l(e,t){return(0,n.uX)(),(0,n.CE)("div",i,t[0]||(t[0]=[(0,n.Fv)('<h1 class="droughts" data-v-55aef924>Droughts</h1><div class="floods-fires-line" data-v-55aef924><h1 class="floods" data-v-55aef924>Floods</h1><h2 class="rotated" data-v-55aef924>and</h2><h1 class="fires" data-v-55aef924>Fires</h1></div><h2 class="subtitle" data-v-55aef924>A Case Study of Morocco and Climate Change</h2><h3 class="byline" data-v-55aef924>Lisa Sakai Quinley</h3>',4)]))}var c=a(1241);const u={},d=(0,c.A)(u,[["render",l],["__scopeId","data-v-55aef924"]]);var p=d;const h={class:"morocco-map-container"};function v(e,t,a,r,o,s){const i=(0,n.g2)("l-tile-layer"),l=(0,n.g2)("l-map");return(0,n.uX)(),(0,n.CE)("div",h,[(0,n.bF)(l,{ref:"map",zoom:o.zoom,"onUpdate:zoom":t[0]||(t[0]=e=>o.zoom=e),center:[28.7917,-7.9926]},{default:(0,n.k6)((()=>[(0,n.bF)(i,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png","layer-type":"base",attribution:"OpenStreetMap | contributors: CartoDB",subdomains:"abcd"})])),_:1},8,["zoom"])])}a(8111),a(2489);var g=a(1614),f=a(4439),m={components:{LMap:g.Do,LTileLayer:g.a},data(){return{zoom:5}},mounted(){this.loadGeoJsonMap()},methods:{async loadGeoJsonMap(){try{const e=await f.fu7("./data/EM-DAT-data-ALL.csv"),t=e.filter((e=>"MAR"===e.ISO&&("Meteorological"===e["Disaster Subgroup"]||"Hydrological"===e["Disaster Subgroup"]))),a=f.zaV(t,(e=>e.length),(e=>e["Disaster Type"]),(e=>e["Disaster Subtype"]),(e=>e["Start Year"]));console.log("Rolled Up Data for MAR (Meteorological & Hydrological):",a)}catch(e){console.error("Error loading CSV:",e)}}}};const y=(0,c.A)(m,[["render",v]]);var b=y,k=(a(116),a(7588),a(1701),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(144));const w={class:"bar-chart-content"},x={class:"legend"};var L={__name:"RainfallPrecipitation",setup(e){const t=(0,k.KR)(null),a={},r={},o=(0,k.KR)([]),s=(0,k.KR)([]),i=(0,k.KR)([]),l=(0,n.EW)((()=>i.value.filter((e=>e.toLowerCase().includes("precipitation")&&e.includes("8.5")))));(0,n.sV)((()=>{t.value&&c.observe(t.value)}));const c=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(e.target.classList.add("in-view"),d()):e.target.classList.remove("in-view")}))}),{threshold:.5});function u(){const{innerWidth:e,innerHeight:t}=window;return t>e?5:10}function d(){const e=u();l.value.forEach((t=>{const r=o.value.map((e=>({year:+e.year,value:Math.round(parseFloat(e["Precipitation"])),source:"historical"}))).filter((e=>!isNaN(e.value))),n=s.value.filter((e=>2020!==+e.year)).map((e=>({year:+e.year,value:Math.round(parseFloat(e[t])),source:"projected"}))).filter((e=>!isNaN(e.value))),i=[...r,...n],l=g(i);v(l,a[t],t,e)}))}function p(e,t){const a=f.Ltv(t);a.selectAll("*").remove();const r=10,n=r,o=1.3*r,s={historical:"#089c9d",projected:"#40E0D0",regression:"url(#regressionGradient)"},i=f.AeT();i.moveTo(0,-o/2),i.bezierCurveTo(n/2,-o/2,n/2,o/4,0,o/2),i.bezierCurveTo(-n/2,o/4,-n/2,-o/2,0,-o/2);const l=["historical","projected","regression"];l.forEach(((t,r)=>{const n=20,o=20+25*r;"regression"===t?(a.append("line").attr("x1",n-5).attr("x2",n+15).attr("y1",o).attr("y2",o).attr("stroke","#5C4033").attr("stroke-width",2),a.append("text").attr("x",n+20).attr("y",o+5).attr("fill","#2c3e50").attr("font-size","1em").text("Downward Trend")):(a.append("path").attr("d",i.toString()).attr("transform",`translate(${n}, ${o}) scale(1, -1)`).attr("fill",s[t]),a.append("text").attr("x",n+15).attr("y",o+5).attr("fill","#2c3e50").attr("font-size","1em").text(`${"historical"===t?"Past":"Future"}: 1 raindrop = ${Math.round(e)} mm`))})),a.attr("width",250).attr("height",90)}function h(e,t){const a=f.i2o(e),r=f.i2o(t),n=f.czq(e.map(((e,n)=>(e-a)*(t[n]-r))))/f.czq(e.map((e=>(e-a)**2))),o=r-n*a;return{slope:n,intercept:o,predict:e=>o+n*e}}function v(e,t,a,n){if(!t||!e.length)return;const o=t.parentNode,s=o.getBoundingClientRect().width,i=o.getBoundingClientRect().height,c=f.Ltv(t).attr("width",s).attr("height",i).attr("viewBox",`0 0 ${s} ${i}`);c.selectAll("*").remove();const u={top:20,right:20,bottom:60,left:60},d=s-u.left-u.right,v=i-u.top-u.bottom,g=c.append("g").attr("transform",`translate(${u.left},${u.top})`),m=Array.from(new Set(e.map((e=>e.year)))).sort(((e,t)=>e-t)),y=f.WH().domain(m).range([0,d]).padding(.1),b=f.T9B(e,(e=>e.value)),k=f.m4Y().domain([0,b]).range([v,0]),w=f.UMr().domain(["historical","projected"]).range(["#089c9d","#40E0D0"]),x=h(e.map((e=>e.year)),e.map((e=>e.value))),L=f.n8j().x((e=>y(e.year)+y.bandwidth()/2)).y((e=>k(x.predict(e.year)))),C=[{year:f.jkA(e,(e=>e.year))},{year:f.T9B(e,(e=>e.year))}],M=c.append("defs"),_=M.append("linearGradient").attr("id","regressionGradient").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");_.append("stop").attr("offset","0%").attr("stop-color","#DEB887"),_.append("stop").attr("offset","100%").attr("stop-color","#5C4033");const S=g.append("path").datum(C).attr("fill","none").attr("stroke","url(#regressionGradient)").attr("stroke-width",2).attr("d",L),E=S.node().getTotalLength();S.attr("stroke-dasharray",`${E} ${E}`).attr("stroke-dashoffset",E).transition().duration(3e3).ease(f.TD8).attr("stroke-dashoffset",0),a===l.value[0]&&p(n,r[a]),e.forEach((e=>{const t=Math.floor(e.value/n),a=y(e.year)+y.bandwidth()/2,r=Math.min(y.bandwidth()/3,12);for(let o=0;o<t;o++){const t=n*(o+1),s=k(t),i=100*Math.random()+20,l=800*Math.random(),c=2.5*r,u=2*r,d=f.AeT();d.moveTo(0,-c/2),d.bezierCurveTo(u/2,-c/2,u/2,c/4,0,c/2),d.bezierCurveTo(-u/2,c/4,-u/2,-c/2,0,-c/2),g.append("path").attr("d",d.toString()).attr("transform",`translate(${a}, ${-i}) scale(1, -1)`).attr("fill",w(e.source)).transition().delay(l).duration(2e3).ease(f.JKS).attr("transform",`translate(${a}, ${s}) scale(1, -1)`)}}));const F=m.filter(((e,t,a)=>0===t||t===a.length-1||e%10===0));g.append("g").selectAll("text.x-axis").data(F).enter().append("text").attr("class","x-axis").attr("x",(e=>y(e)+y.bandwidth()/2)).attr("y",v+25).style("text-anchor","middle").text((e=>e)),g.append("g").selectAll("line.x-axis-tick").data(F).enter().append("line").attr("class","x-axis-tick").attr("x1",(e=>y(e)+y.bandwidth()/2)).attr("x2",(e=>y(e)+y.bandwidth()/2)).attr("y1",v).attr("y2",v+6).style("stroke","black").style("stroke-width",1),g.append("g").selectAll("text.y-axis").data(k.ticks(5).filter((e=>0!==e))).enter().append("text").attr("class","y-axis").attr("x",-40).attr("y",(e=>k(e)+5)).style("text-anchor","middle").text((e=>e.toFixed(0))),g.append("g").selectAll("line.y-axis-tick").data(k.ticks(5).filter((e=>0!==e))).enter().append("line").attr("class","y-axis-tick").attr("x1",-20).attr("x2",-10).attr("y1",(e=>k(e))).attr("y2",(e=>k(e))).style("stroke","black").style("stroke-width",1);const T=g.append("rect").attr("class","hover-bar").attr("width",y.bandwidth()).attr("fill-opacity",.7).style("display","none").attr("y",v).attr("height",0);g.selectAll(".hover-zone").data(e).enter().append("rect").attr("class","hover-zone").attr("x",(e=>y(e.year))).attr("y",0).attr("width",y.bandwidth()).attr("height",v).attr("fill","transparent").on("mouseover",(function(e,t){T.interrupt();const a=w(t.source);T.style("display","block").transition().duration(500).ease(f.TD8).attr("x",y(t.year)).attr("y",k(t.value)).attr("height",v-k(t.value)).attr("fill",a),g.selectAll(".bar-label").remove(),g.append("text").attr("class","bar-label").attr("x",y(t.year)+y.bandwidth()/2).attr("y",k(t.value)-10).attr("text-anchor","middle").attr("fill","#333").attr("opacity",0).text(`${Math.round(t.value)} mm`).transition().duration(500).attr("opacity",1)})).on("mouseout",(function(){T.interrupt(),T.transition().duration(500).ease(f.TD8).attr("y",v).attr("height",0).style("display","none"),g.selectAll(".bar-label").transition().duration(300).attr("opacity",0).remove()}))}function g(e){const t=f.i8y(e,(e=>f.czq(e,(e=>e.value))),(e=>e.year)).map((([t,a])=>({year:t,value:a,source:e.find((e=>e.year===t)).source})));return t}return(0,n.wB)([o,s],(async()=>{if(!o.value.length||!s.value.length)return;const e=u(),t="Precipitation";for(const r of l.value){const i=o.value.map((e=>({year:+e.year,value:Math.round(parseFloat(e[t])),source:"historical"}))).filter((e=>!isNaN(e.value))),l=s.value.filter((e=>2020!==+e.year)).map((e=>({year:+e.year,value:Math.round(parseFloat(e[r])),source:"projected"}))).filter((e=>!isNaN(e.value))),c=[...i,...l],u=g(c);await(0,n.dY)(),v(u,a[r],r,e)}})),(0,n.sV)((async()=>{try{const e=await f.fu7("./data/MeanMaxSurfaceAirTempuratureAndPrecipitation-1951-2020-Month.csv"),t=await f.fu7("./data/AverageMeanAndMaxSurfaceAirTemperatureAndPrecipitation-2020-2099-Month-FourScenarios.csv");o.value=e,s.value=t,i.value=Object.keys(t[0]||{})}catch(e){console.error("Error loading CSV data:",e)}})),(e,o)=>((0,n.uX)(),(0,n.CE)("div",{class:"precip-wrapper bar-chart",ref_key:"precipWrapperRef",ref:t},[o[0]||(o[0]=(0,n.Lk)("h3",null,"Raincheck Forever",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.value,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"bar-chart-block"},[(0,n.Lk)("div",w,[(0,n.Lk)("div",x,[((0,n.uX)(),(0,n.CE)("svg",{ref_for:!0,ref:t=>r[e]=t,height:"40"},null,512))]),((0,n.uX)(),(0,n.CE)("svg",{ref_for:!0,ref:t=>a[e]=t},null,512))])])))),128))],512))}};const C=(0,c.A)(L,[["__scopeId","data-v-947c2d8e"]]);var M=C,_=(a(4114),a(4232));const S={class:"control-container"},E={class:"left-controls"},F={class:"radio-buttons"},T={class:"overlay-toggle toggle-switch"},R={class:"switch"},A={class:"toggle-label"},I={class:"legend"},O={class:"legend-pairs"},z={class:"legend-color-pair"},$={class:"legend-label"},W={class:"heatmap-container"},D=["onMouseenter"],N={class:"heatmap-visual"},P=["data-last-heatmap"],j={class:"cover-message"},B={class:"cover-headings"},X={class:"cover-paragraph"},K=["innerHTML"];var V={__name:"MeanTemperature",setup(e){const t={},a=(0,k.KR)(null),o=(0,k.KR)(null),s=(0,k.KR)(null),i=(0,k.KR)([]),l=(0,k.KR)([]),c=(0,k.KR)([]),u=(0,k.KR)("max"),d=(0,k.KR)(""),p=(0,k.KR)(!1),h=(0,k.KR)(!1),v=(0,k.KR)(!0),g=(0,n.EW)((()=>{const e=[15,20,25,30,35],t=e.map((e=>Math.round(9*e/5+32))),a=h.value?[...t.map((e=>`${e}°F`)),`${Math.round(104)}°F+`]:[...e.map((e=>`${e}°C`)),"40°C+"],r=["#40E0D0","#7FFF00","#FFFF00","#FF8000","#FF0000","#820747"];return r.map(((e,t)=>({color:e,label:a[t]})))})),m=(0,n.EW)((()=>{const e=["#D3D3D3","#A9A9A9","#808080","#505050","#303030","#101010"],t=g.value.map((e=>e.label));return e.map(((e,a)=>({color:e,label:t[a]})))})),y=(0,n.EW)((()=>c.value.filter((e=>"mean"===u.value?e.toLowerCase().includes("mean"):e.toLowerCase().includes("max"))).reverse())),b=e=>e.includes("SSP1-2.6")?{title:"Kindling Spark",subtitle:"Best-Case Scenario",soundBite:"The fire’s just a flicker — we nearly snuffed it out.",message:"Aiming high on sustainability, this scenario sees the world making strong progress on cutting emissions, hitting net-zero after 2050. The result? Global warming is likely kept below 2°C by 2100. It’s the climate-friendly path."}:e.includes("SSP2-4.5")?{title:"Smoldering Path",subtitle:"Business-as-Usual Scenario",soundBite:"The coals still burn — slow heat, rising risk.",message:"This is the “do a little, but not too much” path. Emissions stay close to current levels until around mid-century, then slowly decline. Net-zero isn't reached until after 2100. It's a compromise route, with moderate climate action and moderate consequences."}:e.includes("SSP3-7.0")?{title:"Rising Blaze",subtitle:"Worsening Scenario",soundBite:"The flames are spreading — no one’s tending the line.",message:"In this future, the world is fragmented, with regional tensions and little cooperation. Emissions keep rising, nearly doubling by 2100. Climate action takes a back seat, leading to increasing global risks and instability."}:e.includes("SSP5-8.5")?{title:"Inferno Run",subtitle:"Worst-Case Scenario",soundBite:"The firestorm roars — and we lit the match.",message:"Fueled by fossil energy and tech innovation, this path prioritizes economic growth over sustainability. Emissions soar, and radiative forcing reaches the highest levels — it’s the “worst-case” outlook. It's the high-speed lane to extreme climate change."}:{title:"Unknown Flame",subtitle:e,soundBite:"Unknown path — map not available.",message:"Scenario description unavailable."};function w(e,t,a){if(!t||!e.length)return;const r=t.parentNode,n=r.getBoundingClientRect().width,o=r.getBoundingClientRect().height,s=Array.from(new Set(e.map((e=>e.month)))).reverse(),i=Array.from(new Set(e.map((e=>e.year)))),l={top:0,right:20,bottom:30,left:50},c=o-l.top-l.bottom,u=n-l.left-l.right,d=f.Ltv(t).attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${n} ${o}`);d.selectAll("*").remove();const p=f.WH().domain(i).range([0,u]).padding(.05),h=f.WH().domain(s).range([c,0]).padding(.05),v=f.c3b().domain([15,20,25,30,35]).range(["#40E0D0","#7FFF00","#FFFF00","#FF8000","#FF0000","#820747"]),g=d.append("g").attr("transform",`translate(${l.left},${l.top})`),m=i.filter(((e,t)=>0===t||t===i.length-1||e%10===0));function y(e){const t=f.Qhc(e),a=.2126*t.r+.7152*t.g+.0722*t.b;return f.Qhc(a,a,a)}a&&g.append("g").selectAll("text.x-axis").data(m).enter().append("text").attr("class","x-axis").attr("x",(e=>p(e)+p.bandwidth()/2)).attr("y",c+25).style("text-anchor","middle").text((e=>e)),g.append("g").selectAll("line.x-axis-tick").data(m).enter().append("line").attr("x1",(e=>p(e)+p.bandwidth()/2)).attr("x2",(e=>p(e)+p.bandwidth()/2)).attr("y1",c).attr("y2",c+6).style("stroke","black"),g.append("g").selectAll("text.y-axis").data(s).enter().append("text").attr("class","y-axis").attr("x",-25).attr("y",(e=>h(e)+h.bandwidth()/1.25)).style("text-anchor","middle").text((e=>e)),g.selectAll(".heatmap-cell").data(e).enter().append("rect").attr("class","heatmap-cell").attr("x",(e=>p(e.year))).attr("y",(e=>h(e.month))).attr("width",p.bandwidth()).attr("height",h.bandwidth()).style("fill",(e=>{const t=v(e.value);return e.year<=2020?y(t):t})).style("opacity",0).transition().duration(500).style("opacity",1)}(0,n.wB)(u,(()=>{const e=y.value;d.value=e.length>0?e[0]:""})),(0,n.wB)([i,l,u],(async()=>{if(i.value.length&&l.value.length)for(const[e,a]of y.value.entries()){const r="mean"===u.value?"Mean Temp":"Max Temp",o=[...i.value.map((e=>({year:+e.year,month:e.month,value:parseFloat(e[r]),source:"historical"}))),...l.value.map((e=>({year:+e.year,month:e.month,value:parseFloat(e[a]),source:"projected"})))];await(0,n.dY)();const s=e===y.value.length-1;w(o,t[a],s)}}),{immediate:!0});let x=[];function L(){f.Ubm(".spark-overlay").each((function(){const e=f.Ltv(this),t=e.append("g").attr("class","spark-group"),a=M(t,e.node());x.push({svg:e,group:t,timer:a})}))}function C(){x.forEach((({group:e,timer:t})=>{t.stop(),e.remove()})),x=[]}function M(e,t){const{width:a,height:r}=t.getBoundingClientRect();function n(){const t=Math.random()*a,n=Math.random()*r,o=t+15*(Math.random()-.5),s=n+15*(Math.random()-.5),i=e.append("path").attr("d",`M${t},${n} L${o},${s}`).attr("stroke",Math.random()<.5?"#FFFF99":"#FFFFFF").attr("stroke-width",1+5*Math.random()).attr("stroke-dasharray","5 5").attr("stroke-dashoffset",5).attr("opacity",1);i.transition().duration(200).attr("stroke-dashoffset",0).attr("opacity",0).remove()}return f.O1W((()=>{for(let e=0;e<20;e++)Math.random()<.7&&n()}))}f.Ubm(".spark-overlay").each((function(){const e=f.Ltv(this),t=e.append("g").attr("class","spark-group");M(t,e.node())}));const V=(0,k.KR)([]);return(0,n.sV)((async()=>{try{const e=await f.fu7("./data/MeanMaxSurfaceAirTempuratureAndPrecipitation-1951-2020-Month.csv"),a=await f.fu7("./data/AverageMeanAndMaxSurfaceAirTemperatureAndPrecipitation-2020-2099-Month-FourScenarios.csv");i.value=e,l.value=a,c.value=Object.keys(a[0]||{});const r=u.value,v=c.value.filter((e=>"mean"===r?e.toLowerCase().includes("mean"):e.toLowerCase().includes("max")));d.value=v[0],V.value=Array(y.value.length).fill(!1);for(let n=0;n<y.value.length;n++){const e=y.value[n],a="mean"===u.value?"Mean Temp":"Max Temp",r=[...i.value.map((e=>({year:+e.year,month:e.month,value:parseFloat(e[a]),source:"historical"}))),...l.value.map((t=>({year:+t.year,month:t.month,value:parseFloat(t[e]),source:"projected"})))];w(r,t[e],e===y.value.at(-1))}s.value=new IntersectionObserver((e=>{const t=e[0];if(t.isIntersecting&&!p.value){p.value=!0,V.value=Array(y.value.length).fill(!1);for(let e=0;e<y.value.length;e++)setTimeout((()=>{V.value[e]=!0;const t=o.value,a=t.querySelectorAll(".cover-message");a[e]&&a[e].classList.add("sparked")}),250*e)}}),{threshold:.3});let g,m=setInterval((()=>{h.value=!h.value}),1e4);(0,n.xo)((()=>{clearInterval(m)}));const b=()=>{clearTimeout(g),g=setTimeout((()=>{for(const e of y.value){const a="mean"===u.value?"Mean Temp":"Max Temp",r=[...i.value.map((e=>({year:+e.year,month:e.month,value:parseFloat(e[a]),source:"historical"}))),...l.value.map((t=>({year:+t.year,month:t.month,value:parseFloat(t[e]),source:"projected"})))];w(r,t[e],e===y.value.at(-1))}}),1e3)};window.addEventListener("resize",b),(0,n.xo)((()=>{window.removeEventListener("resize",b)}))}catch(e){console.error("Error loading CSV data:",e)}o.value&&s.value&&s.value.observe(o.value),await(0,n.dY)(),setTimeout((()=>{f.Ubm(".spark-overlay").each((function(){const e=f.Ltv(this),t=e.append("g").attr("class","spark-group");M(t,e.node())}))}),100)})),(0,n.wB)(v,(e=>{e?(0,n.dY)((()=>{const e=o.value,t=e.querySelectorAll(".cover-message");t.forEach((e=>{e.classList.add("sparked")})),L()})):C()})),(0,n.xo)((()=>{s.value&&o.value&&s.value.unobserve(o.value),window.removeEventListener("resize",w)})),(e,s)=>((0,n.uX)(),(0,n.CE)("div",{ref_key:"wrapperRef",ref:o,class:"temperature-wrapper unified-heatmap"},[s[8]||(s[8]=(0,n.Lk)("h3",null,"Burn, Baby, Burn.",-1)),(0,n.Lk)("div",S,[(0,n.Lk)("div",E,[(0,n.Lk)("div",F,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),value:"max"},null,512),[[r.XL,u.value]]),s[4]||(s[4]=(0,n.eW)(" Max "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":s[1]||(s[1]=e=>u.value=e),value:"mean"},null,512),[[r.XL,u.value]]),s[5]||(s[5]=(0,n.eW)(" Mean "))])]),(0,n.Lk)("div",T,[(0,n.Lk)("label",R,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=e=>v.value=e)},null,512),[[r.lH,v.value]]),s[6]||(s[6]=(0,n.Lk)("span",{class:"slider"},null,-1))]),(0,n.Lk)("span",A,(0,_.v_)(v.value?"Show Covers":"Hide Covers"),1)])]),(0,n.Lk)("div",I,[(0,n.Lk)("div",O,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(g.value,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"legend-pair",key:t},[(0,n.Lk)("div",z,[(0,n.Lk)("div",{class:"legend-color",style:(0,_.Tr)({backgroundColor:e.color})},null,4),(0,n.Lk)("div",{class:"legend-color",style:(0,_.Tr)({backgroundColor:m.value[t]?.color||"#ccc"})},null,4)]),(0,n.Lk)("span",$,(0,_.v_)(e.label),1)])))),128))])])]),(0,n.Lk)("div",W,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(y.value,((e,r)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:(0,_.C4)(["heatmap-block",{visible:V.value[r]}]),onMouseenter:t=>a.value=e,onMouseleave:s[3]||(s[3]=e=>a.value=null)},[(0,n.Lk)("div",N,[((0,n.uX)(),(0,n.CE)("svg",{ref_for:!0,ref:a=>t[e]=a,"data-last-heatmap":r===y.value.length-1},null,8,P)),(0,n.Lk)("div",{class:(0,_.C4)(["heatmap-cover",{hidden:a.value===e||!v.value}])},[s[7]||(s[7]=(0,n.Lk)("svg",{class:"spark-overlay"},null,-1)),(0,n.Lk)("div",j,[(0,n.Lk)("div",B,[(0,n.Lk)("h4",null,(0,_.v_)(b(e).title),1),(0,n.Lk)("h5",null,(0,_.v_)(b(e).subtitle),1),(0,n.Lk)("h6",null,(0,_.v_)(b(e).soundBite),1)]),(0,n.Lk)("div",X,[(0,n.Lk)("p",{innerHTML:b(e).message},null,8,K)])])],2)])],42,D)))),128))])],512))}};const H=(0,c.A)(V,[["__scopeId","data-v-1706ef68"]]);var U=H;const G={class:"sheep-cattle-herds",ref:"herdArea"},q={class:"background-canvas",ref:"noiseCanvas"},Y={class:"herd-padding-wrapper"},J={key:0},Q={key:1},Z={key:2},ee={key:3},te={class:"herd-visual-area",ref:"herdVisual"},ae=["src"],re={class:"countdown-container"},ne={class:"countdown-text"};function oe(e,t,r,o,s,i){return(0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("canvas",q,null,512),(0,n.Lk)("div",Y,[(0,n.Lk)("div",{class:(0,_.C4)(["herd-text",{visible:"initial"!==s.textStage}]),ref:"herdText"},["reducing"===s.textStage?((0,n.uX)(),(0,n.CE)("h3",J,"2014: The Grazeful Era")):"complete"===s.textStage?((0,n.uX)(),(0,n.CE)("h3",Q,"2025: Desperately Seeking Grass")):(0,n.Q3)("",!0),"reducing"===s.textStage?((0,n.uX)(),(0,n.CE)("p",Z," Imagine a herd of sheep and cattle, grazing peacefully in the fields of Morocco. ")):"complete"===s.textStage?((0,n.uX)(),(0,n.CE)("p",ee,t[0]||(t[0]=[(0,n.eW)(" According to official figures, Morocco's cattle and sheep herds have decreased by 38% in 2025 since the last census nine years ago, in 2014, due to consecutive droughts."),(0,n.Lk)("br",null,null,-1),(0,n.eW)(" And with Morocco in the sixth year of the drought, the Moroccan government has even asked its citizens not to slaughter sheep for the upcoming holiday Eid al-Adha. ")]))):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",te,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.displayedHerd,(e=>((0,n.uX)(),(0,n.CE)("img",{key:e.id,src:a(4053)(`./${e.src}`),class:"herd-image",style:(0,_.Tr)(e.style)},null,12,ae)))),128))],512),(0,n.Lk)("div",{class:"background-overlay",style:(0,_.Tr)({backgroundColor:i.backgroundTransitionColor})},null,4),(0,n.Lk)("div",re,[(0,n.Lk)("p",ne,(0,_.v_)(s.finalPercentage)+"%",1)])])],512)}var se={data(){return{herd:[],displayedHerd:[],animalTypes:["black-speckle-cow.png","brown-cow.png","brown-ram.png","brown-sheep.png","brown-speckle-cow.png","gray-cow.png","white-ram-2.png","white-sheep-2.png"],observer:null,hasReduced:!1,textStage:"initial",finalPercentage:100}},mounted(){this.generateHerd(),this.setupIntersectionObserver(),this.$nextTick((()=>{this.drawBackgroundNoise()}))},watch:{textStage(){this.$nextTick((()=>{this.drawBackgroundNoise()}))}},beforeUnmount(){this.observer&&this.observer.disconnect()},computed:{backgroundTransitionColor(){const e=(100-this.finalPercentage)/38,t=Math.round(217+28*e),a=Math.round(240+0*e),r=Math.round(217+8*e);return`rgb(${t},${a},${r})`}},methods:{generateHerd(){let e=0;this.herd=[];const t=[13,13,13,13,12,12,12,12];this.animalTypes.forEach(((a,r)=>{for(let n=0;n<t[r];n++)this.herd.push({id:e++,src:a})})),this.$nextTick((()=>{setTimeout((()=>{this.placeAnimals()}),50)}))},placeAnimals(){const e=this.$refs.herdVisual,t=this.$refs.herdText,a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=a.width,o=a.height,s=100,i=5,l=s+i,c=r.left-a.left,u=r.top-a.top,d={left:c-60,top:u-90,right:c+r.width+60,bottom:u+r.height+60},p=Math.floor(n/l),h=Math.floor(o/l),v=[];for(let f=0;f<h;f++)for(let e=0;e<p;e++){const t=e*l+l/2,a=f*l+l/2,r=t+s/2>d.left&&t-s/2<d.right&&a+s/2>d.top&&a-s/2<d.bottom;r||v.push({x:t,y:a})}for(let f=v.length-1;f>0;f--){const e=Math.floor(Math.random()*(f+1));[v[f],v[e]]=[v[e],v[f]]}const g=this.herd.map(((e,t)=>{const a=v[t];return{...e,style:{position:"absolute",left:a.x-s/2+"px",top:a.y-s/2+"px"}}}));this.displayedHerd=g},reduceHerd(){const e=Math.floor(.38*this.herd.length);let t=e;const a=setInterval((()=>{if(t<=0||this.displayedHerd.length<=0)return clearInterval(a),void(this.textStage="complete");this.displayedHerd.splice(Math.floor(Math.random()*this.displayedHerd.length),1),t--;const e=Math.round(this.displayedHerd.length/this.herd.length*100);this.finalPercentage=Math.max(e,62)}),100)},startCountdown(){const e=setInterval((()=>{this.finalPercentage>62?this.finalPercentage-=1:(this.finalPercentage=62,clearInterval(e))}),50)},drawBackgroundNoise(){const e=this.$refs.noiseCanvas,t=e.getContext("2d"),a=window.devicePixelRatio||1,r=this.$refs.herdArea.offsetWidth,n=this.$refs.herdArea.offsetHeight;e.width=r*a,e.height=n*a,e.style.width=`${r}px`,e.style.height=`${n}px`,t.scale(a,a);const o=this.textStage;console.log("Drawing background for stage:",o);const s="reducing"===o;e.style.backgroundColor=s?"#d9f0d9":"#f5f0e1";const i=1e4;for(let l=0;l<i;l++){const e=Math.random()*r,a=Math.random()*n,o=8+12*Math.random(),i=-Math.PI/2+.6*(Math.random()-.5),l=e+o*Math.cos(i),c=a+o*Math.sin(i);t.beginPath(),t.moveTo(e,a),t.lineTo(l,c),t.strokeStyle=s?`rgba(70, 120, 70, ${.02+.4*Math.random()})`:`rgba(139, 69, 19, ${.04+.3*Math.random()})`,t.lineWidth=1,t.stroke()}},setupIntersectionObserver(){this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&!this.hasReduced&&(this.hasReduced=!0,this.textStage="reducing",setTimeout((()=>{this.reduceHerd()}),2500))}))}),{threshold:.1}),this.observer.observe(this.$refs.herdArea)}}};const ie=(0,c.A)(se,[["render",oe],["__scopeId","data-v-8f16e4e2"]]);var le=ie;const ce={class:"wheat-field"},ue={class:"wheat-grid"},de=["src"],pe={class:"wheat-field"},he={class:"wheat-grid"},ve=["src"],ge={class:"wheat-field"},fe={class:"wheat-grid"},me=["src"];function ye(e,t,r,o,s,i){return(0,n.uX)(),(0,n.CE)("div",{ref:"container",class:"land-ploughed-wheat",style:(0,_.Tr)(s.backgroundStyle)},[(0,n.Lk)("div",{class:(0,_.C4)(["phase-pair phase-pair-base visible",{"fade-in":s.firstPhaseStarted}])},[t[0]||(t[0]=(0,n.Lk)("div",{class:"text-block"},[(0,n.Lk)("h3",{class:"base-title"},"The Feast Before the Flame"),(0,n.Lk)("h4",{class:"subtitle subtitle-base"},"2014–2019: When rains were kind and wheat flowed freely"),(0,n.Lk)("div",{class:"phase-message phase-message-base"},[(0,n.Lk)("p",null,"Almost 3,000 thousand hectares prepped — over 6 million tons ready to grow!")])],-1)),(0,n.Lk)("div",ce,[(0,n.Lk)("div",ue,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.wheatBaseCount,(e=>((0,n.uX)(),(0,n.CE)("img",{key:e,src:a(1643),alt:"Wheat",style:(0,_.Tr)({width:s.imageSize+"px",height:"auto"})},null,12,de)))),128))])])],2),(0,n.Lk)("div",{class:(0,_.C4)(["phase-pair phase-pair-88",{"fade-in":s.firstPhaseStarted}])},[t[1]||(t[1]=(0,n.Lk)("div",{class:"text-block"},[(0,n.Lk)("h3",{class:"title title-88"},"Scorched Rhythm"),(0,n.Lk)("h4",{class:"subtitle subtitle-88"},"2019–2024: Drought tested our resolve, but the harvest held"),(0,n.Lk)("div",{class:"phase-message phase-message-88"},[(0,n.Lk)("p",null,"We’re cutting back a bit — still growing strong with over 4 million tons of wheat on the way!")])],-1)),(0,n.Lk)("div",pe,[(0,n.Lk)("div",he,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.wheat69Count,(e=>((0,n.uX)(),(0,n.CE)("img",{key:e,src:a(6695),alt:"Wheat-69",style:(0,_.Tr)({width:s.imageSize+"px",height:"auto"})},null,12,ve)))),128))])])],2),(0,n.Lk)("div",{class:(0,_.C4)(["phase-pair phase-pair-74",{"fade-in":s.secondPhaseStarted}])},[t[2]||(t[2]=(0,n.Lk)("div",{class:"text-block"},[(0,n.Lk)("h3",{class:"title title-74"},"Echoes of a Vanished Spring"),(0,n.Lk)("h4",{class:"subtitle subtitle-74"},"2025: A sudden drop — the fields rest, the future waits"),(0,n.Lk)("div",{class:"phase-message phase-message-74"},[(0,n.Lk)("p",null,"Less land, fewer crops — but over 2 million tons still pushing through!")])],-1)),(0,n.Lk)("div",ge,[(0,n.Lk)("div",fe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.wheat41Count,(e=>((0,n.uX)(),(0,n.CE)("img",{key:e,src:a(5201),alt:"Wheat-41",style:(0,_.Tr)({width:s.imageSize+"px",height:"auto"})},null,12,me)))),128))])])],2)],4)}var be={data(){return{firstPhaseStarted:!1,secondPhaseStarted:!1,imageSize:80,wheatBaseCount:607,wheat69Count:420,wheat41Count:246,backgroundStyle:{backgroundColor:"#d9f0d9",transition:"background-color 1s ease"}}},beforeUnmount(){window.removeEventListener("resize",this.updateImageSize)},mounted(){this.updateImageSize(),window.addEventListener("resize",this.updateImageSize),this.logWheatCounts(),this.observeIntersection()},methods:{updateImageSize(){const e=window.innerWidth-200,t=window.innerHeight-200,a=this.wheatBaseCount,r=Math.ceil(Math.sqrt(a)),n=e/r,o=t/r;this.imageSize=Math.floor(Math.min(n,o,100))},observeIntersection(){const e=new IntersectionObserver((e=>{e[0].isIntersecting&&this.animateSections()}),{threshold:.5});e.observe(this.$refs.container)},animateSections(){setTimeout((()=>{this.backgroundStyle.backgroundColor="#f5f0e1",setTimeout((()=>{this.firstPhaseStarted=!0,setTimeout((()=>{this.secondPhaseStarted=!0}),3e3)}),1e3)}),3e3)},logWheatCounts(){console.log(`Base Wheat Count: ${this.wheatBaseCount} wheat-base.svg images in phase-pair-base`),console.log(`Wheat-69 Count: ${this.wheat69Count} wheat-69.svg images in phase-pair-88`),console.log(`Wheat-41 Count: ${this.wheat41Count} wheat-41.svg images in phase-pair-74`)}}};const ke=(0,c.A)(be,[["render",ye],["__scopeId","data-v-2f33e7ec"]]);var we=ke;const xe={class:"map-container"};function Le(e,t,a,r,o,s){const i=(0,n.g2)("l-tile-layer"),l=(0,n.g2)("l-geo-json"),c=(0,n.g2)("l-map");return(0,n.uX)(),(0,n.CE)("div",xe,[(0,n.bF)(c,{ref:"map",zoom:o.zoom,"onUpdate:zoom":t[0]||(t[0]=e=>o.zoom=e),center:[0,0]},{default:(0,n.k6)((()=>[(0,n.bF)(i,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png","layer-type":"base",attribution:"OpenStreetMap | contributors: CartoDB",subdomains:"abcd"}),(0,n.bF)(l,{geojson:o.geoJsonData},null,8,["geojson"])])),_:1},8,["zoom"])])}var Ce={components:{LMap:g.Do,LTileLayer:g.a,LGeoJson:g.q7},data(){return{zoom:2,geoJsonData:null}},mounted(){fetch("./data/country-boundaries.geojson").then((e=>e.json())).then((e=>{this.geoJsonData=e})).catch((e=>{console.error("Error loading GeoJSON file:",e)}))}};const Me=(0,c.A)(Ce,[["render",Le]]);var _e=Me;a(3579);const Se={key:0,class:"main-title"},Ee={class:"content"},Fe={class:"map-container"},Te={key:0,class:"filter-controls"},Re={key:1,class:"chart-container"},Ae={class:"column-info"};var Ie={__name:"INFORMRiskIndex",setup(e){const t=(0,k.KR)(3),a=(0,k.KR)(null),o=(0,k.KR)([]),s=(0,k.KR)("alphabetical"),i=(0,k.KR)("inform_risk"),l=(0,k.KR)(window.innerWidth),c=(0,k.KR)([]);let u=[];const d={onEachFeature:(e,t)=>{t.on({click:a=>{p(a,e),t.bringToFront()}})}},p=(e,t)=>{const r=t.properties.SOVEREIGNT,n=c.value.findIndex((e=>e.properties.SOVEREIGNT===r));if(-1!==n)c.value.splice(n,1);else{if(c.value.length>=10)return void alert("You can only select up to 10 countries.");c.value.push(t)}a.value={...a.value},0===c.value.length?w(o.value):1===c.value.length?h(c.value.map((e=>e.properties))):L(c.value.map((e=>e.properties))),console.log("Selected countries:",c.value.map((e=>e.properties.SOVEREIGNT)))},h=e=>{f.Ltv("#INFORM-chart").selectAll("svg").remove(),e.forEach((e=>{x(e)}))},v=()=>{l.value=window.innerWidth,1===c.value.length?h(c.value.map((e=>e.properties))):c.value.length>1&&L(c.value.map((e=>e.properties)))},m=f.c3b().domain([0,2,4,6,8,10]).range(["white","#7FFF00","#FFFF00","#FF8000","#FF0000","#820747","#D3D3D3"]),y=e=>{const t=e.properties[i.value],a=c.value.some((t=>t.properties.SOVEREIGNT===e.properties.SOVEREIGNT));return{fillColor:null!==t&&void 0!==t?m(t):"#D3D3D3",weight:a?5:1,opacity:1,color:"#089c9d",fillOpacity:1}},b=async()=>{try{const e=await f.fu7("./data/INFORM_Risk_2025_v069_index.csv");u=e.map((e=>{let t={};for(const[a,r]of Object.entries(e)){const e=a.toLowerCase().replace(/\s+/g,"_").replace(/&/g,"and");t[e]=r}return t.inform_risk=+t.inform_risk,t.vulnerability=+t.vulnerability,t.hazard_and_exposure=+t.hazard_and_exposure,t.lack_of_coping_capacity=+t.lack_of_coping_capacity,t})),o.value=u;const t=await fetch("./data/country-boundaries.geojson"),r=await t.json();r.features.forEach((e=>{let t=u.find((t=>t.country===e.properties.SOVEREIGNT))||u.find((t=>t.iso3===e.properties.SOV_A3));t?(e.properties.inform_risk=t.inform_risk,e.properties.vulnerability=t.vulnerability,e.properties.hazard_and_exposure=t.hazard_and_exposure,e.properties.lack_of_coping_capacity=t.lack_of_coping_capacity):(e.properties.inform_risk=null,e.properties.vulnerability=null,e.properties.hazard_and_exposure=null,e.properties.lack_of_coping_capacity=null)})),a.value=r}catch(e){console.error("Error loading data:",e)}},w=e=>{f.Ltv("#INFORM-chart").select("svg").remove();const t={top:40,right:30,bottom:40,left:195},a=l.value/2*.9-t.left-t.right,r=25,n=e.length*r+t.top+t.bottom;let o=[...e];"ascending"===s.value?o.sort(((e,t)=>e[i.value]-t[i.value])):"descending"===s.value?o.sort(((e,t)=>t[i.value]-e[i.value])):"alphabetical"===s.value&&o.sort(((e,t)=>e.country.localeCompare(t.country)));const c=f.Ltv("#INFORM-chart").append("svg").attr("width",a+t.left+t.right).attr("height",n).append("g").attr("transform",`translate(${t.left},${t.top})`),u=f.m4Y().domain([0,10]).nice().range([0,a]),d=f.WH().domain(o.map((e=>e.country))).range([0,n-t.top-t.bottom]).padding(.1),p=c.selectAll(".bar").data(o,(e=>e.country));p.enter().append("rect").attr("class","bar").attr("x",0).attr("y",(e=>d(e.country))).attr("height",d.bandwidth()).attr("fill",(e=>m(e[i.value]))).attr("width",0).transition().duration(1e3).ease(f.TD8).attr("width",(e=>u(e[i.value]))),p.enter().append("text").attr("class","bar-text").attr("x",(e=>u(e[i.value])+5)).attr("y",(e=>d(e.country)+d.bandwidth()/2)).attr("dy",".35em").text((e=>e[i.value].toFixed(1))).style("fill","#2c3e50").style("font-size","12px").style("font-weight","bold"),p.transition().duration(1e3).ease(f.TD8).attr("y",(e=>d(e.country))).attr("width",(e=>u(e[i.value]))).attr("fill",(e=>m(e[i.value]))),p.select(".bar-text").transition().duration(1e3).ease(f.TD8).attr("x",(e=>u(e[i.value])+5)).text((e=>e[i.value].toFixed(2))),p.exit().transition().duration(500).attr("width",0).remove(),p.exit().select(".bar-text").transition().duration(500).attr("x",0).remove(),c.append("g").attr("class","x-axis").call(f.tlR(u)),c.append("g").attr("class","y-axis").call(f.V4s(d))},x=e=>{const t=f.Ltv("#INFORM-chart").append("div").attr("class","country-chart"),a={top:27,right:30,bottom:5,left:155},r=l.value/2*.9-a.left-a.right,n=30,o=[{key:"inform_risk",label:"INFORM Risk"},{key:"vulnerability",label:"Vulnerability"},{key:"hazard_and_exposure",label:"Hazard & Exposure"},{key:"lack_of_coping_capacity",label:"Lack of Coping Capacity"}],s=o.map((t=>({label:t.label,value:+e[t.key],color:m(e[t.key])}))),i=s.length*n+a.top+a.bottom,c=f.m4Y().domain([0,10]).range([0,r]).nice(),u=f.WH().domain(s.map((e=>e.label))).range([0,i-a.top-a.bottom]).padding(.1),d=t.append("svg").attr("width",r+a.left+a.right).attr("height",i).append("g").attr("transform",`translate(${a.left},${a.top})`);d.selectAll(".bar").data(s).enter().append("rect").attr("class","bar").attr("y",(e=>u(e.label))).attr("x",0).attr("height",u.bandwidth()).attr("fill",(e=>e.color)).attr("width",0).transition().duration(1e3).attr("width",(e=>c(e.value))),d.selectAll(".bar-text").data(s).enter().append("text").attr("class","bar-text").attr("x",(e=>c(e.value)+5)).attr("y",(e=>u(e.label)+u.bandwidth()/2)).attr("dy",".35em").text((e=>e.value.toFixed(1))).style("fill","#2c3e50;").style("font-size","12px").style("font-weight","bold"),d.append("g").attr("class","x-axis").call(f.tlR(c)),d.append("g").attr("class","y-axis").call(f.V4s(u))},L=e=>{f.Ltv("#INFORM-chart").selectAll("svg").remove();const t=[{key:"inform_risk",label:"INFORM Risk"},{key:"vulnerability",label:"Vulnerability"},{key:"hazard_and_exposure",label:"Hazard & Exposure"},{key:"lack_of_coping_capacity",label:"Lack of Coping Capacity"}],a={top:60,right:30,bottom:15,left:195},r=l.value/2*.9-a.left-a.right,n=30,o=e.length*n+a.top+a.bottom;t.forEach((({key:t,label:n})=>{const s=e.map((e=>({country:e.SOVEREIGNT,value:+e[t],color:m(e[t])}))),i=f.m4Y().domain([0,10]).range([0,r]).nice(),l=f.WH().domain(s.map((e=>e.country))).range([0,o-a.top-a.bottom]).padding(.1),c=f.Ltv("#INFORM-chart").append("svg").attr("width",r+a.left+a.right).attr("height",o).append("g").attr("transform",`translate(${a.left},${a.top})`);c.append("text").attr("x",(r+a.left+a.right)/2-a.left).attr("y",-30).attr("text-anchor","middle").text(n).attr("font-size","16px").attr("fill","#2c3e50").attr("font-weight","bold"),c.selectAll(".bar").data(s).enter().append("rect").attr("class","bar").attr("y",(e=>l(e.country))).attr("height",l.bandwidth()).attr("x",0).attr("fill",(e=>e.color)).attr("width",0).transition().duration(800).attr("width",(e=>i(e.value))),c.selectAll(".bar-text").data(s).enter().append("text").attr("class","bar-text").attr("x",(e=>i(e.value)+5)).attr("y",(e=>l(e.country)+l.bandwidth()/2)).attr("dy",".35em").text((e=>e.value.toFixed(1))).style("fill","#2c3e50").style("font-size","12px").style("font-weight","bold"),c.append("g").attr("class","x-axis").call(f.tlR(i)),c.append("g").attr("class","y-axis").call(f.V4s(l))}))};(0,n.wB)(i,(()=>{w(o.value),a.value&&(a.value.features.forEach((e=>{e.properties.fillColor=null!==e.properties[i.value]&&void 0!==e.properties[i.value]?m(e.properties[i.value]):"#D3D3D3"})),a.value={...a.value})})),(0,n.wB)(s,(()=>{w(o.value)})),(0,n.wB)(o,(e=>{e.length>0&&w(e)}));const C=(0,k.KR)(null),M=(0,k.KR)(!1);let S;return(0,n.sV)((()=>{window.addEventListener("resize",v),S=new IntersectionObserver((([e])=>{M.value=e.isIntersecting,e.isIntersecting||(c.value=[],f.Ltv("#INFORM-chart").selectAll("*").remove())}),{root:null,threshold:.1}),C.value&&S.observe(C.value),window.addEventListener("resize",v),b()})),(0,n.xo)((()=>{C.value&&S.unobserve(C.value),window.removeEventListener("resize",v)})),(e,o)=>((0,n.uX)(),(0,n.CE)("div",{class:"container",ref_key:"componentRoot",ref:C},[M.value?((0,n.uX)(),(0,n.CE)("h3",Se,"On the Global Map - INFORM Risk")):(0,n.Q3)("",!0),(0,n.Lk)("div",Ee,[(0,n.Lk)("div",Fe,[(0,n.bF)((0,k.R1)(g.Do),{ref:"map",zoom:t.value,"onUpdate:zoom":o[0]||(o[0]=e=>t.value=e),center:[20,0],"zoom-control":!1},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.q7),{geojson:a.value,"options-style":y,options:d},{popup:(0,n.k6)((({feature:e})=>[(0,n.bF)((0,k.R1)(g.nA),null,{default:(0,n.k6)((()=>[(0,n.Lk)("strong",null,(0,_.v_)(e.properties.name),1),o[5]||(o[5]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" Risk Level: "+(0,_.v_)(e.properties[i.value.value]||"N/A"),1)])),_:2},1024)])),_:1},8,["geojson"])])),_:1},8,["zoom"])]),M.value?((0,n.uX)(),(0,n.CE)("div",Te,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[1]||(o[1]=e=>i.value=e),value:"inform_risk"},null,512),[[r.XL,i.value]]),o[6]||(o[6]=(0,n.eW)(" INFORM Risk Index "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),value:"hazard_and_exposure"},null,512),[[r.XL,i.value]]),o[7]||(o[7]=(0,n.eW)(" Hazard & Exposure "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[3]||(o[3]=e=>i.value=e),value:"vulnerability"},null,512),[[r.XL,i.value]]),o[8]||(o[8]=(0,n.eW)(" Vulnerability "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":o[4]||(o[4]=e=>i.value=e),value:"lack_of_coping_capacity"},null,512),[[r.XL,i.value]]),o[9]||(o[9]=(0,n.eW)(" Lack of Coping Capacity "))])])):(0,n.Q3)("",!0),M.value?(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",Re,[(0,n.Lk)("div",Ae,[(0,n.Lk)("h4",null,(0,_.v_)(1===c.value.length?c.value[0].properties.SOVEREIGNT:""),1)]),o[10]||(o[10]=(0,n.Lk)("div",{id:"INFORM-chart",class:"multi-chart-container"},null,-1))],512)),[[r.aG,c.value.length>0]]):(0,n.Q3)("",!0)])],512))}};const Oe=(0,c.A)(Ie,[["__scopeId","data-v-de9fe7aa"]]);var ze=Oe;const $e={class:"coping-container"};function We(e,t){return(0,n.uX)(),(0,n.CE)("div",$e,t[0]||(t[0]=[(0,n.Lk)("h3",null,"Coping Mechanisms",-1),(0,n.Lk)("div",{class:"coping-mechanisms"},[(0,n.Lk)("h4",null,"Dams: Water Storage"),(0,n.Lk)("h4",null,"Wells"),(0,n.Lk)("h4",null,"Traditional water management"),(0,n.Lk)("h4",null,"Desalination"),(0,n.Lk)("h4",null,"Other Methods: Water Conservation")],-1)]))}const De={},Ne=(0,c.A)(De,[["render",We],["__scopeId","data-v-0ca485f6"]]);var Pe=Ne,je={name:"App",components:{HelloMorocco:p,MoroccoMapView:b,RainfallPrecipitation:M,MeanTemperature:U,SheepCattleHerds:le,LandPloughedWheat:we,CopingMechanisms:Pe,WorldMapViewTimeline:_e,INFORMRiskIndex:ze},data(){return{steps:["HelloMorocco","INFORMRiskIndex","RainfallPrecipitation","MeanTemperature","SheepCattleHerds","LandPloughedWheat","CopingMechanisms","MoroccoMapView","WorldMapViewTimeline"],activeStep:0}},mounted(){window.addEventListener("keydown",this.handleKeyPress)},beforeUnmount(){window.removeEventListener("keydown",this.handleKeyPress)},methods:{setActiveStep(e){e!==this.activeStep&&(this.activeStep=e)},handleKeyPress(e){"Space"===e.code&&e.preventDefault(),"ArrowDown"===e.code||"Space"===e.code?this.goToStep(this.activeStep+1):"ArrowUp"===e.code&&this.goToStep(this.activeStep-1)},goToStep(e){const t=document.querySelectorAll(".charts-wrapper");if(e<0||e>=t.length)return;const a=t[e];a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),this.activeStep=e)}},directives:{intersect:{mounted(e,t){const a=new IntersectionObserver((([e])=>{e.isIntersecting&&t.value()}),{rootMargin:"0px",threshold:.5});a.observe(e)}}}};const Be=(0,c.A)(je,[["render",s]]);var Xe=Be;(0,r.Ef)(Xe).mount("#app")},6082:function(e,t,a){"use strict";e.exports=a.p+"img/brown-ram.04d83922.png"},6695:function(e,t,a){"use strict";e.exports=a.p+"img/wheat-69.71d07910.svg"},7045:function(e,t,a){"use strict";e.exports=a.p+"img/white-sheep-2.fa0394db.png"},8052:function(e,t,a){"use strict";e.exports=a.p+"img/black-speckle-cow.8ff3f588.png"},9139:function(e,t,a){"use strict";e.exports=a.p+"img/brown-cow.9ab74cdd.png"}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,o){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],o=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<s&&(s=o));if(i){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var o=Object.create(null);a.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&n&&r;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){s[e]=function(){return r[e]}}));return s["default"]=function(){return r},a.d(o,s),o}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{24:"0ead91ae",71:"288da8dc",249:"2e656ac8",791:"72813729",886:"ad991733"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="lsq-thesis:";a.l=function(r,n,o,s){if(e[r])e[r].push(n);else{var i,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+o),i.src=r),e[r]=[n];var p=function(t,a){i.onerror=i.onload=null,clearTimeout(h);var n=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(a)})),t)return t(a)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/Thesis/"}(),function(){var e={524:0};a.f.j=function(t,r){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(a,r){n=e[t]=[a,r]}));r.push(n[2]=o);var s=a.p+a.u(t),i=new Error,l=function(r){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,n[1](i)}};a.l(s,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,s=r[0],i=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var u=l(a)}for(t&&t(r);c<s.length;c++)o=s[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},r=self["webpackChunklsq_thesis"]=self["webpackChunklsq_thesis"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(6065)}));r=a.O(r)})();
//# sourceMappingURL=app.7a18520d.js.map