{"version":3,"file":"js/app.0e828c69.js","mappings":"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","sources":["webpack://lsq-thesis/./src/App.vue","webpack://lsq-thesis/./src/components/HelloMorocco.vue","webpack://lsq-thesis/./src/components/HelloMorocco.vue?30b9","webpack://lsq-thesis/./src/components/RainfallPrecipitation.vue","webpack://lsq-thesis/./src/components/RainfallPrecipitation.vue?0aa0","webpack://lsq-thesis/./src/components/MeanTemperature.vue","webpack://lsq-thesis/./src/components/MeanTemperature.vue?2d91","webpack://lsq-thesis/./src/components/SheepCattleHerds.vue","webpack://lsq-thesis/./src/components/SheepCattleHerds.vue?c44f","webpack://lsq-thesis/./src/components/LandPloughedWheat.vue","webpack://lsq-thesis/./src/components/LandPloughedWheat.vue?4d77","webpack://lsq-thesis/./src/components/INFORMRiskIndex.vue","webpack://lsq-thesis/./src/components/INFORMRiskIndex.vue?9261","webpack://lsq-thesis/./src/components/CopingMechanisms.vue","webpack://lsq-thesis/./src/components/CopingMechanisms.vue?b260","webpack://lsq-thesis/./src/components/DoomedForever.vue","webpack://lsq-thesis/./src/components/DoomedForever.vue?f6ad","webpack://lsq-thesis/./src/App.vue?7ccd","webpack://lsq-thesis/./src/main.js","webpack://lsq-thesis/./src/assets/herds/ sync ^\\.\\/.*$","webpack://lsq-thesis/webpack/bootstrap","webpack://lsq-thesis/webpack/runtime/chunk loaded","webpack://lsq-thesis/webpack/runtime/compat get default export","webpack://lsq-thesis/webpack/runtime/create fake namespace object","webpack://lsq-thesis/webpack/runtime/define property getters","webpack://lsq-thesis/webpack/runtime/ensure chunk","webpack://lsq-thesis/webpack/runtime/get javascript chunk filename","webpack://lsq-thesis/webpack/runtime/get mini-css chunk filename","webpack://lsq-thesis/webpack/runtime/global","webpack://lsq-thesis/webpack/runtime/hasOwnProperty shorthand","webpack://lsq-thesis/webpack/runtime/load script","webpack://lsq-thesis/webpack/runtime/make namespace object","webpack://lsq-thesis/webpack/runtime/publicPath","webpack://lsq-thesis/webpack/runtime/jsonp chunk loading","webpack://lsq-thesis/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"scrollyteller\">\n    <div class=\"left-tab-container\">\n      <div v-for=\"(title, i) in visibleTitles\" :key=\"i\" :class=\"['tab', { active: i + 1 === activeStep }]\"\n        :style=\"i + 1 === activeStep ? { color: getTabColor(i), borderLeftColor: getTabColor(i) } : {}\"\n        @click=\"goToStep(i + 1)\">\n        {{ title }}\n      </div>\n    </div>\n    <div v-for=\"(stepComponent, index) in steps\" :key=\"index\" class=\"charts-wrapper\"\n      v-intersect=\"() => setActiveStep(index)\">\n      <component :is=\"stepComponent\" />\n    </div>\n\n    <div class=\"right-tab-container\">\n      <div class=\"tab\" :class=\"{ active: showMethodology }\" @click=\"showMethodology = !showMethodology\">\n        Methodology\n      </div>\n\n      <a class=\"tab\" href=\"https://lsq.design\" target=\"_blank\" rel=\"noopener\">lsq.design</a>\n    </div>\n\n    <!-- Methodology Panel -->\n    <div v-if=\"showMethodology\" class=\"methodology-panel\">\n      <h5>Methodology</h5>\n      <h6>Zooming Into Risk</h6>\n      <p>This section describes the methodology behind the visualizations...</p>\n      <h6>Raincheck Forever</h6>\n      <p>You can include multiple <code>&lt;h&gt;</code> and <code>&lt;p&gt;</code> tags here.</p>\n      <h6>Future Heat</h6>\n      <p>This section describes the methodology behind the visualizations...</p>\n      <h6>Pasture Panic</h6>\n      <p>You can include multiple <code>&lt;h&gt;</code> and <code>&lt;p&gt;</code> tags here.</p>\n      <h6>Wheat Drop</h6>\n      <p>This section describes the methodology behind the visualizations...</p>\n      <h6>Climate Survival Kit</h6>\n      <p>You can include multiple <code>&lt;h&gt;</code> and <code>&lt;p&gt;</code> tags here.</p>\n      <h6>Disaster Time Machine</h6>\n      <p>You can include multiple <code>&lt;h&gt;</code> and <code>&lt;p&gt;</code> tags here.</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HelloMorocco from './components/HelloMorocco.vue'\nimport RainfallPrecipitation from './components/RainfallPrecipitation.vue'\nimport MeanTemperature from './components/MeanTemperature.vue'\nimport SheepCattleHerds from './components/SheepCattleHerds.vue'\nimport LandPloughedWheat from './components/LandPloughedWheat.vue'\nimport INFORMRiskIndex from './components/INFORMRiskIndex.vue'\nimport CopingMechanisms from './components/CopingMechanisms.vue'\nimport DoomedForever from './components/DoomedForever.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    HelloMorocco,\n    RainfallPrecipitation,\n    MeanTemperature,\n    SheepCattleHerds,\n    LandPloughedWheat,\n    CopingMechanisms,\n    INFORMRiskIndex,\n    DoomedForever,\n  },\n  computed: {\n    visibleSteps() {\n      return this.steps.slice(1)\n      /* return this.steps.slice(1, -1) */\n    },\n    visibleTitles() {\n      return this.stepTitles.slice(1)\n      /* return this.stepTitles.slice(1, -1) */\n    },\n  },\n  data() {\n    return {\n      showMethodology: false,\n      steps: [\n        'HelloMorocco',\n        'INFORMRiskIndex',\n        'RainfallPrecipitation',\n        'MeanTemperature',\n        'SheepCattleHerds',\n        'LandPloughedWheat',\n        'CopingMechanisms',\n        'DoomedForever',\n      ],\n      stepTitles: [\n        'Hello Morocco',\n        'Zooming Into Risk',\n        'Raincheck Forever',\n        'Future Heat',\n        'Pasture Panic',\n        'Wheat Drop',\n        'Climate Survival Kit',\n        'Disaster Time Machine',\n      ],\n      activeStep: 0,\n    }\n  },\n  mounted() {\n    window.addEventListener('keydown', this.handleKeyPress)\n  },\n  beforeUnmount() {\n    window.removeEventListener('keydown', this.handleKeyPress)\n  },\n  methods: {\n    setActiveStep(index) {\n      if (index === this.activeStep) return // prevent duplicate updates\n      this.activeStep = index\n    },\n    getTabColor(index) {\n      const component = this.steps[index + 1]; // +1 to match your visibleSteps slice\n      switch (component) {\n        case 'INFORMRiskIndex':\n          return '#089d9d';\n        case 'RainfallPrecipitation':\n          return '#40E0D0';\n        case 'MeanTemperature':\n          return '#FF0000';\n        case 'SheepCattleHerds':\n          return '#d4bb97';\n        case 'LandPloughedWheat':\n          return '#B28F04';\n        case 'CopingMechanisms':\n          return '#85B738';\n        case 'DoomedForever':\n          return '#820747';\n        default:\n          return '#000'; // default\n      }\n    },\n    formatStepName(step) {\n      return step.replace(/([A-Z])/g, ' $1').trim()\n    },\n    handleKeyPress(e) {\n      if (e.code === 'Space') e.preventDefault()\n\n      if (e.code === 'ArrowDown' || e.code === 'Space') {\n        this.goToStep(this.activeStep + 1)\n      } else if (e.code === 'ArrowUp') {\n        this.goToStep(this.activeStep - 1)\n      }\n    }\n    ,\n    goToStep(index) {\n      const stepEls = document.querySelectorAll('.charts-wrapper')\n      if (index < 0 || index >= stepEls.length) return\n\n      const el = stepEls[index]\n      if (el) {\n        el.scrollIntoView({ behavior: 'smooth', block: 'start' })\n        this.activeStep = index\n      }\n    }\n    ,\n  },\n  directives: {\n    intersect: {\n      mounted(el, binding) {\n        const observer = new IntersectionObserver(\n          ([entry]) => {\n            if (entry.isIntersecting) {\n              binding.value()\n            }\n          },\n          {\n            rootMargin: '0px',\n            threshold: 0.5,\n          }\n        )\n        observer.observe(el)\n      },\n    },\n  },\n}\n</script>\n\n\n<style>\n#scrollyteller {\n  scroll-snap-type: y mandatory;\n  overflow-y: scroll;\n  height: 100vh;\n}\n\n\nbody,\nhtml {\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n}\n\n\n.charts-wrapper {\n  scroll-snap-align: start;\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 20px;\n  box-sizing: border-box;\n}\n\n\n\n#app {\n  font-family: \"Parkinsans\", sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 30px;\n}\n\n.footer {\n  width: 100%;\n  margin: 0px;\n  text-align: center;\n  padding: 10px 0;\n}\n\nh1 {\n  font-size: 2.6em;\n  margin: 0;\n  font-weight: 800;\n}\n\nh2 {\n  font-size: 1.4em;\n  margin: 0;\n  font-weight: 300;\n}\n\nh3 {\n  font-size: 1.2em;\n  margin: 0;\n}\n\nh4 {\n  text-transform: uppercase;\n  font-size: 60px;\n  font-weight: 300;\n  margin: 0;\n}\n\nh5 {\n  text-align: left;\n  margin: 0;\n  font-size: 28px;\n  font-weight: 300;\n}\n\nh6 {\n  padding-top: 1rem;\n  text-align: left;\n  font-weight: 300;\n  font-size: 24px;\n  margin: 0;\n}\n\np {\n  font-size: 16px;\n  margin: 0;\n  text-align: left;\n  font-weight: 400;\n}\n\ntext {\n  font-family: \"Parkinsans\", sans-serif;\n  margin: 0;\n}\n\n.left-tab-container {\n  position: fixed;\n  top: 50%;\n  left: 0;\n  transform: translateY(-50%);\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  z-index: 10;\n  padding-left: 10px;\n}\n\n.tab {\n  writing-mode: vertical-rl;\n  text-orientation: mixed;\n  transform: rotate(180deg);\n  padding: 10px 5px;\n  cursor: pointer;\n  font-size: 0.9em;\n  color: #2c3e50;\n  border-left: 2px solid transparent;\n  transition: all 0.2s ease;\n}\n\n.tab.active {\n  color: #000;\n  border-left: 2px solid #000;\n  font-weight: bold;\n}\n\n.right-tab-container {\n  position: fixed;\n  top: 50%;\n  right: 0;\n  transform: translateY(-50%);\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  z-index: 10;\n  padding-right: 10px;\n}\n\n.right-tab-container .tab {\n  writing-mode: vertical-rl;\n  text-orientation: mixed;\n  transform: rotate(0deg);\n  padding: 10px 5px;\n  cursor: pointer;\n  font-size: 0.9em;\n  color: #2c3e50;\n  border-left: 2px solid transparent;\n  transition: all 0.2s ease;\n  text-decoration: none;\n}\n\n.right-tab-container .tab.active {\n  color: #000;\n  border-left: 2px solid #000;\n  font-weight: bold;\n}\n\n\n@keyframes slideInFromRight {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n\n  to {\n    transform: translateX(0%);\n    opacity: 1;\n  }\n}\n\n.methodology-panel {\n  position: fixed;\n  right: 70px;\n  top: 25%;\n  max-width: 1000px;\n  background-color: white;\n  padding: 13px 20px 17px 20px;\n  z-index: 20;\n  border: 1px solid #ccc;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  overflow-y: auto;\n  max-height: 80vh;\n  z-index: 1000;\n\n  animation: slideInFromRight 0.5s ease-out forwards;\n}\n</style>\n","<template>\n  <div class=\"hello-morocco\">\n    <div class=\"hello\">\n      <h1 class=\"droughts\" ref=\"droughtsText\">Droughts</h1>\n      <div class=\"floods-fires-line\">\n        <h1 class=\"floods\" ref=\"floodsText\">Floods</h1>\n        <h4 class=\"rotated\">and</h4>\n        <div class=\"fires-placeholder\" ref=\"firesText\"></div>\n      </div>\n      <h4 class=\"subtitle\">A Case Study of Morocco and Climate Change</h4>\n      <h5 class=\"byline\">Lisa Sakai Quinley</h5>\n    </div>\n\n    <canvas ref=\"noiseCanvas\" style=\"display:none;\"></canvas>\n\n    <!-- Droughts mask applied via SVG -->\n    <svg ref=\"droughtsSvg\" class=\"droughts-svg\">\n      <defs>\n        <clipPath id=\"droughts-clip\">\n          <text x=\"0\" :y=\"droughtsHeight * 0.75\" :font-size=\"droughtsHeight\" font-family=\"Parkinsans\" font-weight=\"800\">\n            DROUGHTS\n          </text>\n        </clipPath>\n      </defs>\n      <image :href=\"noiseDataUrl\" width=\"1000.740\" height=\"176\" clip-path=\"url(#droughts-clip)\" />\n    </svg>\n    <!-- SVG for Raindrops -->\n    <svg ref=\"floodsSvg\" class=\"floods-svg\">\n      <g ref=\"raindropGroup\">\n        <!-- Raindrops will fall inside this rect, which will match the bounding box of the \"FLOODS\" heading -->\n        <rect ref=\"raindropRect\" width=\"100%\" height=\"100%\" fill=\"#089c9d\" />\n      </g>\n    </svg>\n\n    <!-- SVG for Sparks -->\n    <svg ref=\"firesSvg\" class=\"fires-svg\">\n      <defs>\n        <clipPath id=\"text-clip\">\n          <!-- Dynamically placed text for clipping -->\n          <text ref=\"clipText\" font-family=\"Parkinsans\" font-weight=\"800\" id=\"firesText\" fill=\"black\">\n            FIRES\n          </text>\n        </clipPath>\n      </defs>\n      <g clip-path=\"url(#text-clip)\" ref=\"sparkGroup\">\n        <rect width=\"100%\" height=\"100%\" fill=\"rgb(153, 0, 0)\" />\n      </g>\n    </svg>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, onUnmounted, ref, nextTick } from 'vue'\nimport * as d3 from 'd3'\n\n// Refs to DOM nodes\nconst firesSvg = ref(null)\nconst sparkGroup = ref(null)\nconst firesText = ref(null)\nconst clipText = ref(null)\n\nconst floodsSvg = ref(null)\nconst floodsText = ref(null)\nconst raindropGroup = ref(null)\nconst raindropRect = ref(null)\n\nconst droughtsSvg = ref(null)\nconst noiseCanvas = ref(null)\nconst noiseDataUrl = ref('')\nconst droughtsText = ref(null)\n\nlet sparkTimer = null\nlet firesObserver = null\nlet floodsObserver = null\nlet droughtColorTimer = null\n\n// Droughts specific\nlet droughtsHeight = 176 // Adjust based on DOM or specific requirements\n\n// On mounted logic\nonMounted(async () => {\n  await nextTick()\n  if (droughtColorTimer) droughtColorTimer.stop()\n\n  // Drought color animation\n  const droughtColors = d3.scaleLinear()\n    .domain([0, 0.25, 0.5, 0.75, 1])\n    .range([\"#DEB887\", \"#d4bb97\", \"#e2d3b4\", \"#d4bb97\", \"#DEB887\"])\n\n  droughtColorTimer = d3.timer((elapsed) => {\n    const t = (Math.sin(elapsed / 3000) + 1) / 2 // smooth oscillation\n    const color = droughtColors(t)\n    if (droughtsText.value) {\n      droughtsText.value.style.color = color\n    }\n  })\n\n  // Initialize background noise for Droughts\n  drawBackgroundNoise()\n\n  // Set position for droughts SVG\n  setDroughtsSvgPosition()\n\n  // Positioning for Fires SVG\n  setFiresSvgPosition()\n\n  // Positioning for Floods SVG\n  setFloodsSvgPosition()\n\n  // Wait for DOM to stabilize\n  await nextTick()\n\n  // Intersection Observer setup for Droughts, Fires, and Floods\n  setupIntersectionObservers()\n})\n\n// On unmounted cleanup\nonUnmounted(() => {\n  if (sparkTimer) sparkTimer.stop()\n  if (firesObserver) firesObserver.disconnect()\n  if (floodsObserver) floodsObserver.disconnect()\n  if (droughtColorTimer) droughtColorTimer.stop()\n  if (droughtsSvg.value) {\n    droughtsSvg.value.remove()\n  }\n})\n\n// Functions for positioning and rendering\nfunction setDroughtsSvgPosition() {\n  const droughtsSvgNode = droughtsSvg.value\n  const droughtsTextRect = droughtsText.value.getBoundingClientRect()\n\n  droughtsSvgNode.style.position = 'absolute'\n  droughtsSvgNode.style.left = `${droughtsTextRect.left - 359}px`\n  droughtsSvgNode.style.top = `${droughtsTextRect.top - 215}px`\n  droughtsSvgNode.style.width = `${droughtsTextRect.width}px`\n  droughtsSvgNode.style.height = `${droughtsHeight}px`\n\n  // Set clipText position relative to the SVG height\n  clipText.value.setAttribute('x', 0)\n  clipText.value.setAttribute('y', droughtsHeight)\n  clipText.value.setAttribute('font-size', droughtsHeight)\n}\n\nfunction setFiresSvgPosition() {\n  const svgNode = firesSvg.value\n  // eslint-disable-next-line no-unused-vars\n  const group = d3.select(sparkGroup.value)\n  const { x, y } = firesText.value.getBoundingClientRect()\n\n  svgNode.setAttribute('width', 550)\n  svgNode.setAttribute('height', 170)\n  svgNode.style.position = 'absolute'\n  svgNode.style.left = `${x - 360}px`\n  svgNode.style.top = `${y - 185}px`\n\n  clipText.value.setAttribute('x', 0)\n  clipText.value.setAttribute('y', 170 * 0.75)\n  clipText.value.setAttribute('font-size', 170)\n}\n\nfunction setFloodsSvgPosition() {\n  const floodsNode = floodsSvg.value\n  const floodsRectBox = floodsText.value.getBoundingClientRect()\n\n  floodsNode.setAttribute('width', floodsRectBox.width)\n  floodsNode.setAttribute('height', floodsRectBox.height)\n  floodsNode.style.position = 'absolute'\n  floodsNode.style.left = `-${floodsRectBox.left}px/2`\n  floodsNode.style.top = `${floodsRectBox.top - 310}px`\n\n  raindropRect.value.setAttribute('width', floodsRectBox.width)\n  raindropRect.value.setAttribute('height', floodsRectBox.height)\n}\n\n// Draw background noise for Droughts\nfunction drawBackgroundNoise() {\n  const canvas = noiseCanvas.value\n  const ctx = canvas.getContext('2d')\n  const width = 1000.740\n  const height = droughtsHeight\n\n  canvas.width = width\n  canvas.height = height\n\n  ctx.fillStyle = 'transparent'\n  ctx.fillRect(0, 0, width, height)\n\n  const bladeCount = 2500\n  for (let i = 0; i < bladeCount; i++) {\n    const x = Math.random() * width\n    const y = Math.random() * height\n    const length = 8 + Math.random() * 12\n    const angle = (-Math.PI / 2) + (Math.random() - 0.5) * 0.6\n    const xEnd = x + length * Math.cos(angle)\n    const yEnd = y + length * Math.sin(angle)\n\n    ctx.beginPath()\n    ctx.moveTo(x, y)\n    ctx.lineTo(xEnd, yEnd)\n    ctx.strokeStyle = `rgba(139, 69, 19, ${0.04 + Math.random() * 0.3})`\n    ctx.lineWidth = 1\n    ctx.stroke()\n  }\n\n  // Convert to dataURL and assign\n  noiseDataUrl.value = canvas.toDataURL()\n}\n\n// Setup Intersection Observers for Droughts, Fires, and Floods\nfunction setupIntersectionObservers() {\n  // Droughts Observer\n  const droughtsObserver = new IntersectionObserver(([entry]) => {\n  if (droughtsSvg.value && droughtsText.value) {\n    droughtsSvg.value.style.display = entry.isIntersecting ? 'block' : 'none'\n  }\n}, { threshold: 0.1 })\n\nif (droughtsText.value instanceof Element) {\n  droughtsObserver.observe(droughtsText.value)\n}\n\n  // Fires Observer\n  firesObserver = new IntersectionObserver(([entry]) => {\n    if (entry.isIntersecting && !sparkTimer) {\n      sparkTimer = createSparks(d3.select(sparkGroup.value), firesSvg.value)\n      firesSvg.value.style.display = 'block'\n    } else if (!entry.isIntersecting && sparkTimer) {\n      sparkTimer.stop()\n      sparkTimer = null\n      firesSvg.value.style.display = 'none'\n    }\n  }, { threshold: 0.1 })\n\n  if (firesText.value instanceof Element) {\n    firesObserver.observe(firesText.value)\n  }\n\n  // Floods Observer\n  let isRaining = false\n  floodsObserver = new IntersectionObserver(([entry]) => {\n    if (entry.isIntersecting && !isRaining) {\n      isRaining = true\n      floodsSvg.value.style.display = 'block'\n      renderRaindrops(floodsSvg.value)\n    } else if (!entry.isIntersecting && isRaining) {\n      isRaining = false\n      d3.select(raindropGroup.value).selectAll('*').interrupt().remove()\n      floodsSvg.value.style.display = 'none'\n    }\n  }, { threshold: 0.1 })\n\n  if (floodsText.value instanceof Element) {\n    floodsObserver.observe(floodsText.value)\n  }\n}\n\n// Function to create sparks\nfunction createSparks(group, svgNode) {\n  const { width, height } = svgNode.getBoundingClientRect()\n\n  function spawnSpark() {\n    const x1 = Math.random() * width\n    const y1 = Math.random() * height\n    const x2 = x1 + (Math.random() - 0.5) * 15\n    const y2 = y1 + (Math.random() - 0.5) * 15\n\n    const spark = group.append('path')\n      .attr('d', `M${x1},${y1} L${x2},${y2}`)\n      .attr('stroke', Math.random() < 0.5 ? '#FFFF99' : '#FFFFFF')\n      .attr('stroke-width', 1 + Math.random() * 5)\n      .attr('stroke-dasharray', '5 5')\n      .attr('stroke-dashoffset', 5)\n      .attr('opacity', 1)\n\n    spark.transition()\n      .duration(200)\n      .attr('stroke-dashoffset', 0)\n      .attr('opacity', 0)\n      .remove()\n  }\n\n  return d3.timer(() => {\n    for (let i = 0; i < 20; i++) {\n      if (Math.random() < 0.7) spawnSpark()\n    }\n  })\n}\n\n// Function to render raindrops\nfunction renderRaindrops(svgEl, numDrops = 100) {\n  if (!svgEl) return\n\n  const width = 699.953\n  const height = droughtsHeight\n  const svg = d3.select(svgEl)\n\n  svg.attr('width', width)\n    .attr('height', height)\n    .attr('viewBox', `0 0 ${width} ${height}`)\n\n  const group = d3.select(svgEl.querySelector('g'))\n  group.selectAll('*').remove()\n\n  const dropWidth = 6\n  const dropHeight = 10\n\n  for (let i = 0; i < numDrops; i++) {\n    const x = Math.random() * width\n    const startY = -Math.random() * 100\n    const endY = height + dropHeight\n\n    const delay = Math.random() * 2000\n    const duration = 2000 + Math.random() * 2000\n\n    const dropPath = d3.path()\n    dropPath.moveTo(0, dropHeight / 2)\n    dropPath.bezierCurveTo(dropWidth / 2, dropHeight / 2, dropWidth / 2, -dropHeight / 4, 0, -dropHeight / 2)\n    dropPath.bezierCurveTo(-dropWidth / 2, -dropHeight / 4, -dropWidth / 2, dropHeight / 2, 0, dropHeight / 2)\n\n    group.append('path')\n      .attr('d', dropPath.toString())\n      .attr('fill', '#40E0D0')\n      .attr('transform', `translate(${x}, ${startY})`)\n      .transition()\n      .delay(delay)\n      .duration(duration)\n      .ease(d3.easeLinear)\n      .attr('transform', `translate(${x}, ${endY})`)\n      .on('end', function repeat() {\n        const newX = Math.random() * width\n        d3.select(this)\n          .attr('transform', `translate(${newX}, ${-dropHeight})`)\n          .transition()\n          .delay(Math.random() * 2000)\n          .duration(2000 + Math.random() * 2000)\n          .ease(d3.easeLinear)\n          .attr('transform', `translate(${newX}, ${endY})`)\n          .on('end', repeat)\n      })\n  }\n}\n</script>\n\n\n<style scoped>\nhtml,\nbody {\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n\n.hello-morocco {\n  position: relative;\n}\n\n.hello {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin-bottom: 150px;\n  position: relative;\n  overflow: visible;\n  /* Makes sure SVG is positioned over the text */\n}\n\nh1 {\n  text-transform: uppercase;\n  font-size: 11rem;\n  margin: 0;\n  line-height: 1;\n}\n\nh4 {\n  text-transform: uppercase;\n  font-size: 54px;\n  margin: 0;\n  font-weight: 300;\n}\n\n.subtitle {\n  margin-top: 0.25em;\n}\n\n.byline {\n  font-size: 28px;\n  font-weight: 300;\n  margin-top: 0.75em;\n}\n\n.floods-fires-line {\n  display: flex;\n  align-items: baseline;\n  gap: 0.75em;\n}\n\n.rotated {\n  transform: rotate(-90deg);\n  transform-origin: center;\n  font-size: 3.5em;\n  align-self: center;\n  position: relative;\n  top: 0.15em;\n}\n\n.droughts {\n  margin-bottom: -40px;\n}\n\n.floods {\n  color: #089c9d;\n}\n\n.floods-svg {\n  display: block;\n  pointer-events: none;\n  position: absolute;\n}\n\n.fires {\n  color: rgb(153, 0, 0);\n  font-family: 'Parkinsans', sans-serif;\n}\n\n.fires-placeholder {\n  width: 500px;\n  height: 176px;\n  position: relative;\n}\n</style>\n","import script from \"./HelloMorocco.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HelloMorocco.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HelloMorocco.vue?vue&type=style&index=0&id=28e64a4e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-28e64a4e\"]])\n\nexport default __exports__","<template>\n    <div class=\"precip-wrapper bar-chart\" ref=\"precipWrapperRef\">\n      <h3>Raincheck<br>Forever</h3>\n    <div v-for=\"column in filteredPrecipitationColumns\" :key=\"column\" class=\"bar-chart-block\">\n      <div class=\"bar-chart-content\">\n        <!--         <h4>{{ getDropdownTitle(column) }}</h4> -->\n        <div class=\"legend\">\n          <svg :ref=\"el => legendRefs[column] = el\" height=\"40\"></svg>\n        </div>\n\n        <svg :ref=\"el => chartRefs[column] = el\"></svg>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport * as d3 from \"d3\";\nimport { ref, onMounted, nextTick, computed, watch } from \"vue\";\n\nconst precipWrapperRef = ref(null);\nconst chartRefs = {};\nconst legendRefs = {};\nconst historicalData = ref([]);\nconst projectedData = ref([]);\nconst projectedColumns = ref([]);\n\nconst filteredPrecipitationColumns = computed(() =>\n  projectedColumns.value.filter(col =>\n    col.toLowerCase().includes(\"precipitation\") && col.includes(\"8.5\")\n  )\n);\n\n/* \nfunction getDropdownTitle(col) {\n  return col.replace(/_/g, \" \");\n}\n */\n\nonMounted(() => {\n  if (precipWrapperRef.value) {\n    observer.observe(precipWrapperRef.value);\n  }\n});\n\n// Intersection Observer setup to trigger animation\nconst observer = new IntersectionObserver(\n  (entries) => {\n    entries.forEach((entry) => {\n      if (entry.isIntersecting) {\n        entry.target.classList.add(\"in-view\");\n        triggerPrecipitationAnimation();\n      } else {\n        entry.target.classList.remove(\"in-view\");\n      }\n    });\n  },\n  { threshold: 0.5 }\n);\n\nfunction getUnitPerEllipse() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return height > width ? 5 : 10;\n}\n\n\nfunction triggerPrecipitationAnimation() {\n  const unitPerEllipse = getUnitPerEllipse(); //  New line\n\n  filteredPrecipitationColumns.value.forEach(column => {\n    const historical = historicalData.value.map(d => ({\n      year: +d.year,\n      value: Math.round(parseFloat(d[\"Precipitation\"])),\n      source: \"historical\"\n    })).filter(d => !isNaN(d.value));\n\n    const projected = projectedData.value\n      .filter(d => +d.year !== 2020)\n      .map(d => ({\n        year: +d.year,\n        value: Math.round(parseFloat(d[column])),\n        source: \"projected\"\n      })).filter(d => !isNaN(d.value));\n\n    const combinedRaw = [...historical, ...projected];\n    const combinedData = getYearlySums(combinedRaw);\n\n    renderPrecipitationCircles(combinedData, chartRefs[column], column, unitPerEllipse);\n  });\n}\n\nfunction renderLegend(unitPerEllipse, svgEl) {\n  const svg = d3.select(svgEl);\n  svg.selectAll(\"*\").remove();\n\n  const dropSize = 10;\n  const dropWidth = dropSize;\n  const dropHeight = dropSize * 1.3;\n\n  const colorMap = {\n    historical: \"#089c9d\",\n    projected: \"#40E0D0\",\n    regression: \"url(#regressionGradient)\"\n  };\n\n  const dropPath = d3.path();\n  dropPath.moveTo(0, -dropHeight / 2);\n  dropPath.bezierCurveTo(dropWidth / 2, -dropHeight / 2, dropWidth / 2, dropHeight / 4, 0, dropHeight / 2);\n  dropPath.bezierCurveTo(-dropWidth / 2, dropHeight / 4, -dropWidth / 2, -dropHeight / 2, 0, -dropHeight / 2);\n\n  const legendItems = [\"historical\", \"projected\", \"regression\"];\n\n  legendItems.forEach((type, i) => {\n    const centerX = 20;\n    const centerY = 20 + i * 25;\n\n    if (type === \"regression\") {\n      // Add regression line\n      svg.append(\"line\")\n        .attr(\"x1\", centerX - 5)\n        .attr(\"x2\", centerX + 15)\n        .attr(\"y1\", centerY)\n        .attr(\"y2\", centerY)\n        .attr(\"stroke\", \"#5C4033\")\n        .attr(\"stroke-width\", 2); \n\n      svg.append(\"text\")\n        .attr(\"x\", centerX + 20)\n        .attr(\"y\", centerY + 5)\n        .attr(\"fill\", \"#2c3e50\")\n        .attr(\"font-size\", \"1em\")\n        .text(\"Downward Trend\");\n    } else {\n      // Add raindrop legend\n      svg.append(\"path\")\n        .attr(\"d\", dropPath.toString())\n        .attr(\"transform\", `translate(${centerX}, ${centerY}) scale(1, -1)`)\n        .attr(\"fill\", colorMap[type]);\n\n      svg.append(\"text\")\n        .attr(\"x\", centerX + 15)\n        .attr(\"y\", centerY + 5)\n        .attr(\"fill\", \"#2c3e50\")\n        .attr(\"font-size\", \"1em\")\n        .text(`${type === \"historical\" ? \"Past\" : \"Future\"}: 1 raindrop = ${Math.round(unitPerEllipse)} mm`);\n    }\n  });\n\n  svg.attr(\"width\", 250).attr(\"height\", 90);\n}\n\nfunction linearRegression(x, y) {\n  const xMean = d3.mean(x);\n  const yMean = d3.mean(y);\n  const slope = d3.sum(x.map((d, i) => (d - xMean) * (y[i] - yMean))) / d3.sum(x.map(d => (d - xMean) ** 2));\n  const intercept = yMean - slope * xMean;\n\n  return {\n    slope,\n    intercept,\n    predict: x => intercept + slope * x\n  };\n}\n\n\nfunction renderPrecipitationCircles(combinedData, svgEl, column, unitPerEllipse) {\n  if (!svgEl || !combinedData.length) return;\n\n  const container = svgEl.parentNode;\n  const width = container.getBoundingClientRect().width;\n  const height = container.getBoundingClientRect().height;\n\n  const svg = d3.select(svgEl)\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n    .attr(\"viewBox\", `0 0 ${width} ${height}`);\n\n  svg.selectAll(\"*\").remove();\n\n  const margin = { top: 20, right: 20, bottom: 60, left: 60 };\n  const innerWidth = width - margin.left - margin.right;\n  const innerHeight = height - margin.top - margin.bottom;\n\n  const g = svg.append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  const years = Array.from(new Set(combinedData.map(d => d.year))).sort((a, b) => a - b);\n  const xScale = d3.scaleBand().domain(years).range([0, innerWidth]).padding(0.1);\n  const maxValue = d3.max(combinedData, d => d.value);\n  const yScale = d3.scaleLinear().domain([0, maxValue]).range([innerHeight, 0]);\n  const color = d3.scaleOrdinal().domain([\"historical\", \"projected\"]).range([\"#089c9d\", \"#40E0D0\"]);\n\n  // Compute linear regression\n  const regression = linearRegression(combinedData.map(d => d.year), combinedData.map(d => d.value));\n\n  // Create a line path\n  const line = d3.line()\n    .x(d => xScale(d.year) + xScale.bandwidth() / 2)\n    .y(d => yScale(regression.predict(d.year)));\n\n  const regressionData = [\n    { year: d3.min(combinedData, d => d.year) },\n    { year: d3.max(combinedData, d => d.year) }\n  ];\n\n  // 1. Append a gradient to the SVG\n  const defs = svg.append(\"defs\");\n\n  const gradient = defs.append(\"linearGradient\")\n    .attr(\"id\", \"regressionGradient\")\n    .attr(\"x1\", \"0%\")\n    .attr(\"x2\", \"100%\")\n    .attr(\"y1\", \"0%\")\n    .attr(\"y2\", \"0%\");\n\n  gradient.append(\"stop\")\n    .attr(\"offset\", \"0%\")\n    .attr(\"stop-color\", \"#DEB887\"); // light brown\n\n  gradient.append(\"stop\")\n    .attr(\"offset\", \"100%\")\n    .attr(\"stop-color\", \"#5C4033\"); // dark brown\n\n  // 2. Draw the regression line using the gradient stroke\n  const regressionPath = g.append(\"path\")\n    .datum(regressionData)\n    .attr(\"fill\", \"none\")\n    .attr(\"stroke\", \"url(#regressionGradient)\") // Use the gradient\n    .attr(\"stroke-width\", 2)\n    .attr(\"d\", line);\n\n  // 3. Animate the stroke drawing\n  const totalLength = regressionPath.node().getTotalLength();\n\n  regressionPath\n    .attr(\"stroke-dasharray\", `${totalLength} ${totalLength}`)\n    .attr(\"stroke-dashoffset\", totalLength)\n    .transition()\n    .duration(3000)\n    .ease(d3.easeCubicOut)\n    .attr(\"stroke-dashoffset\", 0);\n\n\n  if (column === filteredPrecipitationColumns.value[0]) {\n    renderLegend(unitPerEllipse, legendRefs[column]);\n  }\n\n  combinedData.forEach(d => {\n    const totalCircles = Math.floor(d.value / unitPerEllipse);\n    const barCenter = xScale(d.year) + xScale.bandwidth() / 2;\n    const ellipseRx = Math.min(xScale.bandwidth() / 3, 12);\n\n    for (let i = 0; i < totalCircles; i++) {\n      const dropYmm = unitPerEllipse * (i + 1);\n      const dropY = yScale(dropYmm);\n\n      const randomYOffset = Math.random() * 100 + 20;\n      const randomDelay = Math.random() * 800;\n\n      const dropHeight = ellipseRx * 2.5;\n      const dropWidth = ellipseRx * 2;\n\n      const dropPath = d3.path();\n      dropPath.moveTo(0, -dropHeight / 2);\n      dropPath.bezierCurveTo(dropWidth / 2, -dropHeight / 2, dropWidth / 2, dropHeight / 4, 0, dropHeight / 2);\n      dropPath.bezierCurveTo(-dropWidth / 2, dropHeight / 4, -dropWidth / 2, -dropHeight / 2, 0, -dropHeight / 2);\n\n      g.append(\"path\")\n        .attr(\"d\", dropPath.toString())\n        .attr(\"transform\", `translate(${barCenter}, ${-randomYOffset}) scale(1, -1)`)\n        .attr(\"fill\", color(d.source))\n        .transition()\n        .delay(randomDelay)\n        .duration(2000)\n        .ease(d3.easeBounceOut)\n        .attr(\"transform\", `translate(${barCenter}, ${dropY}) scale(1, -1)`);\n    }\n  });\n\n  const xTickYears = years.filter((y, i, arr) => i === 0 || i === arr.length - 1 || y % 10 === 0);\n\n  // X Axis Tick Labels\n  g.append(\"g\")\n    .selectAll(\"text.x-axis\")\n    .data(xTickYears)\n    .enter()\n    .append(\"text\")\n    .attr(\"class\", \"x-axis\")\n    .attr(\"x\", d => xScale(d) + xScale.bandwidth() / 2)\n    .attr(\"y\", innerHeight + 25)\n    .style(\"text-anchor\", \"middle\")\n    .text(d => d);\n\n  // X Axis Tick Lines\n  g.append(\"g\")\n    .selectAll(\"line.x-axis-tick\")\n    .data(xTickYears)\n    .enter()\n    .append(\"line\")\n    .attr(\"class\", \"x-axis-tick\")\n    .attr(\"x1\", d => xScale(d) + xScale.bandwidth() / 2)\n    .attr(\"x2\", d => xScale(d) + xScale.bandwidth() / 2)\n    .attr(\"y1\", innerHeight)\n    .attr(\"y2\", innerHeight + 6)\n    .style(\"stroke\", \"black\")\n    .style(\"stroke-width\", 1);\n\n\n  // Y-axis Labels\n  g.append(\"g\")\n    .selectAll(\"text.y-axis\")\n    .data(yScale.ticks(5).filter(d => d !== 0))\n    .enter()\n    .append(\"text\")\n    .attr(\"class\", \"y-axis\")\n    .attr(\"x\", -40)\n    .attr(\"y\", d => (yScale(d) + 5))\n    .style(\"text-anchor\", \"middle\")\n    .text(d => d.toFixed(0));  // Display the values rounded to integers\n\n  // Y-axis Tick Lines\n  g.append(\"g\")\n    .selectAll(\"line.y-axis-tick\")\n    .data(yScale.ticks(5).filter(d => d !== 0))\n    .enter()\n    .append(\"line\")\n    .attr(\"class\", \"y-axis-tick\")\n    .attr(\"x1\", -20)\n    .attr(\"x2\", -10)\n    .attr(\"y1\", d => yScale(d))\n    .attr(\"y2\", d => yScale(d))\n    .style(\"stroke\", \"black\")\n    .style(\"stroke-width\", 1);\n\n\n  const hoverBar = g.append(\"rect\")\n    .attr(\"class\", \"hover-bar\")\n    .attr(\"width\", xScale.bandwidth())\n    .attr(\"fill-opacity\", 0.7)\n    .style(\"display\", \"none\")\n    .attr(\"y\", innerHeight)\n    .attr(\"height\", 0);\n\n  g.selectAll(\".hover-zone\")\n    .data(combinedData)\n    .enter()\n    .append(\"rect\")\n    .attr(\"class\", \"hover-zone\")\n    .attr(\"x\", d => xScale(d.year))\n    .attr(\"y\", 0)\n    .attr(\"width\", xScale.bandwidth())\n    .attr(\"height\", innerHeight)\n    .attr(\"fill\", \"transparent\")\n    .on(\"mouseover\", function (event, d) {\n      hoverBar.interrupt();\n      const hoverColor = color(d.source);\n      hoverBar.style(\"display\", \"block\")\n        .transition()\n        .duration(500)\n        .ease(d3.easeCubicOut)\n        .attr(\"x\", xScale(d.year))\n        .attr(\"y\", yScale(d.value))\n        .attr(\"height\", innerHeight - yScale(d.value))\n        .attr(\"fill\", hoverColor);\n\n      g.selectAll(\".bar-label\").remove();\n      g.append(\"text\")\n        .attr(\"class\", \"bar-label\")\n        .attr(\"x\", xScale(d.year) + xScale.bandwidth() / 2)\n        .attr(\"y\", yScale(d.value) - 10)\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"fill\", \"#333\")\n        .attr(\"opacity\", 0)\n        .text(`${Math.round(d.value)} mm`)\n        .transition()\n        .duration(500)\n        .attr(\"opacity\", 1);\n    })\n    .on(\"mouseout\", function () {\n      hoverBar.interrupt();\n      hoverBar.transition()\n        .duration(500)\n        .ease(d3.easeCubicOut)\n        .attr(\"y\", innerHeight)\n        .attr(\"height\", 0)\n        .style(\"display\", \"none\");\n\n      g.selectAll(\".bar-label\")\n        .transition()\n        .duration(300)\n        .attr(\"opacity\", 0)\n        .remove();\n    });\n}\n\nfunction getYearlySums(data) {\n  const yearlySums = d3.rollups(\n    data,\n    values => d3.sum(values, d => d.value),\n    d => d.year\n  ).map(([year, sum]) => ({\n    year,\n    value: sum,\n    source: data.find(d => d.year === year).source\n  }));\n\n  return yearlySums;\n}\n\nwatch([historicalData, projectedData], async () => {\n  if (!historicalData.value.length || !projectedData.value.length) return;\n\n  const unitPerEllipse = getUnitPerEllipse(); //  New line\n  const histCol = \"Precipitation\";\n\n  for (const column of filteredPrecipitationColumns.value) {\n    const historical = historicalData.value.map(d => ({\n      year: +d.year,\n      value: Math.round(parseFloat(d[histCol])),\n      source: \"historical\"\n    })).filter(d => !isNaN(d.value));\n\n    const projected = projectedData.value\n      .filter(d => +d.year !== 2020)\n      .map(d => ({\n        year: +d.year,\n        value: Math.round(parseFloat(d[column])),\n        source: \"projected\"\n      })).filter(d => !isNaN(d.value));\n\n    const combinedRaw = [...historical, ...projected];\n    const combinedData = getYearlySums(combinedRaw);\n\n    await nextTick();\n\n    renderPrecipitationCircles(combinedData, chartRefs[column], column, unitPerEllipse);\n  }\n});\n\nonMounted(async () => {\n  try {\n    const hist = await d3.csv(\"./data/MeanMaxSurfaceAirTempuratureAndPrecipitation-1951-2020-Month.csv\");\n    const proj = await d3.csv(\"./data/AverageMeanAndMaxSurfaceAirTemperatureAndPrecipitation-2020-2099-Month-FourScenarios.csv\");\n\n    historicalData.value = hist;\n    projectedData.value = proj;\n    projectedColumns.value = Object.keys(proj[0] || {});\n  } catch (err) {\n    console.error(\"Error loading CSV data:\", err);\n  }\n});\n</script>\n\n\n<style scoped>\nhtml,\nbody,\n#app {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\n\n.precip-wrapper {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  box-sizing: border-box;\n  padding: 4rem 5rem 5rem 5rem;\n  overflow: auto;\n  opacity: 0;\n  transition: opacity 1s ease-in-out;\n}\n\n.precip-wrapper.in-view {\n  opacity: 1;\n  /* Fade in when in view */\n}\n\n.precip-wrapper h3 {\n  color: #40E0D04f;\n  text-transform: uppercase;\n  line-height: 1;\n  font-size: 5em;\n  position: absolute;\n  top: 4rem;\n  left: 9.5rem;\n  text-align: left;\n  margin: 0;\n  font-weight: 800;\n  z-index: 0;\n}\n\n.bar-chart {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.bar-chart-block {\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  overflow: hidden;\n  /* Prevent overflow of chart content */\n}\n\n.bar-chart-content {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.legend {\n  position: absolute;\n  top: 2.5rem;\n  right: 5%;\n  padding-left: 1rem;\n  z-index: 2;\n  pointer-events: none;\n}\n\nsvg {\n  overflow: visible;\n}\n\n.x-axis {\n  font-size: 0.75em;\n}\n\n.y-axis {\n  font-size: 0.75em;\n}\n\n</style>\n","import script from \"./RainfallPrecipitation.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RainfallPrecipitation.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RainfallPrecipitation.vue?vue&type=style&index=0&id=e3598bf4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e3598bf4\"]])\n\nexport default __exports__","<template>\n    <div ref=\"wrapperRef\" class=\"temperature-wrapper unified-heatmap\">\n        <div class=\"title\" v-show=\"showTitle\">\n            <h3>Future Heat</h3>\n        </div>\n        <div class=\"top-bar\">\n            <!-- <h3></h3> -->\n            <div class=\"legend\">\n                <div class=\"legend-pairs\">\n                    <div class=\"legend-pair\" v-for=\"(color, index) in legendColors\" :key=\"index\">\n                        <div class=\"legend-color-pair\">\n                            <div class=\"legend-color\" :style=\"{ backgroundColor: color.color }\"></div>\n                            <div class=\"legend-color\"\n                                :style=\"{ backgroundColor: grayscaleLegendColors[index]?.color || '#ccc' }\"></div>\n                        </div>\n                        <span class=\"legend-label\">{{ color.label }}</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"control-container\">\n                <!-- Left Side: Controls -->\n                <div class=\"left-controls\">\n                    <div class=\"radio-buttons\">\n                        <label>\n                            <input type=\"radio\" v-model=\"selectedColumnGroup\" value=\"max\" /> Max\n                        </label>\n                        <label>\n                            <input type=\"radio\" v-model=\"selectedColumnGroup\" value=\"mean\" /> Mean\n                        </label>\n                    </div>\n\n                    <div class=\"overlay-toggle toggle-switch\">\n                        <label class=\"switch\">\n                            <input type=\"checkbox\" v-model=\"showOverlay\">\n                            <span class=\"slider\"></span>\n                        </label>\n                        <span class=\"toggle-label\">{{ showOverlay ? \"Hide Covers\" : \"Show Covers\" }}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"heatmap-container\">\n            <div v-for=\"(column, index) in filteredProjectedColumnOptions\" :key=\"column\" class=\"heatmap-block\"\n                :class=\"{ visible: showBlocks[index] }\" @mouseenter=\"hoveredBlock = column\"\n                @mouseleave=\"hoveredBlock = null\">\n\n                <div class=\"heatmap-visual\">\n                    <svg :ref=\"el => heatmapRefs[column] = el\"\n                        :data-last-heatmap=\"index === filteredProjectedColumnOptions.length - 1\"></svg>\n                    <div class=\"heatmap-cover\" :class=\"{ hidden: hoveredBlock === column || !showOverlay }\">\n                        <svg class=\"spark-overlay\"></svg>\n                        <div class=\"cover-message\">\n                            <div class=\"cover-headings\">\n                                <h4>{{ getScenarioInfo(column).title }}</h4>\n                                <h5>{{ getScenarioInfo(column).subtitle }}</h5>\n                                <h6>{{ getScenarioInfo(column).soundBite }}</h6>\n                            </div>\n                            <div class=\"cover-paragraph\">\n                                <p v-html=\"getScenarioInfo(column).message\"></p>\n                            </div>\n                        </div>\n\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport * as d3 from \"d3\";\nimport { ref, onMounted, onBeforeUnmount, nextTick, computed, watch } from \"vue\";\n\nconst heatmapRefs = {};\nconst hoveredBlock = ref(null);\nconst wrapperRef = ref(null);\nconst observer = ref(null);\n\nconst historicalData = ref([]);\nconst projectedData = ref([]);\nconst projectedColumns = ref([]);\n\nconst selectedColumnGroup = ref(\"max\");\nconst selectedProjectedColumn = ref(\"\");\n\nconst hasAnimated = ref(false);\n\nconst legendInFahrenheit = ref(false);\n\nconst showTitle = ref(false);\n\n// NEW STATE: Show/hide overlays\nconst showOverlay = ref(true);\n\nconst legendColors = computed(() => {\n    const celsiusBreaks = [15, 20, 25, 30, 35];\n    const fahrenheitBreaks = celsiusBreaks.map(c => Math.round(c * 9 / 5 + 32));\n    const labels = legendInFahrenheit.value\n        ? [...fahrenheitBreaks.map(t => `${t}F`), `${Math.round(40 * 9 / 5 + 32)}F+`]\n        : [...celsiusBreaks.map(t => `${t}C`), \"40C+\"];\n\n    const colors = [\"#40E0D0\", \"#7FFF00\", \"#FFFF00\", \"#FF8000\", \"#FF0000\", \"#820747\"]; // colors are: pale turquoise, chartreuse, yellow, orange, red, dark red\n\n    return colors.map((color, i) => ({\n        color,\n        label: labels[i]\n    }));\n});\n\n// Grayscale version of the color scale (same range but grayscale)\nconst grayscaleLegendColors = computed(() => {\n    const grayscaleColors = [\n        \"#D3D3D3\", \"#A9A9A9\", \"#808080\", \"#505050\", \"#303030\", \"#101010\"\n    ];\n    const labels = legendColors.value.map(color => color.label); // Use the same labels\n\n    return grayscaleColors.map((color, i) => ({\n        color,\n        label: labels[i]\n    }));\n});\n\n\nconst filteredProjectedColumnOptions = computed(() =>\n    projectedColumns.value.filter(col =>\n        selectedColumnGroup.value === \"mean\"\n            ? col.toLowerCase().includes(\"mean\")\n            : col.toLowerCase().includes(\"max\")\n    ).reverse()\n);\n\nconst getScenarioInfo = (columnName) => {\n    if (columnName.includes(\"SSP1-2.6\")) {\n        return {\n            title: \"Kindling Spark\",\n            subtitle: \"Best-Case Scenario\",\n            soundBite: \"The fires just a flicker  we nearly snuffed it out.\",\n            message: \"Aiming high on sustainability, this scenario sees the world making strong progress on cutting emissions, hitting net-zero after 2050. The result? Global warming is likely kept below 2C by 2100. Its the climate-friendly path.\"\n        };\n    } else if (columnName.includes(\"SSP2-4.5\")) {\n        return {\n            title: \"Smoldering Path\",\n            subtitle: \"Business-as-Usual Scenario\",\n            soundBite: \"The coals still burn  slow heat, rising risk.\",\n            message: \"This is the do a little, but not too much path. Emissions stay close to current levels until around mid-century, then slowly decline. Net-zero isn't reached until after 2100. It's a compromise route, with moderate climate action and moderate consequences.\"\n        };\n    } else if (columnName.includes(\"SSP3-7.0\")) {\n        return {\n            title: \"Rising Blaze\",\n            subtitle: \"Worsening Scenario\",\n            soundBite: \"The flames are spreading  no ones tending the line.\",\n            message: \"In this future, the world is fragmented, with regional tensions and little cooperation. Emissions keep rising, nearly doubling by 2100. Climate action takes a back seat, leading to increasing global risks and instability.\"\n        };\n    } else if (columnName.includes(\"SSP5-8.5\")) {\n        return {\n            title: \"Inferno Run\",\n            subtitle: \"Worst-Case Scenario\",\n            soundBite: \"The firestorm roars  and we lit the match.\",\n            message: \"Fueled by fossil energy and tech innovation, this path prioritizes economic growth over sustainability. Emissions soar, and radiative forcing reaches the highest levels  its the worst-case outlook. It's the high-speed lane to extreme climate change.\"\n        };\n    } else {\n        return {\n            title: \"Unknown Flame\",\n            subtitle: columnName,\n            soundBite: \"Unknown path  map not available.\",\n            message: \"Scenario description unavailable.\"\n        };\n    }\n};\n\nwatch(selectedColumnGroup, () => {\n    const filtered = filteredProjectedColumnOptions.value;\n    selectedProjectedColumn.value = filtered.length > 0 ? filtered[0] : \"\";\n});\n\nwatch([historicalData, projectedData, selectedColumnGroup], async () => {\n    if (!historicalData.value.length || !projectedData.value.length) return;\n\n    for (const [index, column] of filteredProjectedColumnOptions.value.entries()) {\n        const histCol = selectedColumnGroup.value === \"mean\" ? \"Mean Temp\" : \"Max Temp\";\n\n        const combinedData = [\n            ...historicalData.value.map(d => ({\n                year: +d.year,\n                month: d.month,\n                value: parseFloat(d[histCol]),\n                source: \"historical\"\n            })),\n            ...projectedData.value.map(d => ({\n                year: +d.year,\n                month: d.month,\n                value: parseFloat(d[column]),\n                source: \"projected\"\n            }))\n        ];\n\n        await nextTick();\n        const isLastHeatmap = index === filteredProjectedColumnOptions.value.length - 1;\n        renderUnifiedHeatmap(combinedData, heatmapRefs[column], isLastHeatmap);\n    }\n}, { immediate: true });\n\nfunction renderUnifiedHeatmap(data, svgEl, isLastHeatmap) {\n    if (!svgEl || !data.length) return;\n\n    const container = svgEl.parentNode;\n    const width = container.getBoundingClientRect().width;\n    const height = container.getBoundingClientRect().height;\n\n    const months = Array.from(new Set(data.map(d => d.month))).reverse();\n    const years = Array.from(new Set(data.map(d => d.year)));\n\n    const margin = { top: 0, right: 90, bottom: 30, left: 50 };\n    const innerHeight = height - margin.top - margin.bottom;\n    const innerWidth = width - margin.left - margin.right;\n\n    const svg = d3.select(svgEl)\n        .attr(\"width\", \"100%\")\n        .attr(\"height\", \"100%\")\n        .attr(\"viewBox\", `0 0 ${width} ${height}`);\n\n    svg.selectAll(\"*\").remove();\n\n    const xScale = d3.scaleBand().domain(years).range([0, innerWidth]).padding(0.05);\n    const yScale = d3.scaleBand().domain(months).range([innerHeight, 0]).padding(0.05);\n\n    const colorScale = d3.scaleThreshold()\n        .domain([15, 20, 25, 30, 35])\n        .range([\"#40E0D0\", \"#7FFF00\", \"#FFFF00\", \"#FF8000\", \"#FF0000\", \"#820747\"]);\n\n    const g = svg.append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    const xAxisTicks = years.filter((y, i) => i === 0 || i === years.length - 1 || y % 10 === 0);\n    if (isLastHeatmap) {\n        g.append(\"g\")\n            .selectAll(\"text.x-axis\")\n            .data(xAxisTicks)\n            .enter()\n            .append(\"text\")\n            .attr(\"class\", \"x-axis\")\n            .attr(\"x\", d => xScale(d) + xScale.bandwidth() / 2)\n            .attr(\"y\", innerHeight + 25)\n            .style(\"text-anchor\", \"middle\")\n            .text(d => d);\n    }\n\n    g.append(\"g\")\n        .selectAll(\"line.x-axis-tick\")\n        .data(xAxisTicks)\n        .enter()\n        .append(\"line\")\n        .attr(\"x1\", d => xScale(d) + xScale.bandwidth() / 2)\n        .attr(\"x2\", d => xScale(d) + xScale.bandwidth() / 2)\n        .attr(\"y1\", innerHeight)\n        .attr(\"y2\", innerHeight + 6)\n        .style(\"stroke\", \"black\");\n\n    g.append(\"g\")\n        .selectAll(\"text.y-axis\")\n        .data(months)\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", \"y-axis\")\n        .attr(\"x\", -25)\n        .attr(\"y\", d => yScale(d) + yScale.bandwidth() / 1.25)\n        .style(\"text-anchor\", \"middle\")\n        .text(d => d);\n\n    // Function to convert color to grayscale\n    function toGrayscale(color) {\n        const rgb = d3.rgb(color);\n        const grayscale = 0.2126 * rgb.r + 0.7152 * rgb.g + 0.0722 * rgb.b;\n        return d3.rgb(grayscale, grayscale, grayscale);\n    }\n\n    g.selectAll(\".heatmap-cell\")\n        .data(data)\n        .enter()\n        .append(\"rect\")\n        .attr(\"class\", \"heatmap-cell\")\n        .attr(\"x\", d => xScale(d.year))\n        .attr(\"y\", d => yScale(d.month))\n        .attr(\"width\", xScale.bandwidth())\n        .attr(\"height\", yScale.bandwidth())\n        .style(\"fill\", d => {\n            const color = colorScale(d.value);\n            // Convert the color to grayscale for years 2020 or earlier\n            if (d.year <= 2020) {\n                return toGrayscale(color); // Convert color to grayscale\n            }\n            return color; // Keep the original color for later years\n        })\n        .style(\"opacity\", 0)\n        .transition()\n        .duration(500)\n        .style(\"opacity\", 1);\n\n\n}\n\nlet sparkTimers = [];\n\nfunction startSparks() {\n    d3.selectAll('.spark-overlay').each(function () {\n        const svg = d3.select(this);\n        const group = svg.append('g').attr('class', 'spark-group');\n        const timer = createSparks(group, svg.node());\n        sparkTimers.push({ svg, group, timer });\n    });\n}\n\nfunction stopSparks() {\n    // Stop all timers and remove spark elements\n    sparkTimers.forEach(({ group, timer }) => {\n        timer.stop();\n        group.remove();\n    });\n    sparkTimers = [];\n}\n\n\nd3.selectAll('.spark-overlay')\n    .each(function () {\n        const svg = d3.select(this);\n        const sparkGroup = svg.append('g').attr('class', 'spark-group');\n        createSparks(sparkGroup, svg.node());\n    });\n\nfunction createSparks(group, svgNode) {\n    const { width, height } = svgNode.getBoundingClientRect();\n\n    function spawnSpark() {\n        const x1 = Math.random() * width;\n        const y1 = Math.random() * height;\n        const x2 = x1 + (Math.random() - 0.5) * 15;\n        const y2 = y1 + (Math.random() - 0.5) * 15;\n\n        const spark = group.append('path')\n            .attr('d', `M${x1},${y1} L${x2},${y2}`)\n            .attr('stroke', Math.random() < 0.5 ? '#FFFF99' : '#FFFFFF')\n\n            .attr('stroke-width', 1 + Math.random() * 5)\n            .attr('stroke-dasharray', '5 5')\n            .attr('stroke-dashoffset', 5)\n            .attr('opacity', 1);\n\n        spark.transition()\n            .duration(200)\n            .attr('stroke-dashoffset', 0)\n            .attr('opacity', 0)\n            .remove();\n    }\n\n    return d3.timer(() => {\n        for (let i = 0; i < 20; i++) {\n            if (Math.random() < 0.7) spawnSpark(); // increase probability\n        }\n    });\n}\n\n\nconst showBlocks = ref([]);\n\nonMounted(async () => {\n    try {\n        const hist = await d3.csv(\"./data/MeanMaxSurfaceAirTempuratureAndPrecipitation-1951-2020-Month.csv\");\n        const proj = await d3.csv(\"./data/AverageMeanAndMaxSurfaceAirTemperatureAndPrecipitation-2020-2099-Month-FourScenarios.csv\");\n\n        historicalData.value = hist;\n        projectedData.value = proj;\n        projectedColumns.value = Object.keys(proj[0] || {});\n\n        const defaultGroup = selectedColumnGroup.value;\n        const defaultOptions = projectedColumns.value.filter(col =>\n            defaultGroup === \"mean\" ? col.toLowerCase().includes(\"mean\") : col.toLowerCase().includes(\"max\")\n        );\n        selectedProjectedColumn.value = defaultOptions[0];\n\n        // Initial state for animation\n        showBlocks.value = Array(filteredProjectedColumnOptions.value.length).fill(false);\n\n        for (let i = 0; i < filteredProjectedColumnOptions.value.length; i++) {\n            const column = filteredProjectedColumnOptions.value[i];\n            const histCol = selectedColumnGroup.value === \"mean\" ? \"Mean Temp\" : \"Max Temp\";\n            const combinedData = [\n                ...historicalData.value.map(d => ({\n                    year: +d.year,\n                    month: d.month,\n                    value: parseFloat(d[histCol]),\n                    source: \"historical\"\n                })),\n                ...projectedData.value.map(d => ({\n                    year: +d.year,\n                    month: d.month,\n                    value: parseFloat(d[column]),\n                    source: \"projected\"\n                }))\n            ];\n\n            renderUnifiedHeatmap(combinedData, heatmapRefs[column], column === filteredProjectedColumnOptions.value.at(-1));\n\n\n        }\n\n        // IntersectionObserver setup\n        observer.value = new IntersectionObserver((entries) => {\n            const entry = entries[0];\n            if (entry.isIntersecting && !hasAnimated.value) {\n                hasAnimated.value = true;\n\n                showBlocks.value = Array(filteredProjectedColumnOptions.value.length).fill(false);\n\n                for (let i = 0; i < filteredProjectedColumnOptions.value.length; i++) {\n                    setTimeout(() => {\n                        showBlocks.value[i] = true;\n\n                        //  Trigger message animation immediately when the block shows\n                        const wrapper = wrapperRef.value;\n                        const messages = wrapper.querySelectorAll('.cover-message');\n\n                        if (messages[i]) {\n                            messages[i].classList.add('sparked');\n                        }\n                    }, i * 250);\n\n                }\n            }\n        }, { threshold: 0.3 });\n\n        let toggleInterval = setInterval(() => {\n            legendInFahrenheit.value = !legendInFahrenheit.value;\n        }, 10000); // every 10 seconds\n\n        onBeforeUnmount(() => {\n            clearInterval(toggleInterval);\n        });\n\n\n        let resizeTimeout;\n        const handleResize = () => {\n            clearTimeout(resizeTimeout);\n            resizeTimeout = setTimeout(() => {\n                for (const column of filteredProjectedColumnOptions.value) {\n                    const histCol = selectedColumnGroup.value === \"mean\" ? \"Mean Temp\" : \"Max Temp\";\n                    const combinedData = [\n                        ...historicalData.value.map(d => ({\n                            year: +d.year,\n                            month: d.month,\n                            value: parseFloat(d[histCol]),\n                            source: \"historical\"\n                        })),\n                        ...projectedData.value.map(d => ({\n                            year: +d.year,\n                            month: d.month,\n                            value: parseFloat(d[column]),\n                            source: \"projected\"\n                        }))\n                    ];\n                    renderUnifiedHeatmap(combinedData, heatmapRefs[column], column === filteredProjectedColumnOptions.value.at(-1));\n                }\n            }, 1000);\n        };\n\n        window.addEventListener(\"resize\", handleResize);\n        onBeforeUnmount(() => {\n            window.removeEventListener(\"resize\", handleResize);\n        });\n\n    } catch (err) {\n        console.error(\"Error loading CSV data:\", err);\n    }\n\n    if (wrapperRef.value && observer.value) {\n        observer.value.observe(wrapperRef.value);\n    }\n    await nextTick(); // Ensure all covers are rendered\n    setTimeout(() => {\n        d3.selectAll('.spark-overlay')\n            .each(function () {\n                const svg = d3.select(this);\n                const sparkGroup = svg.append('g').attr('class', 'spark-group');\n                createSparks(sparkGroup, svg.node());\n            });\n    }, 100); // small delay just in case\n\n    observer.value = new IntersectionObserver(\n        ([entry]) => {\n            showTitle.value = entry.isIntersecting;\n        },\n        {\n            threshold: 0.1, // Adjust sensitivity\n        }\n    );\n\n    if (wrapperRef.value) {\n        observer.value.observe(wrapperRef.value);\n    }\n\n});\n\nwatch(showOverlay, (newVal) => {\n    if (newVal) {\n        nextTick(() => {\n            // Start Sparks animation when showOverlay is true\n            const wrapper = wrapperRef.value;\n            const messages = wrapper.querySelectorAll('.cover-message');\n\n            // Add 'sparked' class to cover messages\n            messages.forEach((msg) => {\n                msg.classList.add('sparked');\n            });\n\n            // Start sparks animation\n            startSparks(); // Start the spark effect\n        });\n    } else {\n        // Stop Sparks animation when showOverlay is false\n        stopSparks(); // Stop the spark effect\n    }\n});\n\n\n\nonBeforeUnmount(() => {\n    if (observer.value && wrapperRef.value) {\n        observer.value.unobserve(wrapperRef.value);\n    }\n    window.removeEventListener(\"resize\", renderUnifiedHeatmap);\n});\n\n</script>\n\n<style scoped>\n.title {\n    position: absolute;\n    bottom: 10rem;\n    right: 11.25rem;\n    font-size: 5rem;\n    color: #FF00003f;\n    text-transform: uppercase;\n    transform: rotate(90deg);\n    transform-origin: bottom right;\n}\n\n.top-bar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.5rem;\n    margin-right: 5.75rem;\n    /* gap: 2rem; */\n}\n\n/* \n.top-bar h3 {\n  margin: 0;\n  white-space: nowrap;\n}\n */\n.legend {\n    /* flex: 1; */\n    display: flex;\n    justify-content: center;\n}\n\n.control-container {\n    flex: none;\n}\n\n\n.temperature-wrapper {\n    position: relative;\n    height: 100vh;\n    width: 100vw;\n    display: flex;\n    flex-direction: column;\n    padding: 4rem 5rem 8rem 5rem;\n    box-sizing: border-box;\n    overflow: hidden;\n}\n\n.left-controls {\n    display: flex;\n    gap: 15px;\n}\n\n.radio-buttons,\n.overlay-toggle {\n    display: flex;\n    gap: 10px;\n}\n\ninput[type=\"radio\"] {\n    appearance: none;\n    -webkit-appearance: none;\n    background-color: #fff;\n    border: 2px solid #ccc;\n    border-radius: 50%;\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    position: relative;\n}\n\ninput[type=\"radio\"]:checked {\n    border-color: rgb(255, 0, 0);\n}\n\ninput[type=\"radio\"]:checked::before {\n    content: \"\";\n    position: absolute;\n    top: 2px;\n    left: 2px;\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: rgb(255, 0, 0);\n}\n\n.overlay-toggle.toggle-switch {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n.switch {\n    position: relative;\n    display: inline-block;\n    width: 26px;\n    height: 13px;\n}\n\n.switch input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n}\n\n.slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    transition: 0.2s;\n    border-radius: 34px;\n}\n\n.slider:before {\n    position: absolute;\n    content: \"\";\n    height: 10px;\n    width: 10px;\n    left: 2px;\n    /* Add slight left padding */\n    top: 50%;\n    /* Center vertically */\n    transform: translateY(-50%);\n    /* Perfect vertical centering */\n    background-color: white;\n    transition: 0.2s;\n    border-radius: 50%;\n}\n\n\ninput:checked+.slider {\n    background-color: rgb(255, 0, 0);\n}\n\n.switch input:checked+.slider:before {\n    transform: translate(12px, -50%);\n    /* horizontal move + keep vertical centering */\n}\n\n.legend-color-pair {\n    display: flex;\n    flex-direction: row;\n    ;\n}\n\n.legend-pairs {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 12px;\n}\n\n.legend-pair {\n    display: flex;\n    gap: 5px;\n    flex-direction: row;\n    align-items: center;\n}\n\n.legend-color {\n    width: 20px;\n    height: 20px;\n}\n\n\n.heatmap-container {\n    display: flex;\n    flex-direction: column;\n    gap: 0;\n    flex: 1;\n    height: 100%;\n    margin-top: 0;\n    /* Ensure no margin at the top */\n}\n\n.heatmap-block {\n    flex: 1;\n    height: 25%;\n    /* Ensure equal distribution of space */\n    width: 100%;\n    display: flex;\n    align-items: flex-start;\n    /* Align heatmaps at the top */\n    justify-content: center;\n    margin-top: 0;\n    /* Remove any margin pushing the blocks down */\n    opacity: 0;\n    transform: translateY(20px);\n    transition: opacity 0s linear, transform 0s linear;\n}\n\n.heatmap-block.visible {\n    opacity: 1;\n    transform: translateY(0);\n}\n\n.heatmap-visual {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: flex-start;\n}\n\n.heatmap-cover {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 2;\n    transition: opacity 0.3s ease;\n    pointer-events: auto;\n    cursor: pointer;\n}\n\n.heatmap-block .heatmap-cover {\n    height: calc(100% - 30px);\n    width: calc(100% - 90px);\n}\n\n.heatmap-cover.hidden {\n    opacity: 0;\n    pointer-events: none;\n}\n\n.cover-message {\n    opacity: 0;\n    transform: scale(0.9);\n    transition: opacity 0s linear, transform 0s linear;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    gap: 1rem;\n    align-items: center;\n}\n\n.cover-message.sparked {\n    opacity: 1;\n}\n\n.cover-headings,\n.cover-paragraph {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n}\n\n.x-axis {\n    font-size: 0.75em;\n}\n\n.y-axis {\n    font-size: 0.75em;\n}\n\n.heatmap-block:nth-child(2),\n.heatmap-block:nth-child(3),\n.heatmap-block:nth-child(4) {\n    margin-top: -25px;\n}\n\n.heatmap-block:nth-child(4) .heatmap-cover {\n    background-color: rgb(102, 0, 0);\n}\n\n.heatmap-block:nth-child(3) .heatmap-cover {\n    background-color: rgb(153, 0, 0);\n}\n\n.heatmap-block:nth-child(2) .heatmap-cover {\n    background-color: rgb(204, 0, 0);\n}\n\n.heatmap-block:nth-child(1) .heatmap-cover {\n    background-color: rgb(255, 0, 0);\n}\n\nh4 {\n    text-align: left;\n    text-transform: uppercase;\n    font-size: 60px;\n    margin: 0;\n    font-weight: 300;\n    line-height: 1;\n}\n\nh5 {\n    padding-top: 0.25rem;\n    text-align: left;\n    font-size: 28px;\n    font-weight: 300;\n    margin: 0;\n    line-height: 1.25;\n}\n\nh6 {\n    padding-top: 0.25rem;\n    text-align: left;\n    font-weight: 300;\n    font-size: 24px;\n    margin: 0;\n}\n\np {\n    font-size: 22px;\n    margin: 0;\n    text-align: left;\n    font-weight: 400;\n}\n\n.spark-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.spark-overlay {\n    pointer-events: none;\n    z-index: 2;\n    /* On top of cover */\n}\n\n.heatmap-cover {\n    z-index: 1;\n}\n</style>","import script from \"./MeanTemperature.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MeanTemperature.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MeanTemperature.vue?vue&type=style&index=0&id=4f830f5c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4f830f5c\"]])\n\nexport default __exports__","<template>\n  <div class=\"sheep-cattle-herds\" ref=\"herdArea\">\n    <!-- Background canvas -->\n    <canvas class=\"background-canvas\" ref=\"noiseCanvas\"></canvas>\n    <div class=\"graphic-title\" ref=\"graphicTitle\">\n      <h3>Pasture Panic</h3>\n    </div>\n    <!-- White padded boundary -->\n    <div class=\"herd-padding-wrapper\">\n      <div class=\"herd-text\" ref=\"herdText\" :class=\"{ 'visible': textStage !== 'initial' }\">\n        <div class=\"title-row\" v-if=\"textStage === 'reducing'\">\n          <h4>2014</h4>\n          <h5>The Grazeful Era</h5>\n        </div>\n        <div class=\"title-row\" v-else-if=\"textStage === 'complete'\">\n          <h4>2025</h4>\n          <h5>Desperately Seeking Grass</h5>\n        </div>\n        <p v-if=\"textStage === 'reducing'\">\n          Imagine a herd of sheep and cattle, grazing peacefully in the fields of Morocco.\n        </p>\n        <div v-else-if=\"textStage === 'complete'\">\n          <p>\n            According to official figures, Morocco's cattle and sheep herds have decreased\n            by 38% in 2025 since the last census nine years ago, in 2014, due to consecutive\n            droughts.</p>\n<!--           <p>\n            And with Morocco in the sixth year of the drought, the Moroccan government has even\n            asked its citizens not to slaughter sheep for the upcoming holiday Eid al-Adha.\n          </p> -->\n        </div>\n      </div>\n\n      <!-- Visual placement zone -->\n      <div class=\"herd-visual-area\" ref=\"herdVisual\">\n        <img v-for=\"(animal) in displayedHerd\" :key=\"animal.id\" :src=\"require(`@/assets/herds/${animal.src}`)\"\n          class=\"herd-image\" :style=\"animal.style\" />\n      </div>\n      <div class=\"background-overlay\" :style=\"{ backgroundColor: backgroundTransitionColor }\" />\n      <!-- Text display instead of SVG -->\n      <div class=\"countdown-container\">\n        <p class=\"countdown-text\">{{ finalPercentage }}%</p>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      herd: [],\n      displayedHerd: [],\n      animalTypes: [\n        \"black-speckle-cow.png\",\n        \"brown-cow.png\",\n        \"brown-ram.png\",\n        \"brown-sheep.png\",\n        \"brown-speckle-cow.png\",\n        \"gray-cow.png\",\n        \"white-ram-2.png\",\n        \"white-sheep-2.png\",\n      ],\n      observer: null,\n      hasReduced: false,\n      textStage: 'initial', // 'initial', 'reducing', 'complete'\n      finalPercentage: 100, // Add this property to control the percentage\n    };\n  },\n\n  mounted() {\n    this.generateHerd();\n    this.setupIntersectionObserver();\n    this.$nextTick(() => {\n      this.drawBackgroundNoise();\n    });\n  },\n\n  watch: {\n    textStage() {\n      this.$nextTick(() => {\n        this.drawBackgroundNoise();\n      });\n    }\n  },\n\n  beforeUnmount() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  },\n  computed: {\n    backgroundTransitionColor() {\n      // Interpolate between green and brown\n      const pct = (100 - this.finalPercentage) / (100 - 62);\n      const r = Math.round(217 + pct * (245 - 217)); // d9 -> f5\n      const g = Math.round(240 + pct * (240 - 240)); // f0 -> f0\n      const b = Math.round(217 + pct * (225 - 217)); // d9 -> e1\n      return `rgb(${r},${g},${b})`;\n    }\n  },\n  methods: {\n    generateHerd() {\n      let idCounter = 0;\n      this.herd = [];\n\n      // 4 types get 13, 4 types get 12\n      const animalCounts = [13, 13, 13, 13, 12, 12, 12, 12];\n\n      this.animalTypes.forEach((type, i) => {\n        for (let j = 0; j < animalCounts[i]; j++) {\n          this.herd.push({ id: idCounter++, src: type });\n        }\n      });\n\n      // Delay placement to ensure layout is ready\n      this.$nextTick(() => {\n        setTimeout(() => {\n          this.placeAnimals();\n        }, 50);\n      });\n    },\n    placeAnimals() {\n      const visualArea = this.$refs.herdVisual;\n      const textBox = this.$refs.herdText;\n      const areaRect = visualArea.getBoundingClientRect();\n      const textRect = textBox.getBoundingClientRect();\n      const titleBox = this.$refs.graphicTitle;\n      const titleRect = titleBox.getBoundingClientRect();\n\n      const maxWidth = areaRect.width;\n      const maxHeight = areaRect.height;\n\n      const animalSize = 100; // size of .herd-image (width/height)\n      const padding = 5;\n      const cellSize = animalSize + padding;\n\n      const textLeft = textRect.left - areaRect.left;\n      const textTop = textRect.top - areaRect.top;\n      const titleLeft = titleRect.left - areaRect.left;\n      const titleTop = titleRect.top - areaRect.top;\n\n      const exclusionZones = [\n        {\n          left: textLeft - 10,\n          top: textTop - 10,\n          right: textLeft + textRect.width - 100,\n          bottom: textTop + textRect.height + 10,\n        },\n        {\n          left: titleLeft - 50,\n          top: titleTop - 10,\n          right: titleLeft + titleRect.width + 10,\n          bottom: titleTop + titleRect.height + 10,\n        },\n      ];\n\n      const cols = Math.floor(maxWidth / cellSize);\n      const rows = Math.floor(maxHeight / cellSize);\n      const grid = [];\n\n      for (let y = 0; y < rows; y++) {\n        for (let x = 0; x < cols; x++) {\n          const posX = x * cellSize + cellSize / 2;\n          const posY = y * cellSize + cellSize / 2;\n\n          // Check if inside text bounds\n          const overlapsText = exclusionZones.some(zone =>\n            posX + animalSize / 2 > zone.left &&\n            posX - animalSize / 2 < zone.right &&\n            posY + animalSize / 2 > zone.top &&\n            posY - animalSize / 2 < zone.bottom\n          );\n\n          if (!overlapsText) {\n            grid.push({ x: posX, y: posY });\n          }\n        }\n      }\n\n      // Shuffle grid positions\n      for (let i = grid.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [grid[i], grid[j]] = [grid[j], grid[i]];\n      }\n\n      const positioned = this.herd.map((animal, i) => {\n        const pos = grid[i];\n        return {\n          ...animal,\n          style: {\n            position: \"absolute\",\n            left: `${pos.x - animalSize / 15}px`,\n            top: `${pos.y - animalSize / 15}px`,\n          },\n        };\n      });\n\n      this.displayedHerd = positioned;\n    },\n\n    reduceHerd() {\n      const totalToRemove = Math.floor(this.herd.length * 0.38); // 38% of the original herd\n      let remainingToRemove = totalToRemove;\n\n      const interval = setInterval(() => {\n        if (remainingToRemove <= 0 || this.displayedHerd.length <= 0) {\n          clearInterval(interval);\n\n          // When reduction is done, move to the final stage\n          this.textStage = 'complete';\n          return;\n        }\n\n        // Remove one animal at a time\n        this.displayedHerd.splice(Math.floor(Math.random() * this.displayedHerd.length), 1);\n        remainingToRemove--;\n\n        // Update the percentage accordingly\n        const remainingPercent = Math.round((this.displayedHerd.length / this.herd.length) * 100);\n        this.finalPercentage = Math.max(remainingPercent, 62); // Dont go below 62%\n      }, 250);\n    },\n\n    startCountdown() {\n      const interval = setInterval(() => {\n        if (this.finalPercentage > 62) {\n          this.finalPercentage -= 1; // Decrease the percentage by 1 each interval\n        } else {\n          this.finalPercentage = 62; // Ensure it stays at 62% when reached\n          clearInterval(interval); // Stop the countdown when it reaches 62%\n        }\n      }, 50); // Update every 50ms (for a smoother animation)\n    },\n\n    drawBackgroundNoise() {\n      const canvas = this.$refs.noiseCanvas;\n      const ctx = canvas.getContext('2d');\n      const dpr = window.devicePixelRatio || 1;\n\n      const width = this.$refs.herdArea.offsetWidth;\n      const height = this.$refs.herdArea.offsetHeight;\n\n      canvas.width = width * dpr;\n      canvas.height = height * dpr;\n      canvas.style.width = `${width}px`;\n      canvas.style.height = `${height}px`;\n      ctx.scale(dpr, dpr);\n\n      //  or : Determine background and blade color based on stage\n      const stage = this.textStage;\n      console.log(\"Drawing background for stage:\", stage); // Debugging\n\n      const isReducing = stage === 'reducing';\n\n      //  Green for initial, dry brown for reducing\n      canvas.style.backgroundColor = isReducing ? '#d9f0d9' : '#f5f0e1';\n\n      const bladeCount = 10000;\n      for (let i = 0; i < bladeCount; i++) {\n        const x = Math.random() * width;\n        const y = Math.random() * height;\n\n        const length = 8 + Math.random() * 12;\n        const angle = (-Math.PI / 2) + (Math.random() - 0.5) * 0.6;\n        const xEnd = x + length * Math.cos(angle);\n        const yEnd = y + length * Math.sin(angle);\n\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(xEnd, yEnd);\n\n        ctx.strokeStyle = isReducing\n          ? `rgba(70, 120, 70, ${0.02 + Math.random() * 0.4})` // green-ish\n          : `rgba(139, 69, 19, ${0.04 + Math.random() * 0.3})`; // brown-ish\n\n        ctx.lineWidth = 1;\n        ctx.stroke();\n      }\n    },\n\n    resetAndAnimate() {\n      // Reset all reactive states\n      this.hasReduced = false;\n      this.textStage = 'initial';\n      this.finalPercentage = 100;\n      this.displayedHerd = [];\n\n      this.generateHerd(); // Regenerate the herd and place animals\n      this.$nextTick(() => {\n        this.drawBackgroundNoise();\n\n        // Small delay to allow \"initial\" visuals before starting reduction\n        setTimeout(() => {\n          this.textStage = 'reducing';\n          this.reduceHerd();\n        }, 1000);\n      });\n    },\n    setupIntersectionObserver() {\n      this.observer = new IntersectionObserver(\n        (entries) => {\n          entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n              this.resetAndAnimate();\n\n              if (!this.hasReduced) {\n                this.hasReduced = true;\n                this.textStage = 'reducing'; //  Set middle message when herd starts reducing\n              }\n            }\n          });\n        },\n        {\n          threshold: 0.1, // Trigger when 10% of the component is visible\n        }\n      );\n\n      this.observer.observe(this.$refs.herdArea);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.graphic-title {\n  position: absolute;\n  bottom: 0;\n  right: 2rem;\n  z-index: 2;\n  font-size: 5em;\n  color: #8a6e003f;\n  text-transform: uppercase;\n}\n\n.graphic-title h3 {\n  font-weight: 800;\n}\n\nh4 {\n  text-transform: uppercase;\n  font-size: 60px;\n  line-height: 1;\n  font-weight: 300;\n}\n\nh5 {\n  text-align: left;\n  font-size: 28px;\n  font-weight: 300;\n}\n\np {\n  font-size: 22px;\n  font-weight: 400;\n}\n\n.title-row {\n  display: flex;\n  gap: 0.5rem;\n  align-items: baseline; /* keeps the baseline of text aligned nicely */\n}\n.title-row h4,\n.title-row h5 {\n  margin: 0;\n}\n\n.sheep-cattle-herds {\n  position: relative;\n  width: calc(100vw - 11rem);\n  height: calc(100vh - 10rem - 20px);\n  overflow: hidden;\n}\n\n.background-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n  /* Background canvas stays at the bottom */\n  width: 100%;\n  height: 100%;\n}\n\n.herd-padding-wrapper {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  z-index: 2;\n  /* Place the padded area above the background */\n}\n\n.herd-text {\n  width: 30%;\n  margin: 0 auto;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 1s ease, visibility 1s ease;\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding-top: 15px;\n  padding-left: 20px;\n  z-index: 3;\n  text-align: left;\n}\n\n.herd-text.visible {\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg-container {\n  transition: opacity 1s ease;\n  position: absolute;\n  top: 20%;\n  /* Adjust the position relative to the text */\n  left: 50%;\n  /* Center horizontally */\n  transform: translateX(-50%);\n  /* Center horizontally */\n  opacity: 1;\n  /* Adjust opacity for visibility */\n  z-index: 2;\n  /* Ensure the SVG appears above the background, but below the herd images */\n  width: 95%;\n  /* Set width to desired value */\n  opacity: 0.75;\n}\n\n.herd-visual-area {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 3;\n  /* Ensure the herd images are above the SVG */\n}\n\n.herd-image {\n  object-fit: contain;\n  position: absolute;\n  transition: transform 0.5s ease, opacity 0.5s ease;\n  width: 100px;\n}\n\n.countdown-container {\n  position: absolute;\n  top: 10%;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 2rem;\n  color: darkgreen;\n  z-index: 2;\n  /* Ensures it is above everything */\n}\n\n.countdown-text {\n  opacity: 0.10;\n  transition: none;\n  text-align: center;\n  font-weight: 700;\n  font-size: 30ch;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.background-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0.5;\n  z-index: 1;\n  /* Above canvas, below everything else */\n  transition: background-color 1s linear;\n  pointer-events: none;\n}\n\n/* @media screen and (min-width: 1901px) {\n  .herd-image {\n    width: 100px;\n    height: 100px;\n  }\n\n}\n\n@media screen and (max-width: 1900px) and (min-width: 1001px) {\n  .herd-image {\n    width: 70px;\n    height: 70px;\n  }\n\n  .countdown-text {\n    font-size: 20ch;\n  }\n}\n\n@media screen and (max-width: 1000px) {\n  .herd-image {\n    width: 50px;\n    height: 50px;\n  }\n\n  .countdown-text {\n    font-size: 10ch;\n  }\n} */\n</style>\n","import { render } from \"./SheepCattleHerds.vue?vue&type=template&id=20234c6e&scoped=true\"\nimport script from \"./SheepCattleHerds.vue?vue&type=script&lang=js\"\nexport * from \"./SheepCattleHerds.vue?vue&type=script&lang=js\"\n\nimport \"./SheepCattleHerds.vue?vue&type=style&index=0&id=20234c6e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20234c6e\"]])\n\nexport default __exports__","<template>\n  <div ref=\"container\" class=\"land-ploughed-wheat\" :style=\"backgroundStyle\">\n    <!-- Base Message Block -->\n    <div class=\"phase-pair phase-pair-base visible\" :class=\"{ 'fade-in': firstPhaseStarted }\">\n      <div class=\"phase-content\">\n        <div class=\"text-block column-block\">\n          <h4 class=\"base-title\">The Feast Before the Flame</h4>\n          <h5 class=\"subtitle subtitle-base\">Average wheat tonnage and hectares of land from 20142019</h5>\n          <h6 class=\"subtitle subtitle-base\">When rains were kind and wheat flowed freely.</h6>\n          <div class=\"phase-message phase-message-base\"></div>\n        </div>\n        <div class=\"text-block row-block\">\n          <h4 class=\"wheat-number\">{{ shownWheatBase }}</h4>\n          <p>ten thousand <br>tons of wheat</p>\n          <h4 class=\"land-number\">299</h4>\n          <p>ten thousand <br>hectares</p>\n        </div>\n      </div>\n      <div class=\"wheat-field\">\n        <div class=\"wheat-grid wheat-grid-base\">\n          <img v-for=\"index in wheatBaseArray.slice(0, shownWheatBase)\" :key=\"'base-' + index\"\n            :src=\"require(`@/assets/wheat/wheat-base.svg`)\" alt=\"Wheat\"\n            :style=\"{ width: imageSize + 'px', height: 'auto' }\" />\n        </div>\n        <div class=\"graphic-title\">\n          <h3>Wheat Drop</h3>\n        </div>\n      </div>\n    </div>\n\n    <!-- Phase 1 Message Block -->\n    <div class=\"phase-pair phase-pair-88\" :class=\"{ 'fade-in': firstPhaseStarted }\">\n      <div class=\"phase-content\">\n        <div class=\"text-block column-block\">\n          <h4 class=\"title title-88\">Scorched Rhythm</h4>\n          <h5 class=\"subtitle subtitle-88\">2019 through 2024 average wheat tonnage and hectares of land</h5>\n          <h6 class=\"subtitle subtitle-88\">Drought tested our resolve, but the harvest held.</h6>\n          <div class=\"phase-message phase-message-88\"></div>\n        </div>\n        <div class=\"text-block row-block\">\n          <h4 class=\"wheat-number\">{{ shownWheat69 }}</h4>\n          <p>ten thousand <br>tons of wheat</p>\n          <h4 class=\"land-number\">{{ landValue88 }}</h4>\n          <p>ten thousand <br>hectares</p>\n        </div>\n      </div>\n      <div class=\"wheat-field\">\n        <div class=\"wheat-grid wheat-grid-69\">\n          <img v-for=\"index in wheat69Array.slice(0, shownWheat69)\" :key=\"'69-' + index\"\n            :src=\"require(`@/assets/wheat/wheat-69.svg`)\" alt=\"Wheat-69\"\n            :style=\"{ width: imageSize + 'px', height: 'auto' }\" />\n        </div>\n      </div>\n      <div class=\"graphic-title\">\n        <h3>Wheat Drop</h3>\n      </div>\n    </div>\n\n    <!-- Phase 2 Message Block -->\n    <div class=\"phase-pair phase-pair-74\" :class=\"{ 'fade-in': secondPhaseStarted }\">\n      <div class=\"phase-content\">\n        <div class=\"text-block column-block\">\n          <h4 class=\"title title-74\">Echoes of a Vanished Spring</h4>\n          <h5 class=\"subtitle subtitle-74\">The wheat yield and land usage for 2025</h5>\n          <h6 class=\"subtitle subtitle-74\">A sudden drop  the fields rest, the future waits.</h6>\n          <div class=\"phase-message phase-message-74\"></div>\n        </div>\n        <div class=\"text-block row-block\">\n          <h4 class=\"wheat-number\">{{ shownWheat41 }}</h4>\n          <p>ten thousand <br>tons of wheat</p>\n          <h4 class=\"land-number\">{{ landValue74 }}</h4>\n          <p>ten thousand <br>hectares</p>\n        </div>\n      </div>\n      <div class=\"wheat-field\">\n        <div class=\"wheat-grid wheat-grid-41\">\n          <img v-for=\"index in wheat41Array.slice(0, shownWheat41)\" :key=\"'41-' + index\"\n            :src=\"require(`@/assets/wheat/wheat-41.svg`)\" alt=\"Wheat-41\"\n            :style=\"{ width: imageSize + 'px', height: 'auto' }\" />\n        </div>\n      </div>\n      <div class=\"graphic-title graphic-title-41\">\n        <h3>Wheat<br>Drop</h3>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  data() {\n    return {\n      firstPhaseStarted: false,\n      secondPhaseStarted: false,\n      imageSize: 70,\n      wheatBaseCount: 607,\n      wheat69Count: 420,\n      wheat41Count: 246,\n      shownWheatBase: 0,  // << ADD THIS\n      shownWheat69: 0,\n      shownWheat41: 0,\n      landValue88: 299, // Will count down to 262\n      landValue74: 262,  // Will count down to 220\n      backgroundStyle: {\n        backgroundColor: '#d9f0d9',\n        transition: 'background-color 1s ease'\n      }\n    };\n  },\n\n  computed: {\n    wheatBaseArray() {\n      return Array.from({ length: this.wheatBaseCount }, (_, i) => i + 1);\n    },\n    wheat69Array() {\n      return Array.from({ length: this.wheat69Count }, (_, i) => i + 1);\n    },\n    wheat41Array() {\n      return Array.from({ length: this.wheat41Count }, (_, i) => i + 1);\n    }\n  },\n\n\n  beforeUnmount() {\n    window.removeEventListener('resize', this.updateImageSize);\n  },\n\n  mounted() {\n    this.updateImageSize();\n    window.addEventListener('resize', this.updateImageSize);\n    this.logWheatCounts();\n    this.observeIntersection();\n  },\n\n  methods: {\n    updateImageSize() {\n      const containerWidth = window.innerWidth - 200;\n      const containerHeight = window.innerHeight - 200;\n      const totalWheats = this.wheatBaseCount;\n      const gridCols = Math.ceil(Math.sqrt(totalWheats));\n      const imageMaxWidth = containerWidth / gridCols;\n      const imageMaxHeight = containerHeight / gridCols;\n      this.imageSize = Math.floor(Math.min(imageMaxWidth, imageMaxHeight, 80));\n    },\n\n    observeIntersection() {\n      const observer = new IntersectionObserver(\n        (entries) => {\n          if (entries[0].isIntersecting) {\n            this.animateSections();\n          }\n          if (entries[0].isIntersecting) {\n            this.restartAnimations();\n          }\n        },\n        { threshold: 0.5 }\n      );\n      observer.observe(this.$refs.container);\n    },\n    animateSections() {\n      setTimeout(() => {\n        this.backgroundStyle.backgroundColor = '#f5f0e1';\n        setTimeout(() => {\n          console.time('Wheat Base Growth');\n          this.incrementShownWheatBase(() => {\n            console.timeEnd('Wheat Base Growth');\n\n            setTimeout(() => {\n              this.firstPhaseStarted = true;\n              this.countDownLand88(); //  Trigger countdown to 262\n\n              this.incrementShownWheat69(() => {\n                console.timeEnd('Wheat 69 Growth');\n\n                setTimeout(() => {\n                  this.secondPhaseStarted = true;\n                  this.countDownLand74(); //  Trigger countdown to 220\n\n                  this.incrementShownWheat41(() => {\n                    console.timeEnd('Wheat 41 Growth');\n                  });\n                }, 2000);\n              });\n            }, 2000);\n          });\n        }, 1000);\n      }, 1000);\n    },\n\n    restartAnimations() {\n      // Reset state\n      this.shownWheatBase = 0;\n      this.shownWheat69 = 0;\n      this.shownWheat41 = 0;\n      this.firstPhaseStarted = false;\n      this.secondPhaseStarted = false;\n\n      // Optional: reset background color immediately\n      this.backgroundStyle.backgroundColor = '#d9f0d9';\n\n      // Restart animation chain\n      this.animateSections();\n    },\n\n    // Increment functions\n\n    incrementShownWheatBase(callback) {\n      const interval = setInterval(() => {\n        if (this.shownWheatBase < this.wheatBaseCount) {\n          this.shownWheatBase++;\n        } else {\n          clearInterval(interval);\n          if (callback) callback();\n        }\n      }, 5);\n    },\n\n    incrementShownWheat69(callback) {\n      const interval = setInterval(() => {\n        if (this.shownWheat69 < this.wheat69Count) {\n          this.shownWheat69++;\n        } else {\n          clearInterval(interval);\n          if (callback) callback();\n        }\n      }, 5);\n    },\n\n    incrementShownWheat41(callback) {\n      const interval = setInterval(() => {\n        if (this.shownWheat41 < this.wheat41Count) {\n          this.shownWheat41++;\n        } else {\n          clearInterval(interval);\n          if (callback) callback();\n        }\n      }, 5);\n    },\n\n    countDownLand88() {\n      const target = 262;\n      const interval = setInterval(() => {\n        if (this.landValue88 > target) {\n          this.landValue88--;\n        } else {\n          clearInterval(interval);\n        }\n      }, 20);\n    },\n\n    countDownLand74() {\n      const target = 220;\n      const interval = setInterval(() => {\n        if (this.landValue74 > target) {\n          this.landValue74--;\n        } else {\n          clearInterval(interval);\n        }\n      }, 20);\n    },\n\n\n    logWheatCounts() {\n      console.log(`Base Wheat Count: ${this.wheatBaseCount} wheat-base.svg images in phase-pair-base`);\n      console.log(`Wheat-69 Count: ${this.wheat69Count} wheat-69.svg images in phase-pair-88`);\n      console.log(`Wheat-41 Count: ${this.wheat41Count} wheat-41.svg images in phase-pair-74`);\n    }\n  }\n};\n</script>\n\n\n<style scoped>\n.graphic-title {\n  position: absolute;\n  bottom: 1rem;\n  right: 6rem;\n  font-size: 5em;\n  color: #B28F042f;\n  text-transform: uppercase;\n  line-height: 0.9;\n  transform: rotate(90deg);\n  transform-origin: bottom right;\n  z-index: 20;\n  pointer-events: none;\n  text-align: right;\n}\n\nh4 {\n  text-align: left;\n  text-transform: uppercase;\n  font-size: 60px;\n  margin: 0;\n  font-weight: 300;\n  line-height: 1;\n}\n\nh5 {\n  text-align: left;\n  font-size: 28px;\n  font-weight: 300;\n  margin: 0;\n  line-height: 1.25;\n}\n\nh6 {\n  padding-top: 0.25rem;\n  text-align: left;\n  font-weight: 300;\n  font-size: 24px;\n  margin: 0;\n}\n\n.graphic-title h3 {\n  font-weight: 800;\n}\n\n.phase-pair-74 .graphic-title-41 {\n  position: absolute;\n  bottom: 1rem;\n  right: 11rem;\n  color: #f5f0e14f;\n}\n\n.graphic-title-41 {\n  margin-right: 5px;\n}\n\n.land-ploughed-wheat {\n  position: relative;\n  width: calc(100vw - 12rem);\n  height: calc(100vh - 13rem);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  padding: 0.5rem;\n  box-sizing: border-box;\n}\n\n.phase-pair.visible {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n/* Add fade-in animation */\n.fade-in {\n  opacity: 1 !important;\n  transform: translateY(0) !important;\n}\n\n.phase-pair {\n  text-align: left;\n  position: absolute;\n  left: 0;\n  width: 100%;\n  opacity: 0;\n  transform: translateY(-50px);\n  transition: opacity 1s ease-out, transform 1s ease-out, z-index 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  box-sizing: border-box;\n  height: 100%;\n}\n\n.text-block {\n  padding: 5px 10px;\n}\n\n.phase-content {\n  display: flex;\n  flex-direction: row;\n  padding-top: 5px;\n}\n\n/* first text-block: flex column */\n.column-block {\n  margin-left: 5px;\n  width: 50%;\n  display: flex;\n  flex-direction: column;\n}\n\n/* second text-block: flex row */\n.row-block {\n  width: 50%;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  text-align: right;\n  font-size: 22px;\n  font-weight: 400;\n  margin-right: 5px;\n}\n\n.row-block p {\n  padding-left: 10px;\n}\n\n.phase-pair-base .row-block p,\n.phase-pair-base .row-block h4 {\n  color: #A67A05;\n  /* color: #FF8000; */\n}\n\n.phase-pair-88 .row-block p,\n.phase-pair-88 .row-block h4 {\n  color: #D09910;\n  /* color: #FF8000; */\n}\n\n.phase-pair-74 .row-block p,\n.phase-pair-74 .row-block h4 {\n  color: white;\n  /* color: #820747; */\n}\n\n.wheat-number,\n.land-number {\n  line-height: 1em;\n  margin: 0;\n  margin-left: 10px;\n}\n\n.phase-pair-base:hover {\n  z-index: 10;\n  background-color: #f5f0e1;\n}\n\n.phase-pair:hover {\n  z-index: 10;\n}\n\n.phase-pair-base {\n  top: 0;\n  height: 100%;\n}\n\n.phase-pair-88 {\n  top: 12%;\n  background-color: #e2d3b4;\n  height: 88%;\n}\n\n.phase-pair-74 {\n  top: 26%;\n  background-color: #d4bb97;\n  height: 74%;\n}\n\n.wheat-field {\n  padding-left: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n  padding-bottom: 1rem;\n  position: relative;\n}\n\n.wheat-grid {\n  position: relative;\n  display: flex;\n  flex-wrap: wrap-reverse;\n  align-items: flex-end;\n  align-content: flex-end;\n  height: 100%;\n  justify-content: space-evenly;\n  max-width: 100%;\n}\n\n.wheat-grid img {\n  position: relative;\n  z-index: 1;\n  padding-top: 5px;\n}\n\nimg.hidden {\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n.wheat-grid-base,\n.wheat-grid-69 {\n  padding-right: 6rem;\n}\n\n.wheat-grid-41 {\n  padding-right: 11.5rem;\n}\n</style>\n","import { render } from \"./LandPloughedWheat.vue?vue&type=template&id=d5d18be4&scoped=true\"\nimport script from \"./LandPloughedWheat.vue?vue&type=script&lang=js\"\nexport * from \"./LandPloughedWheat.vue?vue&type=script&lang=js\"\n\nimport \"./LandPloughedWheat.vue?vue&type=style&index=0&id=d5d18be4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d5d18be4\"]])\n\nexport default __exports__","<template>\n  <div class=\"container\" ref=\"componentRoot\">\n    <h3 class=\"main-title\" v-if=\"isVisible\">Zooming Into Risk</h3>\n    <div class=\"content\">\n\n      <!-- Leaflet Map -->\n      <div class=\"map-container\">\n        <l-map ref=\"map\" v-model:zoom=\"zoom\" :center=\"[20, 0]\" :zoom-control=\"false\">\n          <l-geo-json :geojson=\"geoJsonData\" :options-style=\"geoJsonStyle\" :options=\"geoJsonOptions\">\n            <template #popup=\"{ feature }\">\n              <l-popup>\n                <strong>{{ feature.properties.name }}</strong><br>\n                Risk Level: {{ feature.properties[riskColumn.value] || \"N/A\" }}\n              </l-popup>\n            </template>\n          </l-geo-json>\n        </l-map>\n      </div>\n\n      <!-- Radio Filters -->\n      <div class=\"filter-controls\" v-if=\"isVisible\">\n        <div class=\"radio-group\">\n          <label>\n            <input type=\"radio\" v-model=\"riskColumn\" value=\"inform_risk\" />\n            INFORM Risk Index\n          </label>\n          <div class=\"descriptor\">A score that measures how likely a country is to face crises and how much help it\n            might\n            need, based on three factors: Hazards & Exposure, Vulnerability, and Lack of Coping Capacity.</div>\n        </div>\n\n        <div class=\"radio-group\">\n          <label>\n            <input type=\"radio\" v-model=\"riskColumn\" value=\"hazard_and_exposure\" />\n            Hazard & Exposure\n          </label>\n          <div class=\"descriptor\">How much danger a country faces from storms, floods, earthquakes, and other events.\n          </div>\n        </div>\n\n        <div class=\"radio-group\">\n          <label>\n            <input type=\"radio\" v-model=\"riskColumn\" value=\"vulnerability\" />\n            Vulnerability\n          </label>\n          <div class=\"descriptor\">How badly people and places could be hurt when disasters happen.</div>\n        </div>\n\n        <div class=\"radio-group\">\n          <label>\n            <input type=\"radio\" v-model=\"riskColumn\" value=\"lack_of_coping_capacity\" />\n            Lack of Coping Capacity\n          </label>\n          <div class=\"descriptor\">How ready a country is to handle emergencies and help its people.</div>\n        </div>\n      </div>\n\n\n      <!-- INFORM Risk Index Chart -->\n      <div class=\"chart-container\" v-if=\"isVisible\" v-show=\"selectedCountries.length > 0\">\n        <button class=\"reset-button\" @click=\"deselectAllCountries\">X</button>\n        <div class=\"column-info\"></div>\n        <div id=\"INFORM-chart\" class=\"multi-chart-container\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref, watch, onBeforeUnmount } from \"vue\";\nimport * as d3 from \"d3\";\nimport \"leaflet/dist/leaflet.css\";\nimport { LMap, LGeoJson, LPopup } from \"@vue-leaflet/vue-leaflet\";\n\nconst zoom = ref(3);\nconst geoJsonData = ref(null);\nconst chartData = ref([]);\nconst sortMethod = ref(\"alphabetical\");\nconst riskColumn = ref(\"inform_risk\");\nconst windowWidth = ref(window.innerWidth);\nconst selectedCountries = ref([]);\nconst ultimateBarHeight = 40;\n\nlet riskData = [];\n\nconst geoJsonOptions = {\n  onEachFeature: (feature, layer) => {\n    layer.on({\n      click: (e) => {\n        handleCountryClick(e, feature);\n        layer.bringToFront(); //  This brings the clicked layer to the front\n      }\n    });\n  }\n};\n\nconst handleCountryClick = (event, feature) => {\n  const countryName = feature.properties.SOVEREIGNT;\n  const alreadySelectedIndex = selectedCountries.value.findIndex(\n    (c) => c.properties.SOVEREIGNT === countryName\n  );\n\n  if (alreadySelectedIndex !== -1) {\n    // Deselect the country\n    selectedCountries.value.splice(alreadySelectedIndex, 1);\n  } else {\n    if (selectedCountries.value.length >= 10) {\n      alert(\"You can only select up to 10 countries.\");\n      return;\n    }\n    selectedCountries.value.push(feature);\n  }\n\n  geoJsonData.value = { ...geoJsonData.value }; // trigger reactivity\n\n  if (selectedCountries.value.length === 0) {\n    createChart(chartData.value);\n  } else if (selectedCountries.value.length === 1) {\n    createCountryCharts(selectedCountries.value.map(c => c.properties));\n  } else {\n    createMultiCountryCharts(selectedCountries.value.map(c => c.properties));\n  }\n\n  console.log(\"Selected countries:\", selectedCountries.value.map(f => f.properties.SOVEREIGNT));\n};\n\nconst createCountryCharts = (countries) => {\n  d3.select(\"#INFORM-chart\").selectAll(\"svg\").remove();\n  countries.forEach(country => {\n    createCountryChart(country);\n  });\n};\n\nconst handleResize = () => {\n  windowWidth.value = window.innerWidth;\n\n  if (selectedCountries.value.length === 1) {\n    createCountryCharts(selectedCountries.value.map(c => c.properties));\n  } else if (selectedCountries.value.length > 1) {\n    createMultiCountryCharts(selectedCountries.value.map(c => c.properties));\n  }\n};\n\nconst colorScale = d3.scaleThreshold()\n  .domain([0, 2, 4, 6, 8, 10])\n  .range([\"white\", \"#7FFF00\", \"#FFFF00\", \"#FF8000\", \"#FF0000\", \"#820747\", \"#D3D3D3\"]);\n\nconst geoJsonStyle = (feature) => {\n  const riskValue = feature.properties[riskColumn.value];\n  const isSelected = selectedCountries.value.some(\n    (c) => c.properties.SOVEREIGNT === feature.properties.SOVEREIGNT\n  );\n  return {\n    fillColor: riskValue !== null && riskValue !== undefined ? colorScale(riskValue) : \"#D3D3D3\",\n    weight: isSelected ? 5 : 2,\n    opacity: 1,\n    color: isSelected ? \"#089c9d\" : \"#089c9d\",\n    fillOpacity: 1\n  };\n};\n\nconst loadGeoJsonMap = async () => {\n  try {\n    const data = await d3.csv(\"./data/INFORM_Risk_2025_v069_index.csv\");\n    riskData = data.map(row => {\n      let normalizedRow = {};\n      for (const [key, value] of Object.entries(row)) {\n        const normalizedKey = key.toLowerCase().replace(/\\s+/g, \"_\").replace(/&/g, \"and\");\n        normalizedRow[normalizedKey] = value;\n      }\n      normalizedRow.inform_risk = +normalizedRow.inform_risk;\n      normalizedRow.vulnerability = +normalizedRow.vulnerability;\n      normalizedRow.hazard_and_exposure = +normalizedRow.hazard_and_exposure;\n      normalizedRow.lack_of_coping_capacity = +normalizedRow.lack_of_coping_capacity;\n      return normalizedRow;\n    });\n    chartData.value = riskData;\n\n    const geoJsonResponse = await fetch(\"./data/country-boundaries.geojson\");\n    const geoJson = await geoJsonResponse.json();\n\n    geoJson.features.forEach(feature => {\n      let riskInfo = riskData.find(d => d.country === feature.properties.SOVEREIGNT) ||\n        riskData.find(d => d.iso3 === feature.properties.SOV_A3);\n      if (riskInfo) {\n        feature.properties.inform_risk = riskInfo.inform_risk;\n        feature.properties.vulnerability = riskInfo.vulnerability;\n        feature.properties.hazard_and_exposure = riskInfo.hazard_and_exposure;\n        feature.properties.lack_of_coping_capacity = riskInfo.lack_of_coping_capacity;\n      } else {\n        feature.properties.inform_risk = null;\n        feature.properties.vulnerability = null;\n        feature.properties.hazard_and_exposure = null;\n        feature.properties.lack_of_coping_capacity = null;\n      }\n    });\n    geoJsonData.value = geoJson;\n  } catch (error) {\n    console.error(\"Error loading data:\", error);\n  }\n};\n\nconst createChart = (data) => {\n  // Remove the previous chart\n  d3.select(\"#INFORM-chart\").select(\"svg\").remove();\n\n  const margin = { top: 40, right: 10, bottom: 10, left: 205 };\n  const width = 0.8 * (windowWidth.value / 2) - margin.left - margin.right;\n  const barHeight = ultimateBarHeight;\n  const svgHeight = data.length * barHeight + margin.top + margin.bottom;\n\n  // Sort the data based on the selected method\n  let sortedData = [...data];\n  if (sortMethod.value === \"ascending\") {\n    sortedData.sort((a, b) => a[riskColumn.value] - b[riskColumn.value]);\n  } else if (sortMethod.value === \"descending\") {\n    sortedData.sort((a, b) => b[riskColumn.value] - a[riskColumn.value]);\n  } else if (sortMethod.value === \"alphabetical\") {\n    sortedData.sort((a, b) => a.country.localeCompare(b.country));\n  }\n\n  const svg = d3.select(\"#INFORM-chart\")\n    .append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", svgHeight)\n    .append(\"g\")\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  const x = d3.scaleLinear()\n    .domain([0, 10]) // change domain to [0, 10] instead of [0, maxRisk]\n    .nice()\n    .range([0, width]);\n  const y = d3.scaleBand()\n    .domain(sortedData.map((d) => d.country))\n    .range([0, svgHeight - margin.top - margin.bottom])\n    .padding(0.1);\n\n  // Bind data to bars\n  const bars = svg.selectAll(\".bar\")\n    .data(sortedData, (d) => d.country); // Use key function for updates\n\n  // Enter phase (initial bars)\n  bars.enter()\n    .append(\"rect\")\n    .attr(\"class\", \"bar\")\n    .attr(\"x\", 0)\n    .attr(\"y\", (d) => y(d.country))\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", (d) => colorScale(d[riskColumn.value]))\n    .attr(\"width\", 0) // Start width at 0 for animation\n    .transition()\n    .duration(1000)\n    .ease(d3.easeCubicOut)\n    .attr(\"width\", (d) => x(d[riskColumn.value]));\n\n  // Append text for the data point on the right side of the bar\n  bars.enter()\n    .append(\"text\")\n    .attr(\"class\", \"bar-text\")\n    .attr(\"x\", (d) => x(d[riskColumn.value]) + 5) // Position text slightly to the right of the bar\n    .attr(\"y\", (d) => y(d.country) + y.bandwidth() / 2)\n    .attr(\"dy\", \".35em\") // Vertically center the text\n    .text((d) => d[riskColumn.value].toFixed(1)) // Display the risk value to one decimal place\n    .style(\"fill\", \"#2c3e50\");\n\n  // Update phase (bars that already exist)\n  bars.transition()\n    .duration(1000)\n    .ease(d3.easeCubicOut)\n    .attr(\"y\", (d) => y(d.country)) // Update position\n    .attr(\"width\", (d) => x(d[riskColumn.value])) // Animate width change\n    .attr(\"fill\", (d) => colorScale(d[riskColumn.value]));\n\n  // Update text for the data point\n  bars.select(\".bar-text\")\n    .transition()\n    .duration(1000)\n    .ease(d3.easeCubicOut)\n    .attr(\"x\", (d) => x(d[riskColumn.value]) + 5) // Adjust position with width change\n    .text((d) => d[riskColumn.value].toFixed(2));\n\n  // Remove phase (bars that no longer have data)\n  bars.exit()\n    .transition()\n    .duration(500)\n    .attr(\"width\", 0)\n    .remove();\n\n  // Remove text for data points when the bar is removed\n  bars.exit()\n    .select(\".bar-text\")\n    .transition()\n    .duration(500)\n    .attr(\"x\", 0)\n    .remove();\n\n  // Append x-axis\n  svg.append(\"g\").attr(\"class\", \"x-axis\").call(d3.axisTop(x)).selectAll(\"text\").style(\"font-size\", \"1rem\").style(\"fill\", \"#2c3e50\");\n  svg.append(\"g\").attr(\"class\", \"y-axis\").call(d3.axisLeft(y)).selectAll(\"text\").style(\"font-size\", \"1rem\").style(\"fill\", \"#2c3e50\");\n};\n\nconst createCountryChart = (country) => {\n  const chartContainer = d3.select(\"#INFORM-chart\")\n    .append(\"div\")\n    .attr(\"class\", \"country-chart\");\n\n  const margin = { top: 40, right: 10, bottom: 10, left: 205 };\n  const width = 0.8 * (windowWidth.value / 2) - margin.left - margin.right;\n  const barHeight = ultimateBarHeight;\n  const keys = [\n    { key: \"inform_risk\", label: \"INFORM Risk\" },\n    { key: \"vulnerability\", label: \"Vulnerability\" },\n    { key: \"hazard_and_exposure\", label: \"Hazard & Exposure\" },\n    { key: \"lack_of_coping_capacity\", label: \"Lack of\\nCoping Capacity\" }\n  ];\n\n  const data = keys.map(d => ({\n    label: d.label,\n    value: +country[d.key],\n    color: colorScale(country[d.key])\n  }));\n\n  const svgHeight = data.length * barHeight + margin.top + margin.bottom;\n\n  const x = d3.scaleLinear().domain([0, 10]).range([0, width]).nice();\n  const y = d3.scaleBand()\n    .domain(data.map(d => d.label))\n    .range([0, svgHeight - margin.top - margin.bottom])\n    .padding(0.1);\n\n  const svg = chartContainer.append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", svgHeight)\n    .append(\"g\")\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n\n  svg.selectAll(\".bar\")\n    .data(data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"class\", \"bar\")\n    .attr(\"y\", d => y(d.label))\n    .attr(\"x\", 0)\n    .attr(\"height\", y.bandwidth())\n    .attr(\"fill\", d => d.color)\n    .attr(\"width\", 0)\n    .transition()\n    .delay(500)\n    .duration(500)\n    .attr(\"width\", d => x(d.value));\n\n  svg.append(\"text\")\n    .attr(\"x\", (width + margin.left + margin.right) / 2 - margin.left)\n    .attr(\"y\", -10)\n    .attr(\"text-anchor\", \"middle\")\n    .text(country.SOVEREIGNT)\n    .attr(\"font-size\", \"16px\")\n    .attr(\"fill\", \"#2c3e50\")\n    .attr(\"font-weight\", \"bold\")\n\n  svg.selectAll(\".bar-text\")\n    .data(data)\n    .enter()\n    .append(\"text\")\n    .attr(\"class\", \"bar-text\")\n    .attr(\"x\", d => x(d.value) + 5)\n    .attr(\"y\", d => y(d.label) + y.bandwidth() / 2)\n    .attr(\"dy\", \".35em\")\n    .text(d => d.value.toFixed(1));\n\n  const xAxis = d3.axisTop(x);\n\n  const xAxisGroup = svg.append(\"g\")\n    .attr(\"class\", \"x-axis\")\n    .call(xAxis);\n\n  // Style all tick labels\n  xAxisGroup.selectAll(\"text\")\n    .style(\"font-size\", \"1rem\")\n    .style(\"fill\", \"#2c3e50\");\n\n  // Remove all ticks except 10\n  xAxisGroup.selectAll(\".tick\")\n    .each(function (d) {\n      if (d !== 10) {\n        d3.select(this).select(\"text\").remove();\n        d3.select(this).select(\"line\").remove();\n      }\n    });\n\n  svg.append(\"g\")\n    .attr(\"class\", \"y-axis\")\n    .call(d3.axisLeft(y))\n    .selectAll(\".tick text\")\n    .each(function () {\n      const self = d3.select(this);\n      const fullText = self.text();\n\n      // Only split into tspans if it's a multi-line label\n      if (fullText.includes(\"\\n\")) {\n        const lines = fullText.split(\"\\n\");\n        self.text(null); // Clear existing text\n\n        lines.forEach((line, i) => {\n          self.append(\"tspan\")\n            .text(line)\n            .attr(\"x\", -10)\n            .attr(\"dy\", i === 0 ? \"-0.25em\" : \"1.1em\"); // First line up, rest normal\n        });\n      }\n    })\n    .style(\"font-size\", \"1rem\")\n    .style(\"fill\", \"#2c3e50\");\n};\n\nconst insertLineBreakBeforeOf = (label) => {\n  return label.replace(/\\b(\\w+)\\s(?=of\\b)/gi, '$1\\n');\n};\n\nconst createMultiCountryCharts = (countries) => {\n  d3.select(\"#INFORM-chart\").selectAll(\"svg\").remove();\n\n  const keys = [\n    { key: \"inform_risk\", label: \"INFORM Risk\" },\n    { key: \"vulnerability\", label: \"Vulnerability\" },\n    { key: \"hazard_and_exposure\", label: \"Hazard & Exposure\" },\n    { key: \"lack_of_coping_capacity\", label: \"Lack of Coping Capacity\" }\n  ];\n\n  const margin = { top: 40, right: 10, bottom: 10, left: 205 };\n  const width = 0.8 * (windowWidth.value / 2) - margin.left - margin.right;\n  const barHeight = ultimateBarHeight;\n  const svgHeight = countries.length * barHeight + margin.top + margin.bottom;\n\n  keys.forEach(({ key, label }) => {\n    const data = countries.map((c) => ({\n      country: c.SOVEREIGNT,\n      formattedCountry: insertLineBreakBeforeOf(c.SOVEREIGNT),\n      value: +c[key],\n      color: colorScale(c[key])\n    }));\n\n    const x = d3.scaleLinear().domain([0, 10]).range([0, width]).nice();\n    const y = d3.scaleBand()\n      .domain(data.map(d => insertLineBreakBeforeOf(d.country)))\n      .range([0, svgHeight - margin.top - margin.bottom])\n      .padding(0.1);\n\n    const svg = d3.select(\"#INFORM-chart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", svgHeight)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // Title\n    svg.append(\"text\")\n      .attr(\"x\", (width + margin.left + margin.right) / 2 - margin.left)\n      .attr(\"y\", -10)\n      .attr(\"text-anchor\", \"middle\")\n      .text(label)\n      .attr(\"font-size\", \"16px\")\n      .attr(\"fill\", \"#2c3e50\")\n      .attr(\"font-weight\", \"bold\")\n\n    // Bars\n    svg.selectAll(\".bar\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"class\", \"bar\")\n      .attr(\"y\", d => y(d.formattedCountry))\n      .attr(\"height\", y.bandwidth())\n      .attr(\"x\", 0)\n      .attr(\"fill\", d => d.color)\n      .attr(\"width\", 0)\n      .transition()\n      .duration(800)\n      .attr(\"width\", d => x(d.value));\n\n    // Labels\n    svg.selectAll(\".bar-text\")\n      .data(data)\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"bar-text\")\n      .attr(\"x\", d => x(d.value) + 5)\n      .attr(\"y\", d => y(d.formattedCountry) + y.bandwidth() / 2)\n      .attr(\"dy\", \".35em\")\n      .text(d => d.value.toFixed(1));\n\n    // Axes\n    const xAxis = d3.axisTop(x);\n\n    const xAxisGroup = svg.append(\"g\")\n      .attr(\"class\", \"x-axis\")\n      .call(xAxis);\n\n    // Style all tick labels\n    xAxisGroup.selectAll(\"text\")\n      .style(\"font-size\", \"1rem\")\n      .style(\"fill\", \"#2c3e50\");\n\n    // Remove all ticks except 10\n    xAxisGroup.selectAll(\".tick\")\n      .each(function (d) {\n        if (d !== 10) {\n          d3.select(this).select(\"text\").remove();\n          d3.select(this).select(\"line\").remove();\n        }\n      });\n\n    svg.append(\"g\")\n      .attr(\"class\", \"y-axis\")\n      .call(d3.axisLeft(y))\n      .selectAll(\".tick text\")\n      .each(function () {\n        const self = d3.select(this);\n        const fullText = self.text();\n\n        // Only split into tspans if it's a multi-line label\n        if (fullText.includes(\"\\n\")) {\n          const lines = fullText.split(\"\\n\");\n          self.text(null); // Clear existing text\n\n          lines.forEach((line, i) => {\n            self.append(\"tspan\")\n              .text(line)\n              .attr(\"x\", -10)\n              .attr(\"dy\", i === 0 ? \"-0.25em\" : \"1.1em\"); // First line up, rest normal\n          });\n        }\n      })\n      .style(\"font-size\", \"1rem\")\n      .style(\"fill\", \"#2c3e50\");\n  });\n};\n\n\nwatch(riskColumn, () => {\n  createChart(chartData.value);\n\n  if (geoJsonData.value) {\n    geoJsonData.value.features.forEach(feature => {\n      feature.properties.fillColor = feature.properties[riskColumn.value] !== null && feature.properties[riskColumn.value] !== undefined\n        ? colorScale(feature.properties[riskColumn.value])\n        : \"#D3D3D3\";\n    });\n\n    // Force Vue to recognize the change in geoJsonData\n    geoJsonData.value = { ...geoJsonData.value };\n  }\n});\n\nwatch(sortMethod, () => {\n  createChart(chartData.value); // Recreate the chart with the new sort method\n});\n\nwatch(chartData, (newData) => {\n  if (newData.length > 0) {\n    createChart(newData);\n  }\n});\n\nconst componentRoot = ref(null);\nconst isVisible = ref(false);\n\nlet observer;\n\nonMounted(() => {\n  window.addEventListener(\"resize\", handleResize);\n  observer = new IntersectionObserver(\n    ([entry]) => {\n      isVisible.value = entry.isIntersecting;\n\n      if (!entry.isIntersecting) {\n        // Deselect all countries and remove chart\n        selectedCountries.value = [];\n        d3.select(\"#INFORM-chart\").selectAll(\"*\").remove();\n      }\n\n    },\n    {\n      root: null, // viewport\n      threshold: 0.1,\n    },\n    (entries) => {\n      entries.forEach((entry) => {\n        if (!entry.isIntersecting) {\n          // The component has left the viewport, trigger deselect action\n          deselectAllCountries();\n        }\n      });\n    },\n    {\n      threshold: 0, // Trigger when the element is fully out of the viewport\n    }\n  );\n\n  if (componentRoot.value) {\n    observer.observe(componentRoot.value);\n  }\n\n  window.addEventListener(\"resize\", handleResize);\n  loadGeoJsonMap();\n});\n\nonBeforeUnmount(() => {\n  if (componentRoot.value) {\n    observer.unobserve(componentRoot.value);\n  }\n  window.removeEventListener(\"resize\", handleResize);\n\n});\n\nconst deselectAllCountries = () => {\n  // Clear selected countries\n  selectedCountries.value = [];\n\n  geoJsonData.value.features.forEach(feature => {\n    feature.properties.fillColor = \"#D3D3D3\"; // Reset to default color\n    feature.properties.weight = 1; // Reset border width to 1\n  });\n\n  geoJsonData.value = { ...geoJsonData.value }; // Trigger reactivity\n\n  // Optionally, reset the chart data if required\n  if (chartData.value.length > 0) {\n    createChart(chartData.value);\n  }\n};\n\n\n\n</script>\n\n<style scoped>\n/* Layout */\n.container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  padding: 4rem 5rem 5rem 5rem;\n}\n\n.content {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  width: 100%;\n  overflow: hidden;\n}\n\n.map-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\nl-map {\n  width: 100%;\n  height: 100%;\n}\n\n.main-title {\n  position: absolute;\n  z-index: 1000;\n  padding-top: 2rem;\n  padding-left: 2rem;\n}\n\n@keyframes slideInFromRight {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n.chart-container {\n  position: absolute;\n  top: 5.5rem;\n  right: 6.5rem;\n  width: calc(50% - 7.5rem);\n  max-height: calc(100% - 12rem);\n  z-index: 1000;\n  background: white;\n  border: 1px solid #ccc;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  overflow: auto;\n\n  /* animation settings */\n  animation: slideInFromRight 0.5s ease-out forwards;\n}\n\n#INFORM-chart {\n  width: 100%;\n  overflow-y: auto;\n}\n\nh3 {\n  font-size: 5em;\n  font-weight: 800;\n  color: #089d9d4f;\n  text-transform: uppercase;\n  position: absolute;\n  bottom: 5rem;\n  right: 7rem;\n  margin: 0 0 10px 0;\n  z-index: 1000;\n}\n\n.map-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\nh4 {\n  padding-top: 20px;\n}\n\n.country-info h4 {\n  color: #2c3e50;\n}\n\n.country-info p {\n  margin: 5px 0;\n}\n\n.leaflet-container {\n  background-color: #40E0D0;\n}\n\n.filter-controls {\n  position: absolute;\n  bottom: 5rem;\n  left: 5.25rem;\n  z-index: 1000;\n  padding: 10px;\n  text-align: left;\n  width: 30%;\n}\n\n.radio-group {\n  margin-bottom: .25rem;\n  position: relative;\n}\n\n.radio-group:hover .descriptor {\n  max-height: 500px; /* adjust as needed */\n  opacity: 1;\n}\n\n/* treat like an h5 */\n.filter-controls label {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  font-size: 28px;\n  font-weight: 300;\n}\n\n.radio-group label:hover + .descriptor,\n.radio-group input:hover + .descriptor {\n  max-height: 500px; /* large enough for your longest descriptor */\n  opacity: 1;\n}\n\n/* treat like a global p */\n.descriptor {\n  padding-left: 5px;\n  max-height: 0;\n  opacity: 0;\n  overflow: hidden;\n  transition: max-height 0.3s ease, opacity 0.3s ease;\n  margin-left: 1.75rem;\n  font-weight: 400;\n  margin-bottom: 0.5em;\n  font-size: 22px;\n  color: #2c3e50;\n}\n\ninput[type=\"radio\"] {\n  appearance: none;\n  -webkit-appearance: none;\n  background-color: #fff;\n  border: 2px solid #089d9d82;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  position: relative;\n}\n\ninput[type=\"radio\"]:checked {\n  border-color: #089c9d;\n}\n\ninput[type=\"radio\"]:checked::before {\n  content: \"\";\n  position: absolute;\n  top: 3px;\n  left: 3px;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: #089c9d;\n}\n\n.reset-button {\n  position: absolute;\n  font-weight: bold;\n  top: 10px;\n  left: 10px;\n  background-color: #40E0D0;\n  color: white;\n  border: none;\n  padding: 3px 6px;\n  font-size: 16px;\n  cursor: pointer;\n}\n\n.reset-button:hover {\n  background-color: #089d9d;\n}\n</style>\n\n<style>\n.leaflet-control-zoom {\n  display: none;\n}\n</style>","import script from \"./INFORMRiskIndex.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./INFORMRiskIndex.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./INFORMRiskIndex.vue?vue&type=style&index=0&id=88d91548&scoped=true&lang=css\"\nimport \"./INFORMRiskIndex.vue?vue&type=style&index=1&id=88d91548&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-88d91548\"]])\n\nexport default __exports__","<template>\n  <div class=\"coping-container\" ref=\"containerRef\">\n    <h3 class=\"title\">Climate Survival Kit</h3>\n\n    <div class=\"video-viewer\">\n      <video\n        ref=\"copingVideo\"\n        loop\n        muted\n        playsinline\n        class=\"coping-video\"\n      >\n        <source\n          src=\"@/assets/coping-mechanisms/Coping-Mechanisms_Animation.mp4\"\n          type=\"video/mp4\"\n        />\n        Your browser does not support the video tag.\n      </video>\n\n      <p class=\"video-caption\">{{ videoText }}</p>\n\n      <button class=\"video-toggle\" @click=\"togglePlay\">\n        {{ isPlaying ? 'Pause' : 'Play' }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\n\nconst copingVideo = ref(null)\nconst containerRef = ref(null)\nconst isPlaying = ref(false)\nconst currentSecond = ref(0)\n\nlet observer\nlet delayTimeout\n\nconst DELAY_MS = 1500\n\n// Caption text mapped to specific seconds\nconst textBySecond = {\n  0: 'A lush landscape of Morocco...',\n  1: 'A lush landscape of Morocco...but this is going to be changed',\n  2: 'with sheep and cattle grazing, and wheat growing, but this is going to be changed',\n  3: 'a well may be dug to access groundwater',\n  4: 'another well and even a dam',\n  5: 'and then we have this at 5 seconds',\n  6: 'yet another message at 6 seconds, but this is going to be changed',\n  7: 'and then we have this at 7 seconds, but this is going to be changed',\n  8: 'yet another message at 8 seconds',\n  9: 'and then we have this at 9 seconds',\n  10: 'yet another message at 10 seconds',\n  11: 'and then we have this at 11 seconds',\n  12: 'and finally this at 12 seconds, but this is going to be changed',\n  13: 'and finally this at 13 seconds, but this is going to be changed',\n  14: 'and finally this at 14 seconds, but this is going to be changed',\n  15: 'and finally this at 15 seconds, but this is going to be changed',\n}\n\nconst videoText = computed(() => {\n  const seconds = Object.keys(textBySecond).map(Number).sort((a, b) => b - a)\n  for (const sec of seconds) {\n    if (currentSecond.value >= sec) {\n      return textBySecond[sec]\n    }\n  }\n  return ''\n})\n\nfunction togglePlay() {\n  const video = copingVideo.value\n  if (!video) return\n\n  clearTimeout(delayTimeout)\n\n  if (video.paused) {\n    video.play().then(() => {\n      isPlaying.value = true\n    }).catch(err => {\n      console.warn('Playback blocked:', err)\n    })\n  } else {\n    video.pause()\n    isPlaying.value = false\n  }\n}\n\nfunction handleTimeUpdate() {\n  if (copingVideo.value) {\n    currentSecond.value = Math.floor(copingVideo.value.currentTime)\n  }\n}\n\nonMounted(() => {\n  if (copingVideo.value) {\n    copingVideo.value.addEventListener('timeupdate', handleTimeUpdate)\n  }\n\n  observer = new IntersectionObserver(\n    ([entry]) => {\n      const video = copingVideo.value\n      if (!video) return\n\n      if (entry.isIntersecting) {\n        delayTimeout = setTimeout(() => {\n          video.play().then(() => {\n            isPlaying.value = true\n          }).catch(err => {\n            console.warn('Autoplay blocked on delay:', err)\n          })\n        }, DELAY_MS)\n      } else {\n        clearTimeout(delayTimeout)\n        video.pause()\n        isPlaying.value = false\n      }\n    },\n    { threshold: 0.25 }\n  )\n\n  if (containerRef.value) {\n    observer.observe(containerRef.value)\n  }\n})\n\nonUnmounted(() => {\n  if (observer && containerRef.value) {\n    observer.unobserve(containerRef.value)\n  }\n\n  if (copingVideo.value) {\n    copingVideo.value.removeEventListener('timeupdate', handleTimeUpdate)\n  }\n\n  clearTimeout(delayTimeout)\n})\n</script>\n\n<style scoped>\n.coping-container {\n  padding: 4rem 5rem 5rem 5rem;\n  position: relative;\n  height: calc(100vh - 10rem);\n  width: 100vw;\n  overflow: hidden;\n}\n\n.title {\n  position: absolute;\n  font-weight: 800;\n  padding: 5px 10px;\n  top: 4rem;\n  left: 5.25rem;\n  font-size: 5em;\n  z-index: 999;\n  text-transform: uppercase;\n  color: #ffffff46;\n  line-height: 1;\n  text-align: left;\n  margin: 0;\n}\n\n.video-viewer {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n.coping-video {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.video-toggle {\n  font-family: 'Parkinsans', sans-serif;\n  font-weight: 600;\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  background: #ffffffb6;\n  color: #2c3e50;\n  border: none;\n  padding: 0.6rem 1.2rem;\n  font-size: 1rem;\n  cursor: pointer;\n  border-radius: 8px;\n  z-index: 1000;\n  transition: background 0.3s;\n}\n\n.video-toggle:hover {\n  background: #2c3e50b6;\n  color: #ffffff;\n}\n\n.video-caption {\n  position: absolute;\n  line-height: 1.3;\n  max-width: 40%;\n  top: 0.5rem;\n  left: 61rem;\n  font-size: 28px;\n  color: #ffffff;\n  font-weight: 300;\n  z-index: 999;\n  transition: opacity 0.5s ease-in-out;\n}\n</style>\n","import script from \"./CopingMechanisms.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CopingMechanisms.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CopingMechanisms.vue?vue&type=style&index=0&id=5d8f00c2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5d8f00c2\"]])\n\nexport default __exports__","<template>\n  <div class=\"map-wrapper\" ref=\"mapWrapper\">\n    <div class=\"map-container\">\n      <h3 class=\"title\">Disaster Time Machine</h3>\n      <l-map ref=\"map\" v-model:zoom=\"zoom\" :center=\"[20, 0]\" :zoom=\"zoom\" :max-bounds=\"[[-60, -180], [85, 180]]\">\n        <l-geo-json v-if=\"geoJsonData\" :geojson=\"geoJsonData\" :key=\"year\" :options-style=\"getCountryStyle\" />\n      </l-map>\n    </div>\n    <div class=\"color-legend\" v-if=\"year\">\n      <div class=\"legend-label left\">Few</div>\n      <div class=\"legend-gradient\"></div>\n      <div class=\"legend-label right\">Many</div>\n    </div>\n    <div class=\"custom-slider\" v-if=\"years.length && isInView\">\n      <div class=\"slider-track\"></div>\n      <div class=\"slider-markers\">\n        <div v-for=\"(y, i) in years\" :key=\"y\" class=\"slider-marker\" :class=\"{ active: year === y }\"\n          @click=\"selectedIndex = i; stopYearLoop();\">\n\n          <div class=\"circle\"></div>\n          <div class=\"label\">{{ y }}</div>\n        </div>\n      </div>\n    </div>\n    <div class=\"event-summary-types\" v-if=\"year\">\n      <div class=\"summary\">\n        <h4>{{ year }}</h4>\n        <h5>{{ totalEventsForSelectedYear }} disasters</h5>\n      </div>\n\n      <div v-if=\"eventTypeBreakdownForSelectedYear.length\">\n        <ul>\n          <li v-for=\"([type, count], i) in eventTypeBreakdownForSelectedYear\" :key=\"i\">\n            {{ type }}: <strong>{{ count }}</strong>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\nimport \"leaflet/dist/leaflet.css\";\nimport { LMap, LGeoJson } from \"@vue-leaflet/vue-leaflet\";\n\nexport default {\n  components: {\n    LMap,\n    LGeoJson,\n  },\n\n  data() {\n    return {\n      looping: true,\n      yearLoopInterval: null,\n      zoom: 3,\n      geoJsonData: null,\n      disasterCounts: [],\n      year: null,\n      years: [],\n      colorScale: () => \"transparent\", // default fallback\n      isInView: false,\n    };\n  },\n\n  computed: {\n    selectedIndex: {\n      get() {\n        return this.years.indexOf(this.year);\n      },\n      set(val) {\n        this.year = this.years[val];\n      },\n    },\n    totalEventsForSelectedYear() {\n      const year = this.year;\n      return this.disasterCounts\n        .filter((d) => d.year === year)\n        .reduce((sum, d) => sum + d.totalDisasters, 0);\n    },\n    eventTypeBreakdownForSelectedYear() {\n      const year = this.year;\n      const typeTotals = {};\n\n      this.disasterCounts\n        .filter((d) => d.year === year)\n        .forEach((d) => {\n          Object.entries(d).forEach(([key, value]) => {\n            if (\n              key !== \"year\" &&\n              key !== \"country\" &&\n              key !== \"iso\" &&\n              key !== \"totalDisasters\" &&\n              value > 0\n            ) {\n              typeTotals[key] = (typeTotals[key] || 0) + value;\n            }\n          });\n        });\n\n      // Sort alphabetically by disaster type\n      return Object.entries(typeTotals).sort((a, b) => a[0].localeCompare(b[0]));\n    },\n\n  },\n\n  watch: {\n    year(newYear) {\n      const values = this.disasterCounts\n        .filter((d) => d.year === newYear)\n        .map((d) => d.totalDisasters)\n        .filter((v) => v > 0); // ignore zeros for max\n\n      const max = d3.max(values) || 1;\n\n      const colorInterpolator = d3.interpolateRgb(\"#E9D1D5\", \"#821749\");\n\n      const scale = d3.scaleLinear()\n        .domain([1, max])\n        .interpolate(() => colorInterpolator);\n\n      this.colorScale = (value) => {\n        if (!value || value === 0) return \"transparent\";\n        return scale(value);\n      };\n    },\n  },\n\n  methods: {\n    getCountryStyle(feature) {\n      const countryName = feature.properties.SOVEREIGNT;\n      const dataForYear = this.disasterCounts.find(\n        (d) => d.year === this.year && d.country === countryName\n      );\n      const value = dataForYear ? dataForYear.totalDisasters : 0;\n\n      return {\n        fillColor: this.colorScale(value),\n        weight: 2,\n        opacity: 1,\n        color: \"#089c9d\",\n        fillOpacity: 1,\n      };\n    },\n    startYearLoop() {\n    if (this.yearLoopInterval || !this.years.length || !this.isInView) return;\n\n    this.yearLoopInterval = setInterval(() => {\n      let nextIndex = (this.selectedIndex + 1) % this.years.length;\n      this.selectedIndex = nextIndex;\n    }, 3000); // 3 seconds\n  },\n\n  stopYearLoop() {\n    clearInterval(this.yearLoopInterval);\n    this.yearLoopInterval = null;\n  },\n\n  //  New method to get total events by year\n  getTotalEventsByYear() {\n    const totals = {};\n\n    this.disasterCounts.forEach((d) => {\n      if (!totals[d.year]) {\n        totals[d.year] = 0;\n      }\n      totals[d.year] += d.totalDisasters;\n    });\n\n    return totals;\n  },\n},\n\n  mounted() {\n    // Load GeoJSON\n    fetch(\"./data/country-boundaries.geojson\")\n      .then((response) => response.json())\n      .then((data) => {\n        const filtered = {\n          ...data,\n          features: data.features.filter(\n            (f) => f.properties.SOVEREIGNT !== \"Antarctica\"\n          ),\n        };\n        this.geoJsonData = filtered;\n      })\n      .catch((error) => {\n        console.error(\"Error loading GeoJSON file:\", error);\n      });\n\n    // Load and process CSV\n    fetch(\"./data/EM-DAT-data-ALL.csv\")\n      .then((response) => response.text())\n      .then((data) => {\n        const parsedData = d3.csvParse(data);\n\n        const filtered = parsedData\n          .filter(\n            (d) =>\n              d[\"Disaster Subgroup\"] !== \"Geophysical\" &&\n              d[\"Disaster Subgroup\"] !== \"Biological\"\n          )\n          .map((d) => ({\n            year: d[\"DisNo.\"].substring(0, 4),\n            iso: d[\"ISO\"],\n            country: d[\"Country\"],\n            type: d[\"Disaster Type\"],\n          }));\n\n        const grouped = d3.rollup(\n          filtered,\n          (entries) => {\n            const typeCounts = d3.rollup(\n              entries,\n              (v) => v.length,\n              (d) => d.type\n            );\n            const totalDisasters = Array.from(typeCounts.values()).reduce(\n              (sum, count) => sum + count,\n              0\n            );\n            return {\n              iso: entries[0].iso,\n              totalDisasters,\n              typeBreakdown: Object.fromEntries(typeCounts),\n            };\n          },\n          (d) => d.year,\n          (d) => d.country\n        );\n\n        const flatData = [];\n        grouped.forEach((countries, year) => {\n          countries.forEach((value, country) => {\n            flatData.push({\n              year,\n              country,\n              iso: value.iso,\n              totalDisasters: value.totalDisasters,\n              ...value.typeBreakdown,\n            });\n          });\n        });\n\n        console.log(\"Flat Data:\", flatData);\n\n        this.disasterCounts = flatData;\n\n        const uniqueYears = Array.from(new Set(flatData.map((d) => d.year))).sort();\n        this.years = uniqueYears;\n        this.year = uniqueYears[0]; // triggers initial color scale\n\n        //  Call the new method and log result\n        const yearlyTotals = this.getTotalEventsByYear();\n        console.log(\"Total events by year:\", yearlyTotals);\n        this.startYearLoop();\n      })\n      .catch((error) => {\n        console.error(\"Error loading CSV file:\", error);\n      });\n\n      const observer = new IntersectionObserver(\n    ([entry]) => {\n      this.isInView = entry.isIntersecting;\n      \n      // Start the loop when the component comes into view\n      if (this.isInView) {\n        this.startYearLoop();\n      } else {\n        this.stopYearLoop();\n      }\n    },\n    {\n      threshold: 0.1,\n    }\n  );\n\n  if (this.$refs.mapWrapper) {\n    observer.observe(this.$refs.mapWrapper);\n  }\n  },\n  \n};\n</script>\n\n\n<style scoped>\nhtml,\nbody {\n  height: 100%;\n  margin: 0;\n}\n\n.leaflet-container {\n  background-color: #40E0D0;\n}\n\n.map-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: calc(100vh - 11rem);\n  width: calc(100vw - 13rem);\n}\n\n.map-wrapper {\n  position: relative;\n}\n\n.custom-slider {\n  position: absolute;\n  bottom: 2rem;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 95%;\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.slider-track {\n  position: relative;\n  width: 100%;\n  height: 2px;\n  background: #089c9d;\n  margin-bottom: -10px;\n}\n\n.slider-markers {\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n}\n\n.slider-marker {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  cursor: pointer;\n}\n\n.slider-marker .circle {\n  width: 14px;\n  height: 14px;\n  border-radius: 50%;\n  border: 2px solid #089c9d;\n  background: #40E0D0;\n  margin-bottom: 4px;\n  transition: background 0.3s, border 0.3s;\n}\n\n.slider-marker.active .circle {\n  background: white;\n  border-color: white;\n}\n\n.slider-marker .label {\n  font-size: 16px;\n  font-weight: 500;\n  color: #089c9d;\n  transition: color 0.3s;\n}\n\n.slider-marker.active .label {\n  font-weight: 800;\n  color: white;\n}\n\n.event-summary-types {\n  position: absolute;\n  top: 32.5rem;\n  left: 3rem;\n  color: #2c3e50;\n  text-align: left;\n  font-size: 22px;\n  font-weight: 400;\n  max-height: 500px;\n  overflow-y: auto;\n  width: 500px;\n  z-index: 1000;\n}\n\n.title {\n  position: absolute;\n  text-align: right;\n  z-index: 2;\n  bottom: 5.5rem;\n  right: 2.5rem;\n  font-size: 5em;\n  font-weight: 800;\n  color: #2c3e5054;\n  text-transform: uppercase;\n  line-height: 1;\n}\n\n.event-summary-types h4 {\n  font-size: 60px;\n  margin: 0;\n  font-weight: 300;\n  line-height: 1;\n  color: #2c3e50;\n}\n\nh5 {\n  padding-top: 1rem;\n  text-align: left;\n  font-size: 28px;\n  font-weight: 300;\n  margin: 0;\n  line-height: 1.25;\n  color: #2c3e50;\n}\n\n.event-summary-types ul {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.event-summary-types li {\n  margin: 0.2rem 0;\n}\n\n.color-legend {\n  position: absolute;\n  bottom: 6.5rem;\n  left: 3rem;\n  width: 20%;\n  display: flex;\n  align-items: center;\n  z-index: 1000;\n  pointer-events: none;\n}\n\n.legend-gradient {\n  flex: 1;\n  height: 16px;\n  background: linear-gradient(to right, #E9D1D5, #821749);\n  border: 2px solid #089c9d;\n  border-radius: 10px;\n  margin: 0 0.5rem;\n}\n\n.legend-label {\n  font-size: 16px;\n  color: #089c9d;\n  white-space: nowrap;\n  font-weight: 500;\n}\n\n.legend-label.left {\n  text-align: right;\n}\n\n.legend-label.right {\n  text-align: left;\n}\n\n</style>\n","import { render } from \"./DoomedForever.vue?vue&type=template&id=1e65c190&scoped=true\"\nimport script from \"./DoomedForever.vue?vue&type=script&lang=js\"\nexport * from \"./DoomedForever.vue?vue&type=script&lang=js\"\n\nimport \"./DoomedForever.vue?vue&type=style&index=0&id=1e65c190&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1e65c190\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=2a944c9c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2a944c9c&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')","var map = {\n\t\"./black-speckle-cow.png\": 8052,\n\t\"./brown-cow.png\": 9139,\n\t\"./brown-ram.png\": 6082,\n\t\"./brown-sheep.png\": 4967,\n\t\"./brown-speckle-cow.png\": 3617,\n\t\"./gray-cow.png\": 2150,\n\t\"./white-ram-2.png\": 4084,\n\t\"./white-sheep-2.png\": 7045\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 4053;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"24\":\"0ead91ae\",\"71\":\"288da8dc\",\"249\":\"2e656ac8\",\"791\":\"72813729\",\"886\":\"ad991733\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"lsq-thesis:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/Thesis/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunklsq_thesis\"] = self[\"webpackChunklsq_thesis\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(189); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","$options","visibleTitles","title","i","_normalizeClass","active","$data","activeStep","style","_normalizeStyle","color","getTabColor","borderLeftColor","onClick","$event","goToStep","_hoisted_3","steps","stepComponent","index","_createBlock","_resolveDynamicComponent","setActiveStep","_hoisted_4","showMethodology","_cache","href","target","rel","_hoisted_5","_createStaticVNode","_createCommentVNode","firesSvg","ref","sparkGroup","firesText","clipText","floodsSvg","floodsText","raindropGroup","raindropRect","droughtsSvg","noiseCanvas","noiseDataUrl","droughtsText","sparkTimer","firesObserver","floodsObserver","droughtColorTimer","droughtsHeight","setDroughtsSvgPosition","droughtsSvgNode","value","droughtsTextRect","getBoundingClientRect","position","left","top","width","height","setAttribute","setFiresSvgPosition","svgNode","x","y","d3","setFloodsSvgPosition","floodsNode","floodsRectBox","drawBackgroundNoise","canvas","ctx","getContext","fillStyle","fillRect","bladeCount","Math","random","length","angle","PI","xEnd","cos","yEnd","sin","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","toDataURL","setupIntersectionObservers","droughtsObserver","IntersectionObserver","entry","display","isIntersecting","threshold","Element","observe","createSparks","stop","isRaining","renderRaindrops","selectAll","interrupt","remove","group","spawnSpark","x1","y1","x2","y2","spark","append","attr","transition","duration","svgEl","numDrops","svg","querySelector","dropWidth","dropHeight","startY","endY","delay","dropPath","bezierCurveTo","toString","ease","on","repeat","newX","this","onMounted","async","nextTick","droughtColors","domain","range","elapsed","t","onUnmounted","disconnect","__exports__","precipWrapperRef","chartRefs","legendRefs","historicalData","projectedData","projectedColumns","filteredPrecipitationColumns","computed","filter","col","toLowerCase","includes","observer","entries","forEach","classList","add","triggerPrecipitationAnimation","getUnitPerEllipse","innerWidth","innerHeight","window","unitPerEllipse","column","historical","map","d","year","round","parseFloat","source","isNaN","projected","combinedRaw","combinedData","getYearlySums","renderPrecipitationCircles","renderLegend","dropSize","colorMap","regression","legendItems","type","centerX","centerY","text","linearRegression","xMean","yMean","slope","intercept","predict","container","parentNode","margin","right","bottom","g","years","Array","from","Set","sort","a","b","xScale","padding","maxValue","yScale","line","bandwidth","regressionData","defs","gradient","regressionPath","datum","totalLength","node","getTotalLength","totalCircles","floor","barCenter","ellipseRx","min","dropYmm","dropY","randomYOffset","randomDelay","xTickYears","arr","data","enter","ticks","toFixed","hoverBar","event","hoverColor","yearlySums","values","sum","find","watch","histCol","hist","proj","Object","keys","err","console","error","heatmapRefs","hoveredBlock","wrapperRef","selectedColumnGroup","selectedProjectedColumn","hasAnimated","legendInFahrenheit","showTitle","showOverlay","legendColors","celsiusBreaks","fahrenheitBreaks","c","labels","colors","label","grayscaleLegendColors","grayscaleColors","filteredProjectedColumnOptions","reverse","getScenarioInfo","columnName","subtitle","soundBite","message","renderUnifiedHeatmap","isLastHeatmap","months","month","colorScale","xAxisTicks","toGrayscale","rgb","grayscale","r","filtered","immediate","sparkTimers","startSparks","each","timer","push","stopSparks","showBlocks","defaultGroup","defaultOptions","fill","at","setTimeout","wrapper","messages","querySelectorAll","resizeTimeout","toggleInterval","setInterval","onBeforeUnmount","clearInterval","handleResize","clearTimeout","addEventListener","removeEventListener","newVal","msg","unobserve","textStage","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","displayedHerd","animal","src","require","_hoisted_10","backgroundColor","backgroundTransitionColor","_hoisted_11","_hoisted_12","_toDisplayString","finalPercentage","herd","animalTypes","hasReduced","mounted","generateHerd","setupIntersectionObserver","$nextTick","beforeUnmount","pct","methods","idCounter","animalCounts","j","placeAnimals","visualArea","$refs","herdVisual","textBox","herdText","areaRect","textRect","titleBox","graphicTitle","titleRect","maxWidth","maxHeight","animalSize","cellSize","textLeft","textTop","titleLeft","titleTop","exclusionZones","cols","rows","grid","posX","posY","overlapsText","some","zone","positioned","pos","reduceHerd","totalToRemove","remainingToRemove","interval","splice","remainingPercent","max","startCountdown","dpr","devicePixelRatio","herdArea","offsetWidth","offsetHeight","scale","stage","log","isReducing","resetAndAnimate","backgroundStyle","firstPhaseStarted","shownWheatBase","_createTextVNode","wheatBaseArray","slice","alt","imageSize","shownWheat69","landValue88","wheat69Array","_hoisted_13","secondPhaseStarted","_hoisted_14","_hoisted_15","_hoisted_16","shownWheat41","_hoisted_17","landValue74","_hoisted_18","_hoisted_19","wheat41Array","_hoisted_20","wheatBaseCount","wheat69Count","wheat41Count","_","updateImageSize","logWheatCounts","observeIntersection","containerWidth","containerHeight","totalWheats","gridCols","ceil","sqrt","imageMaxWidth","imageMaxHeight","animateSections","restartAnimations","time","incrementShownWheatBase","timeEnd","countDownLand88","incrementShownWheat69","countDownLand74","incrementShownWheat41","callback","ultimateBarHeight","zoom","geoJsonData","chartData","sortMethod","riskColumn","windowWidth","selectedCountries","riskData","geoJsonOptions","onEachFeature","feature","layer","click","e","handleCountryClick","bringToFront","countryName","properties","SOVEREIGNT","alreadySelectedIndex","findIndex","alert","createChart","createCountryCharts","createMultiCountryCharts","f","countries","country","createCountryChart","geoJsonStyle","riskValue","isSelected","fillColor","undefined","weight","opacity","fillOpacity","loadGeoJsonMap","row","normalizedRow","normalizedKey","replace","inform_risk","vulnerability","hazard_and_exposure","lack_of_coping_capacity","geoJsonResponse","fetch","geoJson","json","features","riskInfo","iso3","SOV_A3","select","barHeight","svgHeight","sortedData","localeCompare","nice","bars","exit","call","chartContainer","xAxis","xAxisGroup","self","fullText","lines","split","insertLineBreakBeforeOf","formattedCountry","newData","componentRoot","isVisible","root","deselectAllCountries","DELAY_MS","copingVideo","containerRef","isPlaying","currentSecond","delayTimeout","textBySecond","videoText","seconds","Number","sec","togglePlay","video","paused","play","then","catch","warn","pause","handleTimeUpdate","currentTime","_createVNode","_component_l_map","center","default","_withCtx","_component_l_geo_json","geojson","getCountryStyle","isInView","selectedIndex","stopYearLoop","totalEventsForSelectedYear","eventTypeBreakdownForSelectedYear","count","components","LMap","LGeoJson","looping","yearLoopInterval","disasterCounts","get","indexOf","set","val","reduce","totalDisasters","typeTotals","newYear","v","colorInterpolator","interpolate","dataForYear","startYearLoop","nextIndex","getTotalEventsByYear","totals","response","parsedData","substring","iso","grouped","typeCounts","typeBreakdown","fromEntries","flatData","uniqueYears","yearlyTotals","mapWrapper","name","HelloMorocco","RainfallPrecipitation","MeanTemperature","SheepCattleHerds","LandPloughedWheat","CopingMechanisms","INFORMRiskIndex","DoomedForever","visibleSteps","stepTitles","handleKeyPress","component","formatStepName","step","trim","code","preventDefault","stepEls","document","el","scrollIntoView","behavior","block","directives","intersect","binding","rootMargin","render","createApp","App","mount","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","resolve","module","exports","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","n","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","mode","ns","create","def","current","getOwnPropertyNames","definition","defineProperty","enumerable","chunkId","Promise","all","promises","u","miniCssF","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","url","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","onScriptComplete","prev","onerror","onload","doneFns","removeChild","bind","head","appendChild","Symbol","toStringTag","p","installedChunks","installedChunkData","promise","reject","loadingEnded","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}